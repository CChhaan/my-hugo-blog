---
# 文章标题
title: 1.4 条件渲染和列表渲染
# 文章内容摘要
# description: 本文详细介绍了 Git 这一分布式版本控制系统的优点，对比了 Windows 与 macOS/Linux 系统下的常用命令，讲解了 vim 操作模式及常用命令，还阐述了 Git 的基本配置、特定项目配置和命令缩写设置等内容。
# 文章内容关键字
keywords: React 条件渲染, JSX 条件返回, React 三目运算符, JSX 逻辑运算符, React 渲染列表, React map 渲染数组, React filter 过滤数据, key 的作用, React key 使用规范, React 列表渲染优化, JSX 变量条件渲染, Fragment key, React 渲染性能优化, React 条件语句, JSX 动态渲染
# 发表日期
date: 2025-10-09
summary: 本文介绍了 React 中条件渲染和列表渲染的用法，包括条件返回 JSX、选择性地包含 JSX、从数组中渲染数据、对数组项进行过滤以及用 `key` 保持列表项的顺序等内容。
# 分类
categories:
  - React文档阅读
# 标签
tags:
  - react
  - 前端框架
  - 前端开发
  - 组件化开发
---

## 条件返回 JSX

使用 JavaScript 的 `if` 和 `return` 语句来编写分支逻辑

在 React 中，**控制流（如条件）由 JavaScript 处理**。

当组件不需要渲染任何内容时，可以 **直接返回 `null`**，组件必须返回一个值，即使该值为 `null`。

## 选择性地包含 JSX

- 三目运算符（`? :`）

JavaScript 提供了 [条件运算符](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Conditional_Operator)，又称“三目运算符”，可用于紧凑的条件判断，适用于简单条件的渲染逻辑。

**当嵌套层级过多时，应考虑将条件提取为子组件**，以避免复杂的嵌套结构。

在 React 中，标签是代码的一部分，可以使用 **变量或函数** 来整理复杂的表达式。

- 与运算符（`&&`）

当 [JavaScript `&&` 表达式](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Logical_AND) 左侧（条件）为 `true` 时，返回右侧的值。

当条件为 `false` 时，整个表达式的值为 `false`，React 会将 `false` 视为“空值”，不会渲染任何内容。

**注意：切勿将数字放在 `&&` 左侧。**：JavaScript 会自动将左值转换为布尔类型，如果左侧是 `0`，表达式结果为 `0`，React 将渲染 `0`，而不是跳过渲染。

- 选择性地将 JSX 赋值给变量

当快捷语法（如三目或 `&&`）使代码难以阅读时，可使用 `if` 语句与变量结合。

可使用 [`let`](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/let) 定义变量，并多次赋值：先设置一个默认渲染内容，通过条件逻辑更新变量的值。

可通过 [在 JSX 中使用大括号嵌入 JavaScript](https://zh-hans.react.dev/learn/javascript-in-jsx-with-curly-braces#using-curly-braces-a-window-into-the-javascript-world) 的方式，将变量或计算结果插入返回的 JSX 中。

**这种方式虽然更冗长，但也最灵活。**

## 从数组中渲染数据

可以将数据存入 **JavaScript 对象或数组**，然后使用 `map()` 或 `filter()` 等方法来渲染出一个组件列表。

由数组生成一系列列表项：

1. **存储数据** 到数组中。
2. **遍历数组** 中的每一项，生成新的 JSX 节点数组。
3. 使用 `<ul>` 包裹节点数组，并 **返回** 结果。

## 对数组项进行过滤

使用 JavaScript 的 `filter()` 方法可以返回满足条件的数组项。`filter()` 会让数组子项通过一个返回值为 `true` 或 `false` 的函数筛选，生成一个新数组。

箭头函数的返回规则：

箭头函数会 **隐式返回** 位于 `=>` 之后的表达式，可省略 `return`。

**如果 `=>` 后跟花括号 `{`，则必须使用 `return` 指定返回值。**

花括号 `{}` 后的部分被称为 [“块函数体”](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Functions/Arrow_functions#function_body)，支持多行代码，若忘记写 `return`，则函数不会返回任何内容。

## 用 `key` 保持列表项的顺序

每个数组项都必须指定一个 **唯一的 `key`**（字符串或数字均可）。

直接放在 `map()` 方法里的 JSX 元素通常都需要 `key`。

**key 的作用：**

- React 通过 key 确定组件对应的数组项，从而在移动、插入、删除等操作时正确更新 DOM。
- **一个合适的 key 能帮助 React 推断变化，提高渲染效率。**

key 的生成建议：**在数据中预先准备 key 值**，不要在运行时临时生成。

若需为每个列表项显示多个 DOM 节点：

- `<> </>`（Fragment 简写）无法接收 key。
- 可使用 `<div>` 包裹，或使用 `<Fragment>` 并显式指定 `key`。

### 如何设定 `key` 值

不同数据来源的 key 方案：

- **来自数据库的数据：** 可直接使用数据库的主键，具有天然唯一性。
- **本地产生的数据：**可使用自增计数器、[`crypto.randomUUID()`](https://developer.mozilla.org/zh-CN/docs/Web/API/Crypto/randomUUID)或 [`uuid`](https://www.npmjs.com/package/uuid) 等方式生成唯一 key。

### key 需要满足的条件

- **兄弟节点之间必须唯一。**不要求全局唯一，不同数组中可重复。
- **key 值不能改变。**动态生成的 key 会导致组件失去标识，破坏渲染逻辑。

### React 中为什么需要 key

**key 的作用类似于文件名**：让 React 能在兄弟节点中唯一标识某个 JSX 元素。

即使元素位置变化，React 仍能通过相同的 key 识别它。

**不要使用数组索引作为 key。**当数组发生插入、删除或排序时，索引变化会导致潜在的渲染 bug。

**不要动态生成 key**（如 `key={Math.random()}`）。每次渲染都会生成新 key，导致组件被完全重建，不仅影响性能，还可能造成 **用户输入丢失**。

组件不会将 `key` 当作 props 传入，如果需要使用 ID，请将其作为单独的 prop 传递。
