---
# 文章标题
title: 1.5 回退
# 文章内容摘要
# description:
# 文章内容关键字
keywords: Vue I18n, Vue I18n fallbackLocale, Vue I18n 回退语言, Vue I18n 多语言设置, Vue I18n 国际化配置, Vue I18n 语言回退机制, Vue I18n 显式回退, Vue I18n 隐式回退, Vue I18n fallback mapping, Vue I18n formatFallbackMessages, Vue 国际化, Vue 语言环境切换
# 发表日期
date: 2025-05-11
summary: 本文介绍了 Vue I18n 中回退语言的相关内容，包括分类、使用地区进行隐式回退、显式回退、使用语言环境数组进行显式回退、使用决策映射进行显式回退以及后备插值等。
# 分类
categories:
  - Vue I18n
# 标签
tags:
  - vue
  - i18n
  - 前端开发
---

`fallbackLocale: '<lang>'` 用于选择当首选语言没有翻译时所使用的语言。

## 使用地区进行隐式回退

当给定一个包含地区和可选方言的 `locale` 时，会自动激活隐式回退。

**例如：**`de-DE-bavarian` 会按以下顺序回退：

- `de-DE-bavarian`
- `de-DE`
- ``de`

要**抑制自动回退**，请在后缀添加感叹号 `!`，例如：`de-DE!`

## 显式回退（使用一个区域设置）

当某些项目未被翻译时，可以设置一个备用语言。

例如：项目 `hello` 仅在英语中可用，但在日语中不可用。此时可以在 `createI18n` 中设置 `fallbackLocale`：

```js
const i18n = createI18n({
  locale: "ja",
  fallbackLocale: "en",
  messages,
});
```

**默认行为：**回退到 `fallbackLocale` 时会生成两个控制台警告：

- 第一个警告提示：`$t` 的键不在 `ja` 语言环境消息中。
- 第二个警告提示：回退到 `en` 语言环境消息时的解析过程。

这些警告仅在**开发模式**（`process.env.NODE_ENV !== 'production'`）中显示，
**生产环境**中不会出现。

## 使用语言环境数组进行显式回退

可以设置多个备用语言环境：

```js
fallbackLocale: [ 'fr', 'en' ],
```

## 使用决策映射进行显式回退

如果需要更复杂的备用逻辑，可使用**决策映射（mapping）**定义相应的回退区域。

```js
fallbackLocale: {
  /* 1 */ 'de-CH':   ['fr', 'it'],
  /* 2 */ 'zh-Hant': ['zh-Hans'],
  /* 3 */ 'es-CL':   ['es-AR'],
  /* 4 */ 'es':      ['en-GB'],
  /* 5 */ 'pt':      ['es-AR'],
  /* 6 */ 'default': ['en', 'da']
},
```

## 后备插值

通过设置 `formatFallbackMessages: true`，当某个键在当前语言中没有翻译时，会对翻译键进行**模板插值**。

翻译键是字符串，可以使用用户可读消息作为键。不必为基础语言重复编写翻译模板。可以在键中包含模板参数。

```js
const messages = {
  ru: {
    "Hello {name}": "Здравствуйте {name}",
  },
};

const i18n = createI18n({
  locale: "ru",
  fallbackLocale: "en",
  formatFallbackMessages: true,
  messages,
});
```
