---
# 文章标题
title: 1.3 日期时间和数字格式化
# 文章内容摘要
# description:
# 文章内容关键字
keywords: Vue I18n, Vue 国际化, Vue 日期时间本地化, Vue 数字本地化, Vue I18n 日期格式化, Vue I18n 数字格式化, Vue I18n datetimeFormats, Vue I18n numberFormats, Vue I18n $d, Vue I18n $n, Vue I18n i18n-d, Vue I18n i18n-n, Vue I18n 作用域插槽, Vue I18n createI18n, Vue I18n ECMA-402, Vue I18n 本地化组件
# 发表日期
date: 2025-05-11
summary: 本文介绍了 Vue I18n 中日期时间和数字格式化的基本用法和自定义格式。
# 分类
categories:
  - Vue I18n
# 标签
tags:
  - vue
  - i18n
  - 前端开发
---

## 日期时间

### 基本用法

可以使用自定义的格式定义来本地化日期时间。

```js
const datetimeFormats = {
  "en-US": {
    short: {
      year: "numeric",
      month: "short",
      day: "numeric",
    },
    long: {
      year: "numeric",
      month: "short",
      day: "numeric",
      weekday: "short",
      hour: "numeric",
      minute: "numeric",
    },
  },
  "ja-JP": {
    short: {
      year: "numeric",
      month: "short",
      day: "numeric",
    },
    long: {
      year: "numeric",
      month: "short",
      day: "numeric",
      weekday: "short",
      hour: "numeric",
      minute: "numeric",
      hour12: true,
    },
  },
};
```

可以定义命名的日期时间格式（例如 **short**、**long** 等）。

使用 **ECMA-402 Intl.DateTimeFormat** 的选项定义格式。

在使用本地化消息时，需要指定 **datetimeFormats** 的 **createI18n** 选项：

```js
const i18n = createI18n({
  datetimeFormats,
});
```

在 Vue I18n 中使用 `$d` 来本地化日期时间值。

**注意**：在 VueI18n v9 中，选项名称是 **datetimeFormats**，而不是 **dateTimeFormats**。

支持的本地化方法

- `$d`（用于传统 API 模式和组合式 API 模式）
- 内置组件 **DatetimeFormat（i18n-d）**
- 从 `useI18n` 导出的 `d`（用于组合式 API 模式）

```vue
<p>{{ $d(new Date(), 'short') }}</p>
<p>{{ $d(new Date(), 'long', 'ja-JP') }}</p>
```

参数说明：

1. **第一个参数**：日期时间值（如 `Date`、时间戳）
2. **第二个参数**：日期时间格式名称
3. **第三个参数**：`locale` 值

### 自定义格式

$d 返回完整格式化的日期时间字符串，仅能整体使用。

当需要对格式化结果的部分内容设置样式时，可以使用 DatetimeFormat 组件（i18n-d）。

```vue
<i18n-d tag="p" :value="new Date()"></i18n-d>
<i18n-d tag="p" :value="new Date()" format="long"></i18n-d>
<i18n-d
  tag="p"
  :value="new Date()"
  format="long"
  locale="ja-JP-u-ca-japanese"
></i18n-d>
```

DatetimeFormat 组件属性

- **tag**：设置渲染的标签类型。
- **value**：要格式化的日期时间值。
- **format**：设置由 `createI18n` 的 `datetimeFormats` 定义的格式。
- **locale**：指定地区进行本地化，覆盖 `createI18n` 中的 `locale`。

可通过作用域插槽自定义部分内容的渲染，例如将日期中的 **时代部分（era）** 加粗或高亮显示。

```vue
<i18n-d
  tag="span"
  :value="new Date()"
  locale="ja-JP-u-ca-japanese"
  :format="{ key: 'long', era: 'narrow' }"
>
  <template #era="props">
    <span style="color: green">{{ props.era }}</span>
  </template>
  <template #literal="props">
    <span style="color: green">{{ props.literal }}</span>
  </template>
</i18n-d>
```

## 数字

### 基本用法

可以使用定义格式来本地化数字。

```js
const numberFormats = {
  "en-US": {
    currency: {
      style: "currency",
      currency: "USD",
      notation: "standard",
    },
    decimal: {
      style: "decimal",
      minimumFractionDigits: 2,
      maximumFractionDigits: 2,
    },
    percent: {
      style: "percent",
      useGrouping: false,
    },
  },
  "ja-JP": {
    currency: {
      style: "currency",
      currency: "JPY",
      useGrouping: true,
      currencyDisplay: "symbol",
    },
    decimal: {
      style: "decimal",
      minimumSignificantDigits: 3,
      maximumSignificantDigits: 5,
    },
    percent: {
      style: "percent",
      useGrouping: false,
    },
  },
};
```

可以定义命名的数字格式（例如 **currency** 等）。

使用 **ECMA-402 Intl.NumberFormat** 的选项。

在使用区域设置消息时，需要在 `createI18n` 中指定 **numberFormats** 选项：

```js
const i18n = createI18n({
  numberFormats,
});
```

使用 Vue I18n 本地化数值，使用 `$n`。

```js
<p>{{ $n(10000, 'currency') }}</p>
<p>{{ $n(10000, 'currency', 'ja-JP') }}</p>
<p>{{ $n(10000, 'currency', 'ja-JP', { useGrouping: false }) }}</p>
<p>{{ $n(987654321, 'currency', { notation: 'compact' }) }}</p>
<p>{{ $n(0.99123, 'percent') }}</p>
<p>{{ $n(0.99123, 'percent', { minimumFractionDigits: 2 }) }}</p>
<p>{{ $n(12.11612345, 'decimal') }}</p>
<p>{{ $n(12145281111, 'decimal', 'ja-JP') }}</p>
```

参数说明

1. **第一个参数**：数值。
2. **第二个参数**：数字格式名称。
3. **第三个参数**：locale 值。
4. **可选参数**：用于调整格式选项（如 `useGrouping`、`notation` 等）。

### 自定义格式

`$n` 返回**完整格式化的数值字符串**，只能整体使用。

当需要对格式化数值的**部分内容进行样式设置**时，可使用 **NumberFormat 组件（i18n-n）**。

```vue
<i18n-n tag="span" :value="100"></i18n-n>
<i18n-n tag="span" :value="100" format="currency"></i18n-n>
<i18n-n tag="span" :value="100" format="currency" locale="ja-JP"></i18n-n>
```

组件属性

- **tag**：设置标签类型。
- **value**：要格式化的数值。
- **format**：设置由 `createI18n` 的 `numberFormats` 定义的格式。
- **locale**：设置地区，覆盖 `createI18n` 中的 locale。

可通过作用域插槽自定义数字的不同部分（如货币符号、小数、整数等）。

```vue
<i18n-n tag="span" :value="1234" :format="{ key: 'currency', currency: 'EUR' }">
  <template #currency="slotProps">
    <span style="color: green">{{ slotProps.currency }}</span>
  </template>
  <template #integer="slotProps">
    <span style="font-weight: bold">{{ slotProps.integer }}</span>
  </template>
  <template #group="slotProps">
    <span style="font-weight: bold">{{ slotProps.group }}</span>
  </template>
  <template #fraction="slotProps">
    <span style="font-size: small">{{ slotProps.fraction }}</span>
  </template>
</i18n-n>
```

该组件支持通过不同的插槽名称（如 **currency**、**integer**、**group**、**fraction**）分别渲染格式化数值的各部分。
