---
# 文章标题
title: 1.2 消息格式语法
# 文章内容摘要
# description:
# 文章内容关键字
keywords: Vue I18n, Vue 国际化, Vue I18n 插值, Vue I18n 命名插值, Vue I18n 列表插值, Vue I18n 字面量插值, Vue 关联消息, Vue I18n 修饰符, Vue I18n 自定义修饰符, Vue I18n HTML 消息, Vue I18n 转义参数, Vue I18n 复数形式, Vue I18n pluralizationRules, Vue 国际化复数规则, Vue 多语言本地化
# 发表日期
date: 2025-05-10
summary: 本文介绍了 Vue I18n 的消息格式语法，包括插值类型、关联消息、HTML 消息、转义参数选项和复数形式。
# 分类
categories:
  - Vue I18n
# 标签
tags:
  - vue
  - i18n
  - 前端开发
---

Vue I18n 通过支持插值和各种特性语法来实现消息的本地化。

## 插值类型

### 命名插值

使用占位符 `{}` 来插入 JavaScript 中定义的变量。

```js
const messages = {
  en: {
    message: {
      hello: "{msg} world",
    },
  },
};
```

```vue
<p>{{ $t('message.hello', { msg: 'hello' }) }}</p>
```

命名插值的变量名必须以字母（a-z，A-Z）或下划线（_）开头，后续可跟字母、数字、下划线（_）、连字符（-）或美元符号（$）。

### 列表插值

使用 JavaScript 中定义的数组进行插值。

```js
const messages = {
  en: {
    message: {
      hello: "{0} world",
    },
  },
};
```

```vue
<p>{{ $t('message.hello', ['hello']) }}</p>
```

### 字面量插值

在占位符中使用字面字符串进行插值，特别适用于特殊字符（如 { 和 }）。

```js
const messages = {
  en: {
    address: "{account}{'@'}{domain}",
  },
};
```

```vue
<p>email: {{ $t('address', { account: 'foo', domain: 'domain.com' }) }}</p>
```

## 关联消息

将某个地区的消息键与另一个消息键进行链接，适用于内容相同的消息。

```js
const messages = {
  en: {
    message: {
      the_world: "the world",
      dio: "DIO:",
      linked: "@:message.dio @:message.the_world !!!!",
    },
  },
};
```

### 内置修饰符

控制链接消息的大小写格式。

可用的修饰符有：

- upper：将链接消息中的所有字符转换为大写。
- lower：将链接消息中的所有字符转换为小写。
- capitalize：将链接消息的首字母大写。

```js
const messages = {
  en: {
    message: {
      homeAddress: "Home address",
      missingHomeAddress: "Please provide @.lower:message.homeAddress",
    },
  },
};
```

### 自定义修饰符

可以自定义修饰符进行格式化。

需要在 modifiers 选项中注册自定义修饰符。

```js
const i18n = createI18n({
  locale: "en",
  // set custom modifiers at `modifiers` option
  modifiers: {
    snakeCase: (str) => str.split(" ").join("_"),
  },
});
```

```js
const messages = {
  en: {
    message: {
      snake: "snake case",
      custom_modifier:
        "custom modifiers example: @.snakeCase:{'message.snake'}",
    },
  },
};
```

## HTML 消息

Vue I18n 支持包含 HTML 标签的消息进行本地化。

```js
const messages = {
  en: {
    message: {
      hello: "hello <br> world",
    },
  },
};
```

### 使用转义参数选项

为了避免 XSS 风险，Vue I18n 提供了转义参数选项。启用此选项后，插值参数中的 HTML 特殊字符会被转义，翻译的 HTML 会经过清理。

旧版 API：使用 escapeParameterHtml 选项

组合式 API：使用 escapeParameter 选项。

启用此选项后，特殊字符如 <、>、", ', &, /, = 等会被转义。

## 复数形式

### 基本用法

**定义复数消息**：使用管道符（`|`）分隔复数形式的不同翻译。

```js
const messages = {
  en: {
    car: "car | cars",
    apple: "no apples | one apple | {count} apples",
  },
};
```

```vue
<p>{{ $t('car', 1) }}</p>
<p>{{ $t('car', 2) }}</p>

<p>{{ $t('apple', 0) }}</p>
<p>{{ $t('apple', 1) }}</p>
```

复数消息的选择：翻译 API 根据数值（第二个参数）选择正确的复数形式。不同语言可能有不同的复数规则。

支持复数化的方式：

- 全局 $t
- 内置的 Translation 组件（i18n-t）
- useI18n 导出的 t（适用于 Composition API）

**复数消息的传参**：

- 第一个参数是区域设置消息键
- 第二个参数是数值，`$t` 根据数值选择适当的复数形式。

### 预定义的隐式参数

定义：复数形式不需要显式给出数量，数字可以通过预定义的命名参数 {count} 或 {n} 进行访问。

**使用方法**：可以通过对象形式传递数值或命名参数来实现隐式复数插值。如有需要，可以覆盖 `{count}` 或 `{n}`。

```vue
<p>{{ $t('apple', 0) }}</p>
<!-- 默认使用 count -->
<p>{{ $t('apple', 1) }}</p>
<p>{{ $t('apple', 10, { count: 10 }) }}</p>
<!-- 使用 count 显式插值 -->
<p>{{ $t('apple', 100, { named: { n: 'too many' } }) }}</p>
<!-- 使用 n 显式插值 -->
```

### 自定义复数形式

自定义复数形式并不适用于所有语言。

可以通过 `pluralizationRules` 选项传递自定义的复数化规则。

可以为特定语言指定自定义复数规则，以适应语言的特定复数化逻辑。

```js
function customRule(choice, choicesLength, orgRule) {
  if (choice === 0) {
    return 0;
  }

  const teen = choice > 10 && choice < 20;
  const endsWithOne = choice % 10 === 1;
  if (!teen && endsWithOne) {
    return 1;
  }
  if (!teen && choice % 10 >= 2 && choice % 10 <= 4) {
    return 2;
  }

  return choicesLength < 4 ? 2 : 3;
}

const i18n = createI18n({
  locale: "ru",
  pluralizationRules: {
    ru: customRule,
  },
  messages: {
    ru: {
      car: "0 машин | {n} машина | {n} машины | {n} машин",
      banana: "нет бананов | {n} банан | {n} банана | {n} бананов",
    },
  },
});
```
