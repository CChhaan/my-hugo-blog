---
# 文章标题
title: 第六章 案例研究：图片库改进版
# 文章内容摘要
# description: 本文详细介绍了 Git 这一分布式版本控制系统的优点，对比了 Windows 与 macOS/Linux 系统下的常用命令，讲解了 vim 操作模式及常用命令，还阐述了 Git 的基本配置、特定项目配置和命令缩写设置等内容。
# 文章内容关键字
keywords: JavaScript 代码规范，结构解耦，NodeList, addLoadEvent, nodeName, 键盘事件，交互一致性
# 发表日期
date: 2025-08-17
summary: 本章详细介绍了 JavaScript 代码规范、结构解耦、NodeList、addLoadEvent、nodeName、键盘事件和交互一致性等概念。
# 分类
categories:
  - JS DOM编程艺术
# 标签
tags:
  - JavaScript
  - DOM
  - 前端开发
---

## JS 与网页结构的解耦原则

- **核心思想**：为网页添加行为时，JS 代码应尽量避免依赖特定的 HTML 结构（如固定的标签嵌套、类名顺序等）。
- **好处**：当 HTML 结构调整时，JS 代码无需频繁修改，提高可维护性。

## 命名规范与注意事项

### 命名原则

- **可读性**：使用有意义的单词命名变量、函数（如 `calculateTotal` 而非 `fn1`），通过命名体现用途。
- **风格统一**：变量和函数名推荐使用驼峰命名法（如 `userName`、`handleClick`），常量常用全大写（如 `MAX_SIZE`）。

### 命名禁忌

- **避免保留字**：不能使用 JS 语言的保留字（如 `if`、`function`、`class` 等）作为变量名。
- **避免覆盖内置 API**：不使用现有 JS 函数 / 方法名（如 `alert`、`push`）作为变量名，防止覆盖内置功能。

## 节点链表（NodeList）

- **定义**：由 DOM 方法（如 `getElementsByTagName`、`querySelectorAll`）返回的节点集合，类似数组但并非真正的数组（是类数组对象）。
- 特性：
  - 每个节点都有自身的属性（如 `nodeType`、`nodeName`）和方法（如 `appendChild`）。
  - 动态性：部分 NodeList（如 `getElementsByTagName` 返回的集合）会随 DOM 变化自动更新。

## 共享 `onload` 事件：`addLoadEvent` 函数

- **问题**：`window.onload` 只能绑定一个函数，多次赋值会覆盖之前的函数。
- **解决方案**：`addLoadEvent` 函数用于将多个函数追加到 `window.onload` 事件中，确保所有函数在页面加载完成后执行。

### 实现逻辑：

```js
function addLoadEvent(func) {
  const oldOnload = window.onload; // 保存现有 onload 函数
  if (typeof window.onload !== "function") {
    // 若 onload 未绑定函数，直接赋值
    window.onload = func;
  } else {
    // 若已绑定函数，追加新函数
    window.onload = function () {
      oldOnload(); // 执行原有函数
      func(); // 执行新函数
    };
  }
}
```

## `nodeName` 属性

- **特性**：返回元素节点的标签名，**始终为大写字母**（即使 HTML 中标签是小写，如 `<div>` 的 `nodeName` 为 `"DIV"`）。
- **用途**：判断元素类型（如 `if (element.nodeName === "LI")` 检测是否为列表项）。

## 键盘事件与交互一致性

### `onkeypress` 事件

- 触发时机：按下键盘上的任意按键（包括字母、数字、符号等）时触发。
- 用途：监听键盘输入（如表单验证、快捷键操作）。

### 键盘与鼠标事件的一致性

- 用 `Tab` 键聚焦到链接后按 `Enter` 键，会触发该链接的 `onclick` 事件，与鼠标点击效果一致。
- 意义：确保键盘用户与鼠标用户获得相同的交互体验，提升可访问性。
