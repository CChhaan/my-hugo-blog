---
# 文章标题
title: 3.3节 原生函数
# 文章内容摘要
# description: 本文详细介绍了 Git 这一分布式版本控制系统的优点，对比了 Windows 与 macOS/Linux 系统下的常用命令，讲解了 vim 操作模式及常用命令，还阐述了 Git 的基本配置、特定项目配置和命令缩写设置等内容。
# 文章内容关键字
keywords: JavaScript, 原生函数，[[Class]] 属性，封装对象，自动包装机制，原生原型，Symbol, Error 对象
# 发表日期
date: 2025-06-20
summary: 本节详细介绍了 JavaScript 中原生函数的概念、分类、封装对象、原型以及 Symbol 和 Error 对象的使用方法。
# 分类
categories:
  - 你不知道的JS
# 标签
tags:
  - JavaScript 原生 API
  - 封装对象
  - 原生构造函数
  - 原型
  - 前端开发
---

## 内部属性 [[Class]]

1. **基本概念**：
   内建函数（原生函数）可作为构造函数，用于创建封装基本类型值的封装对象。
2. 属性特征：
   - 所有`typeof`返回值为`object`的对象都包含内部属性`[[Class]]`，该属性无法直接访问。
   - 通常通过`Object.prototype.toString()`方法查看`[[Class]]`的值。
3. 对应关系：
   - 多数情况下，对象的`[[Class]]`属性值与创建该对象的内建原生构造函数相对应。
   - 特殊情况：虽然不存在`Null()`和`undefined()`原生构造函数，但`null`和`undefined`的`[[Class]]`属性值分别为`'Null'`和`'Undefined'`。

## 封装对象包装

1. **自动包装机制**：
   基本类型值（如`string`、`number`等）本身没有属性和方法，JS 会自动为其包装一个封装对象，以便访问属性和方法，操作完成后立即销毁，避免性能损耗。
2. 手动封装与拆封：
   - 手动封装：使用`Object()`函数（不带`new`关键字）可将基本类型值封装为对象。
   - 拆封：通过`valueOf()`方法可获取封装对象中的基本类型值；在需要基本类型值的场景中，会发生隐式拆封。
3. **使用建议**：除非必要，应避免使用构造函数创建封装对象。

---

## 原生函数作为构造函数

1. **Array()**：
   - 不带`new`关键字时会被自动补全（等效于`new Array()`）。
   - 仅带一个数字参数时，该参数表示数组预设长度（创建稀疏数组），而非数组元素。
   - **替代方案**：ES6 的`Array.of()`（无歧义，始终将参数作为元素）
   - 稀疏数组：包含至少一个空单元的数组，可通过以下方式创建：
     - 设置`length`属性值超过实际单元数；
     - 使用`delete`删除数组单元。
   - 可通过`Array.apply(null, {length: 3})`创建包含`undefined`单元（非空单元）的数组。
2. **不建议使用的构造函数**：
   除非特殊需求，尽量避免使用`Object()`、`Function()`、`RegExp()`作为构造函数。

3. **Date()**：

- 必须使用`new Date()`创建日期对象：带参数时指定日期时间，不带参数时使用当前日期时间。
- 时间戳获取：`getTime()`方法或`Date.now()`（ES5+）可获取 Unix 时间戳。
- 特殊情况：不带`new`关键字调用`Date()`时，返回当前日期的字符串值（格式无统一规范）。

4. **Error()**：

- 带或不带`new`关键字均可使用。
- 作用：创建错误对象以获取当前运行栈上下文（含函数调用栈、错误行号等，便于调试），通常与`throw`配合使用。
- 特性：错误对象至少包含`message`属性；除`Error`外，还有针对特定错误类型的原生构造函数（如`TypeError`、`RangeError`），这些构造函数在程序异常时自动调用。

5. **Symbol（符号）**：

- 特性：特殊的基本类型值，具有唯一性，用作对象属性名时不易重名。
- 访问性：可作为属性名，但在代码或控制台中难以直接查看和访问其值。
- 预定义符号：ES6 中以`Symbol`静态属性形式存在（如`Symbol.iterator`）。
- 使用规则：`Symbol()`不能带`new`关键字（否则报错）；符号是基本类型，非对象，不可枚举（不被`for...in`遍历），主要用于私有或特殊属性。

---

## 原生原型

1. **原型特征**：
   原生构造函数（如`Array`、`Function`、`RegExp`等）都有自己的`prototype`对象，这些对象包含对应子类型的特有行为特征。
2. 实用场景：
   - `Function.prototype`是空函数，`RegExp.prototype`是空正则表达式，`Array.prototype`是空数组，适合作为未赋值变量的默认值。
   - 优势：`prototype`对象已预先创建且仅创建一次，性能更优。
   - 注意：若默认值后续会被修改，则不建议使用原生原型作为默认值。
