---
# 文章标题
title: 2.8 事件处理
# 文章内容摘要
# description:
# 文章内容关键字
keywords: Vue 事件处理，v-on 指令，事件修饰符，按键修饰符，系统组合键监听
summary: 本节详细介绍了 Vue 3 中事件处理的相关内容，包括 v-on 指令的使用、事件修饰符的简化操作以及按键修饰符和系统组合键的监听。
# 发表日期
date: 2025-04-08
# 分类
categories:
  - vue3文档阅读
# 标签
tags:
  - vue3
  - 前端框架
  - 前端开发
---

## v-on 基础：绑定 DOM 事件

`v-on` 指令用于监听 DOM 事件（如点击、输入、键盘等），并在事件触发时执行逻辑，**简写为 `@`**（推荐使用简写）。其核心是通过“事件类型”和“事件处理器”关联操作。

### 事件处理器的两种形式

#### 内联事件处理器（简单场景）

- **作用**：直接在指令中写简短的 JavaScript 语句（类似原生 `onclick`），适合逻辑简单的场景
- **语法**：`@事件类型="内联语句"`
- **示例**：
  ```xml
  <!-- 点击按钮，修改 count 值（内联语句） -->
  <button @click="count++">点击加 1</button>
  <p>当前计数：{{ count }}</p>
  ```
  ```js
  const count = ref(0); // 响应式状态
  ```
- **限制**：仅支持单一语句，复杂逻辑需用“方法事件处理器”。

#### 方法事件处理器（复杂场景）

- **作用**：将事件逻辑封装为组件方法，通过方法名绑定，适合逻辑复杂或需复用的场景
- **语法**：`@事件类型="方法名"`（无需加 `()`，Vue 自动传递原生事件对象）
- **示例**：
  ```xml
  <!-- 点击按钮，调用 handleClick 方法 -->
  <button @click="handleClick">点击触发方法</button>
  ```
  ```js
  const handleClick = () => {
    console.log("按钮被点击");
    // 复杂逻辑：如请求接口、修改多个状态等
  };
  ```
- **原生事件对象**：方法默认接收原生 DOM 事件对象（`event`），可用于获取事件信息（如 `event.target`）：
  ```js
  const handleClick = (event) => {
    console.log("点击的元素：", event.target);
    event.preventDefault(); // 阻止默认行为
  };
  ```

### 向方法传递自定义参数

- **场景**：需向事件方法传递额外参数（如列表项 ID、索引等），同时可能需要原生事件对象
- **语法**：
  - 仅传自定义参数：`@事件类型="方法名(参数1, 参数2)"`
  - 同时传自定义参数和原生事件：`@事件类型="方法名(参数, $event)"`（`$event` 是 Vue 内置变量，代表原生事件对象）
- **示例**：
  ```xml
  <!-- 列表项点击，传递 item.id 和原生事件 -->
  <div v-for="item in items" :key="item.id">
    <button @click="handleItemClick(item.id, $event)">
      操作 {{ item.name }}
    </button>
  </div>
  ```
  ```js
  const handleItemClick = (itemId, event) => {
    console.log("操作的项 ID：", itemId);
    console.log("点击的元素：", event.target);
  };
  ```

## 事件修饰符：简化事件操作

Vue 为 `v-on` 提供**事件修饰符**（以 `.` 开头的后缀），用于简化常见的事件操作（如阻止默认行为、停止冒泡等），避免在方法中写重复的 DOM 操作逻辑。

### 常用事件修饰符

| 修饰符     | 作用                                                                       | 示例                                |
| ---------- | -------------------------------------------------------------------------- | ----------------------------------- |
| `.stop`    | 阻止事件冒泡（阻止事件向上传播到父元素）                                   | `@click.stop="handleClick"`         |
| `.prevent` | 阻止事件默认行为（如表单提交刷新页面、链接跳转）                           | `@submit.prevent="handleSubmit"`    |
| `.self`    | 仅当事件目标是当前元素本身时，才触发处理器（排除子元素触发的事件）         | `@click.self="handleClick"`         |
| `.capture` | 以“事件捕获模式”监听事件（从父元素到子元素，而非默认的冒泡模式）           | `@click.capture="handleClick"`      |
| `.once`    | 事件仅触发一次（触发后自动解绑监听器）                                     | `@click.once="handleClick"`         |
| `.passive` | 告知浏览器事件监听器不会阻止默认行为，优化移动端滚动性能（如 `touchmove`） | `@touchmove.passive="handleScroll"` |

### 修饰符的使用规则

- **链式组合**：多个修饰符可链式使用，执行顺序与书写顺序一致
  ```xml
  <!-- 先阻止冒泡，再阻止默认行为 -->
  <a @click.stop.prevent="handleLinkClick" href="https://vuejs.org">Vue 官网</a>
  ```
- **单独使用**：仅需修饰符功能时，可省略处理器（如仅阻止表单提交默认行为）
  ```xml
  <!-- 阻止表单提交刷新页面，无需执行额外逻辑 -->
  <form @submit.prevent></form>
  ```
- **注意事项**：
  - 请勿同时使用 `.passive` 和 `.prevent`：`.passive` 已告知浏览器“不阻止默认行为”，`.prevent` 会被忽略且触发警告；
  - `.self` 不阻止冒泡：仅过滤事件目标，若事件是子元素触发，即使 `.self` 修饰父元素，事件仍会冒泡到父元素（但父元素处理器不执行）。

## 按键修饰符：监听键盘事件

在监听键盘事件（如 `keyup`、`keydown`）时，可通过**按键修饰符**指定仅在特定按键触发时执行逻辑，无需在方法中判断 `event.key`。

### 直接使用按键名（kebab-case 形式）

以 `KeyboardEvent.key` 对应的按键名为修饰符，需转为 kebab-case（小写+连字符），如 `PageUp` → `page-up`、`Escape` → `escape`。

```xml
<!-- 仅当按下 "Enter" 键时，触发处理方法 -->
<input @keyup.enter="handleEnter" placeholder="按 Enter 提交" />

<!-- 仅当按下 "PageDown" 键时，触发处理方法 -->
<div @keydown.page-down="handlePageDown">按 PageDown 翻页</div>
```

### Vue 内置的按键别名（常用）

Vue 为高频使用的按键提供简化别名，无需记忆 kebab-case 形式：
| 别名 | 对应按键 | 示例 |
|--------------|-----------------------------------|-----------------------|
| `.enter` | Enter（回车键） | `@keyup.enter="..."` |
| `.tab` | Tab（制表键） | `@keydown.tab="..."` |
| `.delete` | Delete + Backspace（删除/退格键） | `@keyup.delete="..."` |
| `.esc` | Escape（退出键） | `@keyup.esc="..."` |
| `.space` | Space（空格键） | `@keydown.space="..."`|
| `.up` | 上箭头键 | `@keyup.up="..."` |
| `.down` | 下箭头键 | `@keyup.down="..."` |
| `.left` | 左箭头键 | `@keyup.left="..."` |
| `.right` | 右箭头键 | `@keyup.right="..."` |

## 系统按键修饰符：组合键监听

通过**系统按键修饰符**，可监听“系统键+其他键”的组合事件（如 `Ctrl+C`、`Alt+S`），仅当系统键按下时才触发。

### 常用系统按键修饰符

| 修饰符   | 对应系统键（Windows/macOS）          | 示例                   |
| -------- | ------------------------------------ | ---------------------- |
| `.ctrl`  | Ctrl（Windows）/ Command（macOS）    | `@keyup.ctrl.c="..."`  |
| `.alt`   | Alt（Windows）/ Option（macOS）      | `@keyup.alt.s="..."`   |
| `.shift` | Shift（通用）                        | `@keyup.shift.a="..."` |
| `.meta`  | Windows（Windows）/ Command（macOS） | `@keyup.meta.z="..."`  |

### 关键规则与 `.exact` 修饰符

- **`keyup` 事件的特殊性**：系统按键修饰符与 `keyup` 结合时，需“先按住系统键，再松开其他键”才触发（单独松开系统键不触发）。例如 `@keyup.ctrl` 仅在“按住 Ctrl 并松开其他键”时触发。
- **`.exact` 修饰符**：精确控制触发事件所需的系统键组合，避免“多按无关系统键”时触发。例如：

  ```xml
  <!-- 仅当“仅按 Ctrl+Click”时触发，多按 Alt/Ctrl+Shift 等不触发 -->
  <button @click.ctrl.exact="handleCtrlClick">仅 Ctrl+点击</button>

  <!-- 仅当“不按任何系统键，纯点击”时触发 -->
  <button @click.exact="handlePureClick">纯点击（无系统键）</button>
  ```

## 鼠标按键修饰符：指定鼠标按键触发

通过鼠标按键修饰符，可限定仅在点击特定鼠标按键时触发事件（如左键、右键、中键）。

| 修饰符    | 对应鼠标按键（逻辑含义，非物理位置）     | 示例                      |
| --------- | ---------------------------------------- | ------------------------- |
| `.left`   | 主按键（通常是左键，左手鼠标可能为右键） | `@mousedown.left="..."`   |
| `.right`  | 次按键（通常是右键）                     | `@mousedown.right="..."`  |
| `.middle` | 中键（滚轮点击）                         | `@mousedown.middle="..."` |

### 注意事项

修饰符的“左/右”是**逻辑按键**（主/次/辅助），而非物理位置：

- 左手鼠标布局中，物理右键可能是“主按键”，触发 `.left` 修饰符；
- 触控板可能通过“单指点击”触发 `.left`，“双指点击”触发 `.right`。

## 核心总结

| 类别           | 核心作用                     | 常用场景                          | 关键语法示例                             |
| -------------- | ---------------------------- | --------------------------------- | ---------------------------------------- |
| 基础事件绑定   | 监听 DOM 事件，执行逻辑      | 点击、输入、提交等                | `@click="方法名"`、`@input="内联语句"`   |
| 事件修饰符     | 简化冒泡/默认行为等 DOM 操作 | 阻止表单刷新、阻止事件传播        | `@click.stop.prevent`、`@submit.prevent` |
| 按键修饰符     | 限定键盘事件的触发按键       | 输入框按 Enter 提交、按方向键控制 | `@keyup.enter`、`@keydown.left`          |
| 系统按键修饰符 | 监听系统键组合事件           | Ctrl+C 复制、Ctrl+Z 撤销          | `@keyup.ctrl.c`、`@click.ctrl.exact`     |
| 鼠标按键修饰符 | 限定鼠标按键触发事件         | 右键菜单、中键刷新                | `@mousedown.right`、`@click.middle`      |

- 优先使用简写 `@` 替代 `v-on`，提升代码简洁性；
- 复杂逻辑用“方法事件处理器”，避免内联语句臃肿；
- 合理使用修饰符，减少方法中的 DOM 操作代码（如用 `.prevent` 替代 `event.preventDefault()`）。
