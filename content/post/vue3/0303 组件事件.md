---
# 文章标题
title: 3.3 组件事件
# 文章内容摘要
# description:
# 文章内容关键字
keywords: Vue 自定义事件, Vue defineEmits, Vue 事件触发, Vue 事件监听, Vue $emit, Vue 事件参数, Vue emits 选项, Vue 事件校验, Vue 组件通信, Vue v-on, Vue 事件 once 修饰符, Vue TypeScript 事件定义
# 发表日期
date: 2025-04-12
summary: 本文主要介绍了 Vue3 中组件事件的使用方法，包括触发与监听事件、事件参数、声明触发的事件和事件校验等。
# 分类
categories:
  - Vue3文档阅读
# 标签
tags:
  - vue
  - vue3
  - 前端框架
  - 前端开发
  - 组件化开发
---

## 触发与监听事件

在组件模板表达式中，可以直接使用 **`$emit` 方法**触发自定义事件。

父组件通过 **`v-on`**（缩写为 **`@`**）监听事件。

事件监听器支持 **`.once` 修饰符**。

事件名提供了 **自动格式转换**。

- 触发时可用 **camelCase**。
- 父组件监听时可用 **kebab-case**。

推荐：在模板中使用 **kebab-case** 形式。

与原生 DOM 事件不同，**组件触发的事件没有冒泡机制**。只能监听直接子组件触发的事件。

平级或跨层组件通信：应使用 **事件总线**或**全局状态管理方案**。

## 事件参数

触发事件时可以附带参数：

- 在 `$emit` 中传入额外参数。

父组件监听：

- 可用内联箭头函数接收参数。
- 可用组件方法作为事件处理函数接收参数。

**结论**：所有传入 `$emit()` 的参数都会直接传给监听器。

## 声明触发的事件

组件可显式通过 **`defineEmits()`** 声明要触发的事件。

在 `<template>` 使用的 `$emit`，不能在 `<script setup>` 中使用；

`defineEmits()` 会返回一个同作用的函数供使用。

**限制**：只能在 `<script setup>` **顶级作用域**中使用，不能放在子函数内。

使用 `setup()` 时：

- 需通过 **`emits` 选项**定义事件。
- `emit` 函数在 `setup()` 上下文对象中被暴露，可安全解构。

`emits` 选项和 `defineEmits()` 支持 **对象语法**。可通过 TypeScript 为参数指定类型，进行参数验证。

在 `<script setup>` 搭配 TypeScript 时，可使用 **纯类型标注**声明事件。

虽然声明事件是可选的，但**推荐完整声明所有触发的事件**：

- 作为组件文档记录。
- 帮助 Vue 区分事件和透传 attribute。
- 避免第三方代码触发的自定义 DOM 事件导致边界问题。

若原生事件名（如 `click`）被定义在 `emits` 选项中，监听器只会监听组件触发的事件，**不会再响应原生事件**。

## 事件校验

与 **props 类型校验**类似，事件也可使用对象语法进行描述。

校验方式：

- 将事件赋值为一个函数。
- 函数接收 `emit` 传入的参数。
- 返回布尔值：表示事件是否合法。

```vue
<script setup>
const emit = defineEmits({
  // 没有校验
  click: null,

  // 校验 submit 事件
  submit: ({ email, password }) => {
    if (email && password) {
      return true;
    } else {
      console.warn("Invalid submit event payload!");
      return false;
    }
  },
});

function submitForm(email, password) {
  emit("submit", { email, password });
}
</script>
```
