---
# 文章标题
title: 2.9 表单输入绑定
# 文章内容摘要
# description:
# 文章内容关键字
keywords: Vue 表单绑定，v-model 用法，v-model 原理，v-model 修饰符 (lazy/number/trim), 动态值绑定
summary: 本节详细介绍了 Vue 3 中表单输入绑定的核心概念、用法和原理，包括 v-model 的自动映射规则、表单元素类型适配、初始值处理、IME 输入适配、textarea 禁用插值等关键点，以及文本类输入、复选框、单选框、下拉选择等常见表单元素的 v-model 用法。
# 发表日期
date: 2025-04-08
# 分类
categories:
  - vue3文档阅读
# 标签
tags:
  - vue3
  - 前端框架
  - 前端开发
---

## v-model 核心作用与原理

### 核心作用

- **简化表单同步**：自动关联表单输入值与 JavaScript 响应式状态，无需手动绑定 `value` 和监听 `input`/`change` 事件
- **跨元素适配**：根据表单元素类型（如 `<input>`/`<textarea>`/`<select>`）自动选择对应的 DOM 属性和事件组合，统一语法

### 底层原理（自动映射规则）

| 表单元素类型                     | 绑定的 DOM 属性 | 监听的事件          |
| -------------------------------- | --------------- | ------------------- |
| 文本类 `<input>`/`<textarea>`    | `value`         | `input`（实时同步） |
| 复选框 `<input type="checkbox">` | `checked`       | `change`            |
| 单选框 `<input type="radio">`    | `checked`       | `change`            |
| 下拉选择 `<select>`              | `value`         | `change`            |

### 关键注意点

- **忽略初始属性**：`v-model` 忽略表单元素上初始的 `value`/`checked`/`selected` 属性，初始值需在 JavaScript 中通过响应式 API（如 `ref`）声明
- **IME 输入适配**：在输入中文、日文等需 IME 拼字的语言时，`v-model` 仅在拼字完成（输入确认）后更新；若需实时更新，需手动绑定 `value` 和 `input` 事件
- **`<textarea>` 禁用插值**：`<textarea>` 不支持 `{{ 表达式 }}` 插值，必须用 `v-model` 绑定值

## v-model 常见表单元素用法

### 文本类输入（文本/密码/多行文本）

#### 单行文本 `<input type="text">`

```js
const username = ref(""); // 初始值为空
```

```xml
<input type="text" v-model="username" placeholder="请输入用户名">
<p>用户名：{{ username }}</p>
```

#### 密码框 `<input type="password">`

```js
const password = ref("");
```

```xml
<input type="password" v-model="password" placeholder="请输入密码">
```

#### 多行文本 `<textarea>`

```js
const content = ref("初始内容");
```

```xml
<!-- 无需写闭合标签内的内容，v-model 控制值 -->
<textarea v-model="content" rows="3" placeholder="请输入内容"></textarea>
```

### 复选框（单个/多个）

#### 单个复选框（绑定布尔值）

- 用于“是否选择”场景，`v-model` 绑定布尔类型响应式状态

```js
const agree = ref(false); // 初始未勾选
```

```xml
<input type="checkbox" id="agree" v-model="agree">
<label for="agree">同意协议</label>
<p>是否同意：{{ agree ? '是' : '否' }}</p>
```

#### 多个复选框（绑定数组/集合）

- 用于“多选”场景，多个复选框绑定同一个数组/`Set`，选中项的 `value` 会自动加入数组/集合

```js
const hobbies = ref([]); // 存储选中的爱好
```

```xml
<div>
  <input type="checkbox" id="reading" value="reading" v-model="hobbies">
  <label for="reading">阅读</label>

  <input type="checkbox" id="sports" value="sports" v-model="hobbies">
  <label for="sports">运动</label>

  <input type="checkbox" id="coding" value="coding" v-model="hobbies">
  <label for="coding">编程</label>
</div>
<p>选中的爱好：{{ hobbies }}</p>
```

### 单选框（`<input type="radio">`）

- 用于“互斥选择”场景，多个单选框绑定同一个响应式状态，选中项的 `value` 会赋值给状态

```js
const gender = ref("male"); // 初始选中“男”
```

```xml
<div>
  <input type="radio" id="male" value="male" v-model="gender">
  <label for="male">男</label>

  <input type="radio" id="female" value="female" v-model="gender">
  <label for="female">女</label>
</div>
<p>选择的性别：{{ gender }}</p>
```

### 下拉选择（`<select>`）

#### 基础静态选项

- `v-model` 绑定选中项的 `value`，未匹配任何选项时会显示“未选择”状态（iOS 需注意：建议添加空值禁用选项避免无法选择第一项）

```js
const city = ref(""); // 初始未选择
```

```xml
<select v-model="city">
  <!-- 空值禁用选项，适配 iOS -->
  <option value="" disabled>请选择城市</option>
  <option value="beijing">北京</option>
  <option value="shanghai">上海</option>
  <option value="guangzhou">广州</option>
</select>
<p>选择的城市：{{ city }}</p>
```

#### 动态选项（`v-for` 渲染）

- 选项通过 `v-for` 从数组动态生成，`value` 和显示文本分别绑定数组项的对应属性

```js
const cities = ref([
  { id: 1, name: "北京", code: "beijing" },
  { id: 2, name: "上海", code: "shanghai" },
  { id: 3, name: "广州", code: "guangzhou" },
]);
const selectedCity = ref("");
```

```xml
<select v-model="selectedCity">
  <option value="" disabled>请选择城市</option>
  <option v-for="item in cities" :key="item.id" :value="item.code">
    {{ item.name }}
  </option>
</select>
```

## v-model 高级用法：动态值绑定

默认情况下，`v-model` 绑定的是静态 `value`（字符串类型），若需绑定动态值（如组件实例的响应式状态、非字符串类型），需通过 `v-bind` 绑定 `value`。

### 动态绑定单选框/复选框值

```js
const dynamicValue = ref("custom-value"); // 动态值
const radioValue = ref("");
const checkboxValue = ref(false);
```

```xml
<!-- 单选框：value 绑定动态值 -->
<input type="radio" v-model="radioValue" :value="dynamicValue">
<p>单选框值：{{ radioValue }}</p>

<!-- 复选框：true-value/false-value 绑定动态值（Vue 特有属性） -->
<input type="checkbox" v-model="checkboxValue"
       :true-value="dynamicValue"
       :false-value="'default-false'">
<p>复选框值：{{ checkboxValue }}</p>
```

- **注意**：`true-value`/`false-value` 不影响表单提交（未勾选的复选框不会提交），若需提交固定值，建议用单选框替代。

### 绑定非字符串类型值

通过 `v-bind` 可将选项值绑定为数字、对象等非字符串类型：

```js
const numValue = ref(0); // 数字类型
const objValue = ref({}); // 对象类型
const options = ref([
  { id: 1, label: "数字1", value: 1 },
  { id: 2, label: "对象A", value: { name: "A" } },
]);
```

```xml
<!-- 绑定数字类型 -->
<select v-model="numValue">
  <option :value="1">1</option>
  <option :value="2">2</option>
</select>

<!-- 绑定对象类型 -->
<select v-model="objValue">
  <option v-for="item in options" :key="item.id" :value="item.value">
    {{ item.label }}
  </option>
</select>
```

## v-model 修饰符（lazy/number/trim）

Vue 为 `v-model` 提供三个常用修饰符，用于优化输入处理逻辑。

### `.lazy`：延迟更新（change 事件触发）

- 默认：`v-model` 在 `input` 事件后实时更新（输入时同步）；
- 加 `.lazy`：改为在 `change` 事件后更新（输入完成、失去焦点或按回车时同步）。

```xml
<input type="text" v-model.lazy="lazyValue">
<p>延迟更新值：{{ lazyValue }}</p>
```

### `.number`：自动转换为数字

- 作用：将用户输入的字符串自动转换为数字（无法转换时返回原始字符串，空输入返回空字符串）；
- 自动启用：当 `<input type="number">` 时，`.number` 会自动生效，无需手动添加。

```xml
<input type="text" v-model.number="numValue" placeholder="输入数字">
<p>数字类型值：{{ numValue }}（类型：{{ typeof numValue }}）</p>
```

### `.trim`：自动去除首尾空格

- 作用：自动去除用户输入内容的首尾空格（中间空格保留）。

```xml
<input type="text" v-model.trim="trimValue" placeholder="输入带空格的内容">
<p>去除空格后：{{ trimValue }}</p>
```

## 核心总结

| 表单元素类型  | v-model 绑定规则                   | 关键场景                            | 修饰符适用                     |
| ------------- | ---------------------------------- | ----------------------------------- | ------------------------------ |
| 文本/多行文本 | 绑定 value，input 事件同步         | 实时输入（如用户名、内容）          | .trim（去空格）、.lazy（延迟） |
| 单个复选框    | 绑定布尔值/true-value/false-value  | 同意协议、是否选择                  | -                              |
| 多个复选框    | 绑定数组/Set，存储选中 value       | 多选（爱好、标签）                  | -                              |
| 单选框        | 绑定选中项 value                   | 互斥选择（性别、类型）              | -                              |
| 下拉选择      | 绑定选中项 value，动态选项用 v-for | 固定选项/动态选项选择（城市、分类） | .number（非字符串值）          |

- 初始值必须在 JavaScript 中通过 `ref`/`reactive` 声明，忽略元素的初始 `value`/`checked`；
- 动态值/非字符串值需用 `v-bind` 绑定 `value`；
- 修饰符按需使用：需延迟更新用 `.lazy`，数字输入用 `.number`，去空格用 `.trim`。
