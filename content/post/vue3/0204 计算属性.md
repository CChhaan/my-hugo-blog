---
# 文章标题
title: 2.4 计算属性
# 文章内容摘要
# description:
# 文章内容关键字
keywords: Vue 计算属性, Vue computed, Vue 可写计算属性, Vue getter setter, Vue 响应式依赖, Vue 计算属性缓存, Vue 组合式 API, Vue 性能优化, Vue 计算属性最佳实践
# 发表日期
date: 2025-04-10
summary: 本文主要介绍了 Vue 3 中计算属性的使用方法，包括 `computed()` 方法的使用、计算属性缓存、可写计算属性、获取上一个值以及最佳实践。
# 分类
categories:
  - Vue3文档阅读
# 标签
tags:
  - vue
  - vue3
  - 前端框架
  - 前端开发
---

## 计算属性

在模板中直接使用表达式虽然方便，但处理复杂逻辑时会使模板臃肿，难以维护。为了避免重复计算和提高代码可维护性，推荐使用 **计算属性** 来描述依赖响应式状态的复杂逻辑。

### `computed()` 方法

- `computed()` 接受一个 **getter 函数**，该函数会根据响应式状态返回计算结果。
- 返回值为一个 **计算属性 `ref`**，你可以通过 `.value` 来访问其值。在模板中引用时，无需加 `.value`，它会自动解包。

**计算属性会自动追踪响应式依赖**，当依赖的响应式状态变化时，计算属性会自动重新计算。

## 计算属性缓存 vs 方法

**计算属性值会缓存**，仅在其响应式依赖更新时重新计算。

如果你将相同的计算逻辑放入方法中，**方法每次渲染时都会重新执行**，即使计算逻辑没有变化。

因此，计算属性的效率较高，尤其在涉及重复计算时。

## 可写计算属性

计算属性默认是只读的。当尝试修改一个计算属性时，会收到一个运行时警告。你可以通过提供 **getter** 和 **setter** 来创建一个 **可写计算属性**，允许计算属性具有读写能力。

`get` 用于返回计算属性的值，`set` 用于修改源状态。

## 获取上一个值

如果需要获取计算属性返回的 **上一个值**，可以通过访问计算属性 `getter` 函数的第一个参数来实现。

## 最佳实践

### Getter 不应有副作用

- **计算属性的 getter 只应做计算，没有副作用**。
- 不要在 getter 中改变其他状态、发起异步请求或更改 DOM。
- 计算属性的职责是根据其他状态计算出一个派生值，getter 应仅计算并返回该值。

### 避免直接修改计算属性值

- 计算属性返回的值是派生状态，应该视为 **只读**。
- 更改计算属性的返回值没有意义，应该更新其依赖的源状态来触发新的计算。
