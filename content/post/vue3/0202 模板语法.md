---
# 文章标题
title: 2.2 模板语法
# 文章内容摘要
# description:
# 文章内容关键字
keywords: Vue 模板语法，数据绑定（Mustache/v-html/v-bind）, Vue 指令，动态参数，模板表达式规则
summary: 本节详细介绍了 Vue 模板语法中的数据绑定与指令，包括文本插值、HTML 插值、Attribute 绑定等基础用法，以及动态参数和模板表达式规则。通过这些内容，读者可以全面了解 Vue 模板语法的核心特性及其使用方法。
# 发表日期
date: 2025-04-07
# 分类
categories:
  - vue3文档阅读
# 标签
tags:
  - vue3
  - 前端框架
  - 前端开发
---

## 模板语法核心特性

- **语法基础**：基于标准 HTML，所有 Vue 模板均为合法 HTML，可被浏览器和 HTML 解析器正常解析
- **底层机制**：Vue 会将模板编译为高度优化的 JavaScript 代码，结合响应式系统实现“状态变更 → 最小 DOM 操作”的智能更新
- **核心思想**：声明式绑定组件实例数据与 DOM，无需手动操作 DOM

## 基本数据绑定方式

### 文本插值（Mustache 语法）

- **语法**：`{{ 表达式 }}`，双大括号包裹 JavaScript 表达式
- **作用**：将组件实例中对应数据渲染为纯文本，数据更新时同步更新 DOM
- **示例**：
  ```xml
  <!-- 渲染组件实例的 msg 属性 -->
  <span>Message: {{ msg }}</span>
  <!-- 支持简单表达式（单一表达式，可写在 return 后） -->
  <span>Double: {{ msg.length * 2 }}</span>
  ```
- **限制**：仅渲染纯文本，无法解析 HTML（需用 `v-html`）；不支持多语句或流程控制（如 `if` 需用三元表达式 `{{ isShow ? '显示' : '隐藏' }}`）

### HTML 插值（`v-html` 指令）

- **作用**：将数据作为 HTML 解析并插入 DOM（替代纯文本插值的“转义”行为）
- **语法**：`v-html="表达式"`
- **示例**：
  ```xml
  <!-- rawHtml 为组件实例属性，值如 '<strong>加粗文本</strong>' -->
  <p>Using v-html: <span v-html="rawHtml"></span></p>
  ```
- **关键注意**：
  - 不支持用 `v-html` 拼接组合模板，Vue 推荐用**组件**实现 UI 重用与组合
  - 避免渲染不可信 HTML（防止 XSS 攻击）

### Attribute 绑定（`v-bind` 指令）

#### 基础用法：绑定单个 Attribute

- **作用**：响应式绑定 HTML Attribute 与组件实例数据（双大括号不能用于 HTML Attribute）
- **完整语法**：`v-bind:attributeName="表达式"`
- **简写语法**：`:attributeName="表达式"`（常用）
- **示例**：
  ```xml
  <!-- 绑定 id 属性 -->
  <div :id="dynamicId"></div>
  <!-- 绑定 class 属性（支持对象/数组语法，后续扩展） -->
  <div :class="containerClass"></div>
  ```
- **特殊规则**：若绑定值为 `null` 或 `undefined`，该 Attribute 会从 DOM 中移除

#### 简化语法：属性名与变量名一致

- 当 Attribute 名与组件实例变量名相同时，可省略属性值，等价于 `:name="name"`
- **示例**：
  ```xml
  <!-- 等价于 :id="id" -->
  <div :id></div>
  <!-- 等价于 v-bind:class="class" -->
  <div v-bind:class></div>
  ```

#### 布尔型 Attribute 绑定

- 布尔型 Attribute（如 `disabled`、`checked`）的存在性由绑定值的“真值/假值”决定
- **规则**：
  - 绑定值为**真值**（如 `true`、非空字符串）或空字符串（`<button disabled="">`）：Attribute 存在
  - 绑定值为**假值**（如 `false`、`null`、`undefined`）：Attribute 被忽略
- **示例**：
  ```xml
  <!-- isButtonDisabled 为 true 时，按钮禁用 -->
  <button :disabled="isButtonDisabled">Button</button>
  ```

#### 批量绑定：绑定对象中的多个 Attribute

- 若组件实例中有包含多个 Attribute 的对象，可通过**不带参数的 `v-bind`** 批量绑定到元素
- **示例**：
  ```js
  // 组件实例中的属性
  const objectOfAttrs = {
    id: "container",
    class: "wrapper",
    style: "background-color: green",
  };
  ```
  ```xml
  <!-- 批量绑定 objectOfAttrs 中的 id、class、style -->
  <div v-bind="objectOfAttrs"></div>
  ```

## 模板中的 JavaScript 表达式

### 支持场景

- 文本插值（双大括号）
- 所有 Vue 指令（`v-` 前缀）的 Attribute 值（除 `v-for`、`v-on`、`v-slot` 特例）

### 核心规则

- **仅支持单一表达式**：需是可求值的 JavaScript 代码（可合法写在 `return` 后），不支持多语句（如 `{{ let a = 1; a + msg }}` 不合法）
- **无副作用**：绑定的表达式在组件更新时会重新调用，禁止产生副作用（如修改数据 `{{ msg = 'new' }}`、触发异步操作 `{{ fetchData() }}`）
- **沙盒化全局访问**：仅能访问 Vue 允许的全局对象（如 `Math`、`Date`），自定义全局属性需通过 `app.config.globalProperties` 注册
  ```js
  // 注册全局属性 $api，供所有模板使用
  app.config.globalProperties.$api = api;
  ```

## 指令（Directive）详解

### 指令基础

- **定义**：带有 `v-` 前缀的特殊 HTML Attribute，用于实现响应式 DOM 操作
- **核心逻辑**：当指令表达式的值变化时，自动更新 DOM
- **语法结构**：`v-指令名:参数.修饰符="表达式"`（如 `v-on:click.prevent="handleClick"`）

### 指令参数（Parameter）

- **作用**：指定指令的作用目标（如 `v-bind:id` 中 `id` 是参数，指定绑定的 Attribute 名）
- **动态参数**：参数可通过方括号 `[]` 绑定 JavaScript 表达式（值需为字符串或 `null`）
  - **示例**：动态绑定 Attribute 名
    ```xml
    <!-- attributeName 为组件实例变量，值如 'id' 或 'class' -->
    <div :[attributeName]="dynamicValue"></div>
    ```
  - **规则**：
    - 动态参数值为 `null` 时，显式移除绑定
    - 避免使用空格、引号等非法 HTML Attribute 字符，复杂参数推荐用**计算属性**
    - DOM 内嵌模板中，参数名不能含大写字母（浏览器会强制转为小写）

### 指令修饰符（Modifier）

- **定义**：以点 `.` 开头的特殊后缀，用于指定指令的特殊行为（如阻止默认事件、事件冒泡）
- **示例**：`v-on:click.prevent="handleClick"` 中，`.prevent` 是修饰符，作用是阻止点击事件的默认行为（如表单提交）

### 内置指令（常用）

- 已介绍：`v-bind`（Attribute 绑定）、`v-html`（HTML 插值）
- 后续核心指令：`v-on`（事件绑定）、`v-if`（条件渲染）、`v-for`（列表渲染）、`v-slot`（插槽）等
