---
# 文章标题
title: 2.6 条件渲染
# 文章内容摘要
# description:
# 文章内容关键字
keywords: Vue 条件渲染，v-if/v-else/v-else-if, v-show, 条件渲染差异，v-if 与 v-for 共存
summary: 本节主要介绍了 Vue 中的条件渲染指令，包括 v-if、v-else、v-else-if、v-show 以及它们之间的差异和适用场景。
# 发表日期
date: 2025-04-08
# 分类
categories:
  - vue3文档阅读
# 标签
tags:
  - vue3
  - 前端框架
  - 前端开发
---

## v-if 系列指令：条件性渲染内容

`v-if` 系列（`v-if`/`v-else`/`v-else-if`）通过“销毁/重建 DOM”实现条件渲染，支持多分支逻辑，且可作用于不可见的 `<template>` 包装器。

### 基础用法：v-if（单条件渲染）

- **核心逻辑**：仅当表达式返回**真值**（如 `true`、非空字符串等）时，渲染指令所在元素及内容
- **语法**：`v-if="表达式"`
- **示例**：
  ```xml
  <div v-if="isShow">
    仅当 isShow 为真值时显示（如 isShow = true）
  </div>
  ```
  ```js
  const isShow = ref(true); // 渲染元素；改为 false 则不渲染
  ```

### 多分支逻辑：v-else 与 v-else-if

#### v-else（else 区块）

- **作用**：为 `v-if` 提供“否定分支”，表达式为假时渲染
- **规则**：必须紧跟在 `v-if` 或 `v-else-if` 元素后，否则无法识别
- **示例**：
  ```xml
  <div v-if="score >= 90">优秀</div>
  <div v-else>待提升</div>
  ```

#### v-else-if（多分支）

- **作用**：实现“else if”逻辑，支持连续使用（多分支判断）
- **规则**：必须紧跟在 `v-if` 或 `v-else-if` 元素后
- **示例**：
  ```xml
  <div v-if="score >= 90">优秀</div>
  <div v-else-if="score >= 70">良好</div>
  <div v-else-if="score >= 60">及格</div>
  <div v-else>不及格</div>
  ```

### 多元素切换：v-if 作用于 `<template>`

- **问题**：`v-if` 需依附于单个元素，若需切换多个元素，直接使用会冗余
- **解决方案**：在 `<template>` 上使用 `v-if`（`<template>` 是不可见包装器，最终不渲染到 DOM）
- **示例**：
  ```xml
  <template v-if="isShow">
    <h3>标题</h3>
    <p>段落内容 1</p>
    <p>段落内容 2</p>
  </template>
  <!-- isShow 为真时，仅渲染 h3 和两个 p 标签，无 <template> -->
  ```
- **扩展**：`v-else`/`v-else-if` 也可作用于 `<template>`，规则与单独使用一致。

### 核心特性：真实渲染与惰性加载

- **真实渲染**：切换条件时，条件区块内的**事件监听器**和**子组件**会被**销毁/重建**（非隐藏，而是完全移除/重新创建）
- **惰性加载**：初次渲染时，若条件为假，则不执行任何渲染操作；仅当条件首次变为真时，才渲染区块内容

## v-show：基于 CSS 的条件显示

`v-show` 通过切换元素的 `display` CSS 属性实现“显示/隐藏”，元素始终存在于 DOM 中，仅视觉上不可见。

### 基础用法

- **语法**：`v-show="表达式"`（表达式为真时显示，为假时设置 `display: none`）
- **示例**：
  ```xml
  <div v-show="isVisible">
    表达式为真时显示（display: 初始值），为假时隐藏（display: none）
  </div>
  ```
  ```js
  const isVisible = ref(true); // 显示；改为 false 则隐藏
  ```

### 关键限制

- 不支持作用于 `<template>` 元素（因 `<template>` 不渲染为实际 DOM，无法设置 `display`）
- 不能与 `v-else` 搭配使用（无多分支逻辑，仅单条件显示/隐藏）

## v-if 与 v-show 核心差异（选择依据）

| 维度            | v-if                                   | v-show                               |
| --------------- | -------------------------------------- | ------------------------------------ |
| 实现原理        | 销毁/重建 DOM 元素                     | 切换元素 `display` CSS 属性          |
| 初始渲染开销    | 低（条件为假时不渲染）                 | 高（无论条件如何，均渲染元素）       |
| 切换开销        | 高（需销毁/重建子组件、解绑/绑定事件） | 低（仅修改 CSS 属性）                |
| 支持场景        | 多分支逻辑、 `<template>` 包装器       | 单条件显示/隐藏，不支持 `<template>` |
| 子组件/事件影响 | 切换时销毁/重建子组件、解绑/绑定事件   | 子组件/事件始终存在（仅视觉隐藏）    |

### 选择建议

- **用 v-if**：条件**很少切换**（如初始化后固定）、需多分支逻辑、需销毁子组件/事件
- **用 v-show**：条件**频繁切换**（如按钮控制显示/隐藏）、仅单条件显示/隐藏

## 注意事项：v-if 与 v-for 共存

- **优先级**：当 `v-if` 和 `v-for` 作用于同一元素时，**v-if 优先执行**（先判断条件，再决定是否遍历）
- **不推荐共存**：优先级不直观，易导致逻辑混乱（如遍历前过滤数据，而非遍历后判断）
- **替代方案**：先通过计算属性过滤数据，再用 `v-for` 遍历过滤后的结果：
  ```js
  // 计算属性过滤数据
  const filteredList = computed(() => {
    return list.value.filter((item) => item.isShow); // 先过滤，再遍历
  });
  ```
  ```xml
  <!-- 仅遍历过滤后的结果，无需 v-if -->
  <div v-for="item in filteredList" :key="item.id">
    {{ item.name }}
  </div>
  ```

## 核心总结

| 指令      | 实现方式               | 适用场景                     | 关键限制                    |
| --------- | ---------------------- | ---------------------------- | --------------------------- |
| v-if      | 销毁/重建 DOM          | 少切换、多分支、需销毁子组件 | 切换开销高，需依附元素      |
| v-else    | 配合 v-if 实现否定分支 | 单分支否定逻辑               | 必须紧跟 v-if/v-else-if     |
| v-else-if | 多分支判断             | 多条件逻辑（如分数评级）     | 必须紧跟 v-if/v-else-if     |
| v-show    | 切换 display CSS 属性  | 频繁切换、单条件显示/隐藏    | 不支持 <template> 和 v-else |
