---
# 文章标题
title: 7.1 生产部署
# 文章内容摘要
# description:
# 文章内容关键字
keywords: Vue 开发环境, Vue 生产环境, Vue 构建工具, Vue 性能优化, Vue 错误追踪, Vue ESM 版本, Vue 全局变量版本, Vue CDN
# 发表日期
date: 2025-04-19
summary: 本文主要介绍了 Vue 3 的生产部署，包括开发环境与生产环境的区别、如何选择版本、如何使用构建工具、如何追踪运行时错误等内容。
# 分类
categories:
  - Vue3文档阅读
# 标签
tags:
  - vue
  - vue3
  - 前端框架
  - 前端开发
---

## 开发环境 vs. 生产环境

在开发过程中，Vue 提供了许多功能来提升开发体验：

- 对常见错误和隐患的警告
- 对组件 **props / 自定义事件** 的校验
- 响应性调试钩子
- 开发工具集成

这些功能在生产环境中不会被使用。 一些警告检查会带来少量性能开销。

在部署到生产环境时，应移除所有 **仅用于开发环境** 的代码分支，以获得 **更小的包体积** 和 **更好的性能**。

## 不使用构建工具

如果没有使用构建工具，而是通过 **CDN 或其他源** 加载 Vue：

- 必须确保部署时使用 **生产环境版本**（文件名以 `.prod.js` 结尾）。
- 生产环境版本特点：
  - 经过最小化处理
  - 移除了所有仅用于开发环境的代码分支

### 选择版本

- **全局变量版本**（通过 `Vue` 全局变量访问）：使用 `vue.global.prod.js`
- **ESM 版本**（通过原生 ESM 导入访问）：使用 `vue.esm-browser.prod.js`

## 使用构建工具

通过以下工具搭建的项目已经预先配置好生产环境：

- `create-vue` (基于 Vite)
- Vue CLI (基于 webpack)

自定义构建时的注意事项

1. `vue` 被解析为 `vue.runtime.esm-bundler.js`。
2. 编译时功能标记已正确配置。
3. `process.env.NODE_ENV` 在构建时被替换为 `"production"`。

## 追踪运行时错误

可以使用 应用级错误处理来向追踪服务报告错误：

```js
import { createApp } from 'vue'
const app = createApp(...)
app.config.errorHandler = (err, instance, info) => {
  // 向追踪服务报告错误
}
```
