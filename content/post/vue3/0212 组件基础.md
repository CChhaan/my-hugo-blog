---
# 文章标题
title: 2.12 组件基础
# 文章内容摘要
# description:
# 文章内容关键字
keywords: Vue 组件, Vue 组件定义, Vue 单文件组件, Vue SFC, Vue props, Vue emits, Vue 插槽, Vue 动态组件, Vue defineProps, Vue defineEmits, Vue KeepAlive, Vue 组件通信, Vue 组件命名规范
# 发表日期
date: 2025-04-12
summary: 本文主要介绍了 Vue3 中组件的基础知识，包括组件的定义、使用、传递 props、监听事件、插槽、动态组件以及 DOM 内模板解析注意事项。
# 分类
categories:
  - Vue3文档阅读
# 标签
tags:
  - vue
  - vue3
  - 前端框架
  - 前端开发
  - 组件化开发
---

## 组件概念

**组件**：允许将 UI 划分为独立、可重用的部分，每个部分可单独思考。

**结构**：组件常常组织成层层嵌套的树状结构，类似于 HTML 元素的嵌套方式。

**封装**：Vue 提供组件模型，可在每个组件内封装自定义内容与逻辑。

**兼容性**：Vue 也能很好地配合原生 Web Component。

## 定义组件

**单文件组件 (SFC)**：使用构建步骤时，将 Vue 组件定义在单独的 `.vue` 文件中。

**对象定义**：不使用构建步骤时，以包含 Vue 特定选项的 JavaScript 对象来定义组件。

**模板方式**：

- 使用内联 JavaScript 字符串，在运行时编译。
- 使用 ID 选择器指向一个元素（通常是 `<template>`），以其内容作为模板来源。

## 使用组件

**导入使用**：

- 在父组件中导入子组件。
- 使用 `<script setup>` 时，导入的组件在模板中直接可用。
- 可全局注册组件，使其在应用中任意位置可用。

**特点**：

- 组件可被重复使用任意多次。
- 每次使用组件都会创建一个新的 **实例**，各自维护独立状态。

**命名规范**：

- 在 SFC 中，推荐使用 **PascalCase** 标签名以区分原生 HTML 元素。
- 模板编译可区分大小写。
- 可使用 `/>` 关闭标签。

**DOM 内模板注意** ：必须使用 **kebab-case** 并显式关闭标签。

## 传递 props

**Props 定义**

- 是一种特殊的 attributes，需要在组件上声明注册。
- 使用`defineProps` 宏（仅 `<script setup>` 中可用，不需要导入）。
- 返回对象包含所有可传递的 props，自动暴露给模板。
- 不使用 `<script setup>` 时，需通过 `props` 选项声明，作为 `setup()` 第一个参数传入。

**特点**

- 组件可拥有任意数量的 props。
- 默认所有 props 接受任意类型值。
- 注册后的 prop 可通过自定义 attribute 传递数据。

## 监听事件

**父组件监听**：通过 `v-on` 或 `@` 监听子组件抛出的事件。

**子组件抛出**：

- 使用内置 **`$emit`** 方法传入事件名称抛出事件。
- 使用 `defineEmits`宏声明可能抛出的事件，可对事件参数进行验证。

**使用说明**

- `defineEmits`：
  - 仅 `<script setup>` 可用，无需导入。
  - 返回等同于 `$emit` 的 `emit` 函数，可在 `<script setup>` 中抛出事件。
- 不使用 `<script setup>` 时：
  - 通过 `emits` 选项定义事件。
  - 在 `setup()` 的第二个参数（上下文对象）中访问 `emit`。

## 通过插槽来分配内容

使用 `<slot>` 元素作为占位符。

父组件传递的内容会渲染在 `<slot>` 中。

## 动态组件

**实现方式**：使用 `<component>` 元素和 `is` attribute。

**`:is` 可接收的值**：

- 已注册的组件名
- 导入的组件对象

**额外用法**：

- `is` attribute 也可创建一般 HTML 元素。
- 使用 `<component :is="...">` 切换组件时，被切换掉的组件会被卸载。
- 可用 `<KeepAlive>` 保持切换掉的组件存活。

## DOM 内模板解析注意事项

仅适用于直接在 DOM 中编写模板的情况。以下来源不受限制：

- 单文件组件
- 内联模板字符串 (`template: '...'`)
- `<script type="text/x-template">`

### 大小写区分

HTML 标签与属性名不区分大小写，大写会被解析为小写。

DOM 内模板中：

- **PascalCase 组件名 → kebab-case**
- **camelCase prop 名 → kebab-case**
- **事件名称 → kebab-case**

### 闭合标签

Vue 模板解析器支持 `/>`。

DOM 内模板中必须显式关闭标签。

HTML 中仅少数元素（如 `<input>`、`<img>`）可省略关闭标签。

### 元素位置限制

某些元素限制放置内容： 例：`<ul>`、`<ol>`、`<table>`、`<select>`。

某些元素必须放置在特定父元素中： 例：`<li>`、`<tr>`、`<option>`。  
**解决方案**：

- 使用特殊的 `is` attribute。
- 在原生 HTML 元素上使用时，值必须加上前缀 **`vue:`**，避免与原生自定义内置元素冲突。
