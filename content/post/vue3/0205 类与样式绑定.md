---
# 文章标题
title: 2.5 类与样式绑定
# 文章内容摘要
# description:
# 文章内容关键字
keywords: Vue 动态样式绑定，:class 绑定，:style 绑定，计算属性样式，组件 Class 继承
summary: 本节介绍 Vue 3 中动态绑定 Class 和 Style 的方法，包括对象、数组、计算属性等。
# 发表日期
date: 2025-04-07
# 分类
categories:
  - vue3文档阅读
# 标签
tags:
  - vue3
  - 前端框架
  - 前端开发
---

## 动态 Class 绑定（`:class`）

`class` 是 HTML 核心属性，Vue 允许通过 `:class`（`v-bind:class` 缩写）绑定动态值，支持**字符串、对象、数组**三种形式，且可与普通 `class` 共存。

### 绑定对象（动态切换单个/多个 Class）

- **核心逻辑**：对象的“键”为 Class 名，“值”为布尔值（`true` 显示 Class，`false` 隐藏）
- **语法**：`:class="{ class名1: 布尔值1, class名2: 布尔值2, ... }"`
- **示例**：

  ```xml
  <!-- 基础用法：单个 Class 切换 -->
  <div :class="{ active: isActive }"></div>

  <!-- 多 Class 切换 + 与普通 class 共存 -->
  <div class="base-box" :class="{ active: isActive, disabled: isDisabled }"></div>
  ```

  ```js
  // 组件中响应式状态
  const isActive = ref(true); // 显示 active 类
  const isDisabled = ref(false); // 隐藏 disabled 类
  ```

- **进阶：绑定外部对象**  
  若 Class 逻辑复杂，可将对象定义为响应式状态，直接绑定到 `:class`：

  ```js
  const classObj = reactive({
    active: true,
    disabled: false,
  });
  ```

  ```xml
  <div :class="classObj"></div>
  ```

- **最佳实践：绑定计算属性（推荐）**  
  当 Class 依赖多个响应式状态时，用计算属性返回最终对象，逻辑更清晰：
  ```js
  const isActive = ref(true);
  const hasError = ref(false);
  // 计算属性返回最终 Class 对象
  const computedClass = computed(() => ({
    active: isActive.value && !hasError.value,
    disabled: hasError.value,
  }));
  ```
  ```xml
  <div :class="computedClass"></div>
  ```

### 绑定数组（渲染多个固定 Class）

- **核心逻辑**：数组元素为 Class 名，直接渲染所有元素对应的 Class
- **语法**：`:class="[ class名1, class名2, ... ]"`
- **示例**：

  ```js
  const activeClass = ref("active");
  const errorClass = ref("text-error");
  ```

  ```xml
  <div :class="[ activeClass, errorClass ]"></div>
  <!-- 渲染结果：<div class="active text-error"></div> -->
  ```

- **进阶：数组中嵌套对象（条件渲染）**  
  需在数组中条件切换某个 Class 时，可嵌套对象（解决多条件冗长问题）：
  ```xml
  <!-- 条件渲染 active 类，固定渲染 errorClass -->
  <div :class="[ { active: isActive }, errorClass ]"></div>
  ```

### 组件上的 Class 继承

- **单根组件**：父组件传递的 `class` 会自动添加到子组件的**根元素**上，并与子组件自身的 `class` 合并：

  ```xml
  <!-- 父组件：传递 class -->
  <ChildComponent class="parent-class" :class="{ active: isActive }"></ChildComponent>

  <!-- 子组件（单根）：自身有 base-class -->
  <template>
    <div class="base-class"></div>
  </template>
  <!-- 子组件根元素最终渲染：<div class="base-class parent-class active"></div> -->
  ```

- **多根组件**：需通过子组件的 `$attrs` 属性指定接收 `class` 的根元素，否则 `class` 会丢失：
  ```xml
  <!-- 子组件（多根）：指定 class 挂载到第一个 div -->
  <template>
    <div :class="$attrs.class">根元素1（接收 class）</div>
    <div>根元素2（不接收 class）</div>
  </template>
  ```

## 动态 Style 绑定（`:style`）

`style` 用于内联样式，Vue 允许通过 `:style` 绑定 JavaScript 对象/数组，支持自动前缀补全，且可与普通 `style` 共存。

### 绑定对象（基础用法）

- **核心逻辑**：对象的“键”为 CSS 属性名（支持 `camelCase` 或 `kebab-case`），“值”为样式值（可含单位）
- **语法**：`:style="{ css属性1: 样式值1, css属性2: 样式值2, ... }"`
- **示例**：

  ```js
  const fontSize = ref("16px");
  const textColor = ref("#333");
  ```

  ```xml
  <!-- 基础用法：camelCase 命名 CSS 属性（推荐，符合 JS 习惯） -->
  <div :style="{ fontSize: fontSize, color: textColor }"></div>

  <!-- 支持 kebab-case 命名（需加引号，符合 CSS 习惯） -->
  <div :style="{ 'font-size': fontSize, 'background-color': '#f5f5f5' }"></div>

  <!-- 与普通 style 共存 -->
  <div style="padding: 10px" :style="{ fontSize: fontSize }"></div>
  ```

- **进阶：绑定外部样式对象**  
  样式逻辑复杂时，可将样式定义为响应式对象，直接绑定：

  ```js
  const styleObj = reactive({
    fontSize: "16px",
    color: "#333",
    "background-color": "#f5f5f5",
  });
  ```

  ```xml
  <div :style="styleObj"></div>
  ```

- **最佳实践：绑定计算属性**  
  样式依赖多个响应式状态时，用计算属性返回最终样式对象：
  ```js
  const isDarkMode = ref(true);
  const styleObj = computed(() => ({
    fontSize: "16px",
    color: isDarkMode.value ? "#fff" : "#333",
    "background-color": isDarkMode.value ? "#222" : "#f5f5f5",
  }));
  ```
  ```xml
  <div :style="styleObj"></div>
  ```

### 绑定数组（合并多个样式对象）

- **核心逻辑**：数组元素为样式对象，最终所有对象的样式会合并到元素上（重复属性后者覆盖前者）
- **语法**：`:style="[ 样式对象1, 样式对象2, ... ]"`
- **示例**：
  ```js
  const baseStyle = reactive({ fontSize: "16px", padding: "10px" });
  const themeStyle = reactive({ color: "#333", "background-color": "#f5f5f5" });
  ```
  ```xml
  <div :style="[ baseStyle, themeStyle ]"></div>
  <!-- 合并结果：fontSize+padding+color+background-color -->
  ```

### 自动前缀补全

- **特性**：当 `:style` 中使用浏览器特殊前缀的 CSS 属性（如 `transform`、`transition`）时，Vue 会在运行时检测浏览器支持性，自动添加对应前缀（如 `-webkit-`、`-moz-`）
- **示例**：

  ```xml
  <!-- Vue 自动补全前缀（如 -webkit-transform） -->
  <div :style="{ transform: 'translateX(10px)' }"></div>
  ```

- **手动指定多前缀**：若需兼容特殊场景，可给同一属性传递多个前缀值，Vue 会选择浏览器支持的第一个：
  ```xml
  <div :style="{
    display: ['-webkit-box', '-ms-flexbox', 'flex']
  }"></div>
  ```

## 核心总结

| 绑定类型 | 支持格式   | 核心场景                   | 最佳实践                              |
| -------- | ---------- | -------------------------- | ------------------------------------- |
| `:class` | 对象、数组 | 动态切换 CSS 类、多类组合  | 复杂逻辑用**计算属性**返回对象/数组   |
| `:style` | 对象、数组 | 内联样式动态调整、前缀兼容 | 样式逻辑复杂时用**外部对象/计算属性** |

- 无论 `:class` 还是 `:style`，均支持与普通 `class`/`style` 共存，动态部分仅补充或覆盖
- 优先使用计算属性组织动态逻辑，避免模板中嵌套复杂表达式，提升可维护性
