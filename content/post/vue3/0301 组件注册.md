---
# 文章标题
title: 3.1 组件注册
# 文章内容摘要
# description:
# 文章内容关键字
keywords: Vue 组件注册，全局注册 (app.component), 局部注册 (components 选项), 组件名规范 (PascalCase/kebab-case), Tree-Shaking 支持
summary: 本节详细介绍了 Vue 组件注册的两种方式：全局注册和局部注册，以及组件名规范和 Tree-Shaking 支持。
# 发表日期
date: 2025-04-09
# 分类
categories:
  - vue3文档阅读
# 标签
tags:
  - vue3
  - 前端框架
  - 组件化开发
  - 前端开发
---

## 组件注册核心概念

组件注册是 Vue 识别组件、允许其在模板中使用的前置步骤。Vue 提供**全局注册**和**局部注册**两种方式，二者在“可用范围”“打包优化”“依赖清晰度”上存在关键差异，需根据项目场景选择。

核心目标：让 Vue 明确“组件名”与“组件实现”的映射关系，确保渲染模板时能找到对应的组件逻辑与 UI。

## 全局注册：应用级可用

全局注册通过 Vue 应用实例的 `.component()` 方法实现，注册后的组件在**整个应用的所有组件模板中可用**（无需重复导入），适合通用基础组件（如 Button、Input、Icon）。

### 基础用法（单文件组件场景）

#### 步骤：

1. 导入组件实现（如 `.vue` 文件）；
2. 调用 `app.component(组件名, 组件实现)` 注册；
3. 任意组件模板中直接使用，无需再次导入。

#### 示例：

```js
// 应用入口文件（如 main.js）
import { createApp } from "vue";
import App from "./App.vue";
// 1. 导入需全局注册的组件
import GlobalButton from "./components/GlobalButton.vue";
import GlobalCard from "./components/GlobalCard.vue";

// 2. 创建应用实例
const app = createApp(App);

// 3. 全局注册组件（支持链式调用）
app
  .component("GlobalButton", GlobalButton) // 组件名：GlobalButton，组件实现：GlobalButton
  .component("GlobalCard", GlobalCard); // 链式注册第二个组件

// 4. 挂载应用
app.mount("#app");
```

```xml
<!-- 任意组件模板中直接使用（无需导入） -->
<template>
  <!-- 全局组件：GlobalButton -->
  <GlobalButton text="全局按钮" />
  <!-- 全局组件：GlobalCard -->
  <GlobalCard title="全局卡片" content="全局注册的卡片组件" />
</template>
```

### 非单文件组件场景（无构建步骤）

若使用 JavaScript 对象定义组件（无 `.vue` 文件），直接将组件对象传入 `.component()` 即可：

```js
// 定义组件对象
const MyAlert = {
  template: '<div class="alert">{{ message }}</div>',
  props: ['message']
}

// 全局注册
app.component('MyAlert', MyAlert)

// 使用
<MyAlert message="全局警告组件" />
```

### 全局注册的特点与问题

| 特点 | 说明                                                                                                                                                                                                                                                             |
| ---- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 优点 | 1. 一次注册，全应用可用，无需重复导入；<br>2. 适合通用基础组件，减少代码冗余。                                                                                                                                                                                   |
| 缺点 | 1. **无法 Tree-Shaking**：未使用的全局组件仍会打包进最终 JS 文件，增加体积；<br>2. **依赖不明确**：父组件使用子组件时，无法快速定位子组件实现（需全局搜索），大型项目可维护性下降；<br>3. **命名冲突风险**：全局组件名若重复，后注册的会覆盖先注册的，不易排查。 |

## 局部注册：父组件内可用

局部注册仅在**当前父组件及其模板中生效**，后代组件需重新导入注册，适合业务组件（如订单列表、用户表单）。其核心优势是“依赖明确”“支持 Tree-Shaking”，是大型项目的推荐方式。

### `<script setup>` 场景（推荐，自动注册）

`<script setup>` 是 Vue 3 单文件组件的语法糖，**导入的组件会自动局部注册**，无需额外配置，直接在模板中使用。

#### 示例：

```xml
<!-- 父组件 Parent.vue -->
<template>
  <!-- 直接使用导入的子组件（无需手动注册） -->
  <LocalUserCard :user="userInfo" />
  <LocalOrderList :orders="orderList" />
</template>

<script setup>
// 1. 导入子组件（自动局部注册）
import LocalUserCard from './LocalUserCard.vue'
import LocalOrderList from './LocalOrderList.vue'

// 2. 定义传递给子组件的数据
const userInfo = { name: 'Alice', age: 20 }
const orderList = [{ id: 1, title: '订单1' }, { id: 2, title: '订单2' }]
</script>
```

#### 关键规则：

- 导入的组件名（如 `LocalUserCard`）即为模板中可用的组件名；
- 组件仅在当前父组件（`Parent.vue`）中可用，若 `LocalUserCard` 的子组件需使用 `LocalOrderList`，需在 `LocalUserCard.vue` 中重新导入。

### 非 `<script setup>` 场景（需手动注册）

若不使用 `<script setup>`，需通过 `components` 选项**手动声明局部注册的组件**，明确“组件名”与“组件实现”的映射。

#### 示例：

```xml
<!-- 父组件 Parent.vue -->
<template>
  <LocalUserCard :user="userInfo" />
</template>

<script>
// 1. 导入子组件
import LocalUserCard from './LocalUserCard.vue'

export default {
  // 2. 手动注册局部组件（key：组件名，value：组件实现）
  components: {
    LocalUserCard // 简写（key 与 value 同名），等价于 LocalUserCard: LocalUserCard
  },
  setup() {
    const userInfo = { name: 'Bob', age: 22 }
    return { userInfo }
  }
}
</script>
```

#### 注意：

- `components` 选项的 key 是模板中使用的组件名（支持 PascalCase 或 kebab-case，推荐 PascalCase）；
- 局部注册的组件**不支持后代组件继承**，后代组件需独立导入注册。

### 局部注册的特点

| 特点 | 说明                                                                                                                                                                                                                           |
| ---- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| 优点 | 1. **支持 Tree-Shaking**：未使用的局部组件会被打包工具移除，减小最终体积；<br>2. **依赖明确**：父组件中可直接看到导入的子组件，快速定位实现，利于维护；<br>3. **无命名冲突**：组件仅在父组件内生效，不同父组件可注册同名组件。 |
| 缺点 | 1. 需重复导入：同一组件在多个父组件中使用时，需多次导入；<br>2. 层级较深时，后代组件需多次注册（可通过“组件组合”或“Provide/Inject”优化）。                                                                                     |

## 组件名规范与解析规则

Vue 对组件名的格式有灵活支持，但为了一致性和可读性，推荐遵循以下规范：

### 推荐的组件名格式：PascalCase

在组件注册和单文件组件中，优先使用 **PascalCase（大驼峰命名）**，原因如下：

- 符合 JavaScript 标识符规则，便于导入和注册（如 `import UserCard from './UserCard.vue'`）；
- 模板中 `<PascalCase />` 能明确区分“Vue 组件”与“原生 HTML 元素”（如 `<div>` 是原生，`<UserCard>` 是 Vue 组件）；
- IDE 支持更好的自动补全和语法提示。

### 模板中的组件名解析规则

Vue 支持模板中使用 **kebab-case（短横线命名）** 引用 PascalCase 注册的组件，实现“命名格式兼容”：

- 若组件注册名为 `UserCard`（PascalCase），模板中可通过 `<UserCard>` 或 `<user-card>` 两种方式使用；
- 核心原因：Vue 在编译模板时，会自动将 kebab-case 标签名转为 PascalCase，匹配注册的组件名。

#### 示例：

```js
// 注册时用 PascalCase
components: {
  UserCard;
}
```

```xml
<!-- 模板中两种方式都可使用 -->
<UserCard :user="userInfo" /> <!-- 推荐 -->
<user-card :user="userInfo" /> <!-- 兼容 -->
```

### DOM 内模板的特殊限制

若直接在 DOM 中书写模板（如 `<template id="xxx">`），需注意 **浏览器 HTML 解析规则**：

- 浏览器会将所有标签名转为小写，因此 `<UserCard>` 会被解析为 `<usercard>`，导致无法匹配 PascalCase 注册的组件；
- 解决方案：DOM 内模板中必须使用 **kebab-case 标签名**（如 `<user-card>`），或通过 `is` 属性绑定组件名。

#### 示例（DOM 内模板）：

```html
<!-- 正确：使用 kebab-case 标签名 -->
<template id="dom-template">
  <user-card :user="userInfo" />
</template>

<!-- 或通过 is 属性绑定 -->
<template id="dom-template">
  <div :is="UserCard"></div>
</template>
```

## 全局注册 vs 局部注册：选择指南

| 对比维度          | 全局注册                            | 局部注册                                     |
| ----------------- | ----------------------------------- | -------------------------------------------- |
| 可用范围          | 整个应用所有组件                    | 仅当前父组件及其模板                         |
| Tree-Shaking 支持 | ❌ 不支持（未使用仍打包）           | ✅ 支持（未使用会被移除）                    |
| 依赖清晰度        | ❌ 差（需全局搜索定位实现）         | ✅ 好（父组件内直接看到导入）                |
| 命名冲突风险      | ✅ 高（全应用共享命名空间）         | ❌ 低（仅父组件内生效）                      |
| 适用组件类型      | 通用基础组件（Button、Icon、Input） | 业务组件（OrderList、UserForm、ProductCard） |
| 推荐项目规模      | 小型项目、原型开发                  | 中大型项目、团队协作项目                     |

## 核心总结

1. **优先局部注册**：除通用基础组件外，业务组件一律使用局部注册，保证依赖清晰、支持打包优化；
2. **全局注册慎选**：仅对“全应用高频使用、无替代方案”的组件全局注册（如自定义 Button），避免滥用；
3. **组件名规范**：注册时用 PascalCase（如 `UserCard`），模板中优先用 PascalCase，DOM 内模板用 kebab-case；
4. **避免过度注册**：局部注册时，若组件仅在一个父组件中使用，可考虑“内联组件”（如在父组件中定义子组件），减少文件拆分。
