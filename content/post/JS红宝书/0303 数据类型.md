---
# 文章标题
title: 3.3 数据类型
# 文章内容摘要
# description: 本文详细介绍了 Git 这一分布式版本控制系统的优点，对比了 Windows 与 macOS/Linux 系统下的常用命令，讲解了 vim 操作模式及常用命令，还阐述了 Git 的基本配置、特定项目配置和命令缩写设置等内容。
# 文章内容关键字
keywords: JavaScript 数据类型，typeof 操作符，类型转换，Number 类型，String 类型，Symbol 类型，Object 类型
# 发表日期
date: 2025-01-09
summary: 本章详细介绍了 JavaScript 的数据类型，包括简单数据类型和复杂数据类型，以及 typeof 操作符、undefined 类型、null 类型、Boolean 类型、Number 类型、String 类型、Symbol 类型、Object 类型的特性和使用建议。
# 分类
categories:
  - JS红宝书
# 标签
tags:
  - JavaScript
  - ECMAScript
  - 前端开发
  - 类型系统
  - 对象
---

## 数据类型分类

1. 简单数据类型（原始类型）：undefined、null、Boolean、number、string、symbol
2. 复杂数据类型：object（一种无序名值对）
3. ES 数据类型特性：灵活，一种数据类型可当作多种数据类型使用

## typeof 操作符

1. 返回值：返回下列字符串之一——undefined、Boolean、string、number、object、function、symbol
2. 语法示例：
   - `typeof message`
   - `typeof(message)`
   - `typeof 96`
3. 特性：
   - 是操作符而非函数，无需参数，但可使用参数
   - 调用 `typeof null` 返回 `object`（因 null 被视为空对象引用）
   - 函数在 ES 中属对象，非独立数据类型，但因有特殊属性，`typeof` 可区分函数与其他对象

## undefined 类型

1. 取值：仅一个值——undefined
2. 赋值场景：用 var 或 let 声明变量但未初始化，变量默认赋予 undefined 值
3. 使用建议：
   - 无需显式给变量设 undefined 值，字面量 undefined 主要用于比较
   - ES3 前无 undefined，新增目的是明确空对象指针与未初始化变量的区别
4. 变量区别：
   - 包含 undefined 值的变量 ≠ 未定义变量
   - 对未声明变量，仅有用操作是调用 `typeof`；调用 `delete` 不报错（无实际作用，严格模式下报错）
   - 未初始化与未声明变量，`typeof` 均返回 "undefined"
5. 初始化建议：声明变量时同时初始化，以便通过 `typeof` 返回 undefined 判断变量未声明（非未初始化）
6. 布尔特性：undefined 是假值，可简洁检测

## null 类型

1. 取值：仅一个值——null，表空对象指针
2. `typeof` 结果：调用 `typeof null` 返回 `object`
3. 使用建议：定义将来存对象值的变量时，用 null 初始化（非其他值），便于后续检查变量是否重新赋予对象引用
4. 与 undefined 关系：
   - undefined 由 null 派生，`==` 比较二者始终返回 true（操作符会转换操作数）
   - 用途不同：无需显式设变量为 undefined，但存对象的变量无对象可存时需设为 null
5. 布尔特性：null 是假值，可简洁检测

## Boolean 类型

1. 字面值：true 和 false（区分大小写，≠ 数值 1 和 0）
2. 类型转换：
   - 调用 `Boolean()` 转型函数，可将任意类型值转为布尔值
   - 转 false 的值：false、空字符串、0、NaN、null、undefined
3. 自动转换：if 等流程控制语句会自动将其他类型值转为布尔值

## Number 类型

1. 存储格式：使用 IEEE 754 格式表示整数和浮点值（双精度值）
2. 数值字面量格式：
   - 十进制整数：最基本格式
   - 八进制：前缀 0（严格模式下无效，需用 0o；数字超范围则忽略前缀按十进制处理）
   - 十六进制：前缀 0x（字母大小写均可）
   - 特性：八进制、十六进制创建的数值在数学操作中视为十进制

### 浮点值

1. 定义规则：必须含小数点，且小数点后至少 1 个数字（小数点前可无整数，推荐加上）
2. 转换特性：ES 会尽量将浮点数转为整数（如小数点后无数字、整数后跟零的浮点数）
3. 科学计数法：用于表示极大/极小浮点值，格式为“数值（整数/浮点）+ 大小写 e + 10 的幂次”
4. 转换规则：默认将小数点后至少 6 个零的浮点值转为科学计数法
5. 精度：最高 17 位小数，算术计算精度不如整数（存在微小舍入错误）

### 值的范围

1. 极值：
   - 最小数值：Number.MIN_VALUE
   - 最大数值：Number.MAX_VALUE
2. 超出范围处理：计算结果超范围时，自动转为特殊 infinity 值
   - 无法表示的正数：Infinity（Number.POSITIVE_INFINITY）
   - 无法表示的负数：-Infinity（Number.NEGATIVE_INFINITY）
3. 检测函数：`isFinite()` 确定值是否有限大

### NaN

1. 含义：not a number，表本应返回数值的操作失败
2. 示例：
   - `console.log(0/0)` // NaN
   - `console.log(3/0)` // Infinity
   - `console.log(3/-0)` // -Infinity
3. 特性：
   - 任何涉及 NaN 的操作均返回 NaN
   - NaN ≠ 包括自身在内的任何值
4. 检测函数：`isNaN()`（接收任意类型参数，尝试转数值，无法转换则返回 true；检测对象时先调用 valueOf()，无效再调用 toString()）

### 数值转换

1. Number() 函数（转型函数，适用于任意数据类型）：
   - 布尔值：true→1，false→0
   - 数值：直接返回
   - null：返回 0
   - undefined：返回 NaN
   - 字符串：
     - 含数值字符（含正负号）→ 十进制数值
     - 含有效浮点格式 → 对应浮点值
     - 含有效十六进制格式 → 对应十进制值
     - 空字符串 → 0
     - 含其他字符 → NaN
   - 对象：先调用 valueOf() 按上述规则转换，结果为 NaN 则调用 toString() 再转换
2. parseInt() 函数（主要转字符串为整数）：
   - 转换规则：忽略字符串前空格，从第一个非空格字符开始；首字符非数值/正负号则返回 NaN，空字符串返回 NaN
   - 处理方式：首字符有效则依次检测，至字符串末尾或非数值字符停止（小数点非有效整数字符）
   - 进制识别：
     - 字符串以 0x 开头 → 十六进制
     - 非严格模式下字符串以 0 开头且跟数值字符 → 可能被解析为八进制
   - 示例：
     - `let num1 = parseInt('123blue')` // 123
     - `let num2 = parseInt('')` // NaN
     - `let num3 = parseInt('0xA')` // 10
     - `let num4 = parseInt('22.5')` // 22
     - `let num5 = parseInt('70')` // 70
   - 第二个参数：指定底数（进制数），示例：
     - `let num1 = parseInt('0xAF')` // 175
     - `let num2 = parseInt('0xAF',16)` // 175
     - `let num3 = parseInt('AF',16)` // 175
     - `let num4 = parseInt('AF')` // NaN
3. parseFloat() 函数（主要转字符串为浮点数）：
   - 转换规则：同 parseInt()，解析至字符串末尾或无效浮点字符
   - 小数点处理：第一次出现的小数点有效，第二次无效（后续字符忽略）
   - 特性：
     - 忽略字符串开头的 0，十六进制数值返回 0
     - 只解析十进制，不可指定底数
     - 字符串表整数则返回整数

## String 类型

1. 定义：表示零或多个 16 位 Unicode 字符序列，可用双引号、单引号、反引号标示（引号需前后一致）

### 字符字面量

1. 用途：表非打印字符或有特殊用途的字符（同 C 的转义字符）
2. 特性：可在字符串任意位置出现，作单个字符解释

### 字符串属性

- length 属性：获取字符串长度（含双字节字符时，返回值可能非准确字符数）

### 字符串特点

- 不可变：创建后值不可改，修改需先销毁原字符串，再存新值（后台自动处理）

### 转换为字符串

1. toString() 方法：
   - 用途：返回当前值的字符串等价物
   - 适用类型：数字、布尔值、对象、字符串（undefined 和 null 无此方法）
   - 数值调用：可传底数参数，指定输出进制（默认十进制）
2. String() 函数（适用于任意类型）：
   - 规则：
     - 值有 toString() 则调用并返回结果
     - 值为 null → "null"
     - 值为 undefined → "undefined"
3. 加号操作符：给值加空字符串 "" 可转为字符串

### 模板字面量

1. 标识：用反引号
2. 特性：保留换行字符，可跨行定义字符串；保留内部空格，需注意格式
3. 本质：特殊 JS 句法表达式，求值后为字符串，定义时立即求值转换，插入变量取最近作用域值

### 字符串插值

1. 实现：在 ${} 中使用 JS 表达式
2. 示例：
   - `let value=5`
   - `let value2="value is " + value` // value is 5
   - `let value3=`value2 is ${value2}` // value2 is value is 5
3. 特性：
   - 插入值用 toString() 转为字符串
   - 支持任意 JS 表达式、嵌套模板字符串、调用函数/方法
   - 可递归插入自身之前的值

### 模板字面量标签函数

1. 用途：自定义插值行为
2. 定义：普通函数，前缀到模板字面量应用
3. 参数：依次为原始字符串数组、每个表达式求值结果
4. 返回值：模板字面量求值后的字符串
5. 表达式参数：数量可变，常用剩余操作符收集到数组
6. 数量关系：n 个插值的模板字面量，表达式参数 n 个，字符串数组 n+1 个
7. 示例：
   ```js
   let a = 6;
   let b = 9;
   function simpleTag(strings, ...expressions) {
     console.log(strings);
     for (const expression of expressions) {
       console.log(expression);
     }
     return "foobar";
   }
   let taggedResult = simpleTag`${a}+${b}=${a + b}`;
   // [" ","+","="," "]
   // 6
   // 9
   // 15
   console.log(taggedResult); // foobar
   ```

### 原始字符串

1. 获取方式：
   - 使用 String.raw 标签函数，直接获取原始模板字面量内容（如换行符、Unicode 字符）
   - 示例：
     - `console.log(String.raw`\u00A9`)` // \u00a9
     - `console.log(`\u00A9`)` // ©
   - 通过标签函数第一个参数（字符串数组）的 .raw 属性获取每个字符串原始内容

## Symbol 类型

1. 特性：原始值，实例唯一、不可变
2. 用途：确保对象属性用唯一标识符，避免属性冲突

### 符号的基本用法

1. 初始化：用 Symbol() 函数（不可与 new 同用，避免创建包装对象；需包装对象可调用 Object()）
2. typeof 结果：返回 symbol
3. 描述参数：调用 Symbol() 可传字符串参数作描述（用于调试，与符号定义/标识无关）
4. 字面量：无字面量语法，用作对象新属性可避免覆盖已有属性（符号/字符串属性）

### 使用全局符号注册表

1. 目的：运行时不同部分共享、重用符号实例
2. 方法：
   - Symbol.for()：传字符串键，先查注册表，无则生成新符号添加，有则返回已有符号（幂等操作）
   - 特性：参数会转为字符串，键同时作符号描述
3. 查询：Symbol.keyFor() 接收符号，返回全局符号对应字符串键（非全局符号返回 undefined；传非符号报错）
4. 区别：全局注册表符号 ≠ Symbol() 定义的符号（即使描述相同）

### 使用符号作为属性

1. 适用场景：可替代字符串/数值作属性（对象字面量需用计算属性语法）
2. 属性获取：
   - Object.getOwnPropertyNames()：返回常规属性数组
   - Object.getOwnPropertySymbols()：返回符号属性数组（与前者互斥）
   - Object.getOwnPropertyDescriptors()：返回两种属性描述符
   - Reflect.ownKeys()：返回两种类型的键
3. 引用：直接创建的符号属性需显式保存引用，否则需遍历所有符号属性查找

### 常用内置符号

1. 定义：ES6 引入，暴露语言内部行为，可访问、重写、模拟；为 Symbol 工厂函数字符串属性，不可写、不可枚举、不可配置
2. 符号列表及用途：
   - Symbol.asyncIterator：表返回对象默认 AsyncIterator 的方法，供 for-await-of 使用
   - Symbol.hasInstance：表判断构造器是否认可对象为实例的方法，供 instanceof 使用
   - Symbol.isConcatSpreadable：表布尔值，指示对象是否被 Array.prototype.concat 打平元素
   - Symbol.iterator：表返回对象默认迭代器的方法，供 for-of 使用
   - Symbol.match：表正则表达式匹配字符串的方法，供 String.prototype.match 使用
   - Symbol.replace：表正则表达式替换字符串匹配子串的方法，供 String.prototype.replace 使用
   - Symbol.search：表正则表达式返回字符串匹配索引的方法，供 String.prototype.search 使用
   - Symbol.species：表创建派生对象的构造函数，用于内置类型实例方法返回派生对象
   - Symbol.split：表正则表达式在匹配索引拆分字符串的方法，供 String.prototype.split 使用
   - Symbol.toPrimitive：表将对象转为原始值的方法，供 ToPrimitive 抽象操作使用
   - Symbol.toStringTag：表创建对象默认字符串描述的字符串，供 Object.prototype.toString 使用
   - Symbol.unscopables：表对象，其属性从关联对象的 with 环境绑定中删除（不推荐使用 with，故不推荐此符号）

## Object 类型

1. 定义：一组数据和功能的集合
2. 创建方式：new 操作符 + 对象类型名称；创建 Object 实例后可添加属性和方法（无参数时可省略括号）
3. 继承关系：ES 中 Object 是派生其他对象的基类，其属性和方法在派生对象上均存在
4. 属性和方法：
   - constructor：创建当前对象的函数
   - hasOwnProperty(propertyName)：判断当前对象实例（非原型）是否存在给定属性（属性名需为字符串/符号）
   - isPrototypeOf(object)：判断当前对象是否为另一对象的原型
   - propertyIsEnumerable(propertyName)：判断给定属性是否可被 for-in 枚举（属性名需为字符串）
   - toLocaleString()：返回反映对象本地化执行环境的字符串表示
   - toString()：返回对象的字符串表示
   - valueOf()：返回对象的字符串/数值/布尔值表示（通常与 toString() 返回值相同）
