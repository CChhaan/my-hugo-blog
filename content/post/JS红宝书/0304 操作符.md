---
# 文章标题
title: 3.4 操作符
# 文章内容摘要
# description: 本文详细介绍了 Git 这一分布式版本控制系统的优点，对比了 Windows 与 macOS/Linux 系统下的常用命令，讲解了 vim 操作模式及常用命令，还阐述了 Git 的基本配置、特定项目配置和命令缩写设置等内容。
# 文章内容关键字
keywords: JavaScript 操作符，ECMA-262 操作符标准，位操作符 (补码 / 移位), 相等操作符 (== 与 ===), 布尔操作符 (短路特性)
# 发表日期
date: 2025-01-10
summary: 本章详细介绍了 JavaScript 中的操作符，包括一元操作符、位操作符、布尔操作符等，并对比了不同操作符之间的差异。
# 分类
categories:
  - JS红宝书
# 标签
tags:
  - JavaScript
  - ECMAScript
  - 前端开发
  - 操作符
---

ECMA-262 描述了一组可用于操作数据值的操作符，ES 中的操作符可用于各种值，在应用给对象时，操作符通常会调用 `valueOf()` 或 `toString()` 方法来取得可以计算的值

## 一元操作符

只操作一个值的操作符叫一元操作符

### 递增递减操作符

- 前缀递增操作符：给数值加 1，语法为 `++变量`；前缀递减操作符：从数值减 1，语法为 `--变量`；无论使用前缀递增还是前缀递减，变量的值都会在语句被求值之前改变。
- 递增和递减的后缀版：语法分别是 `变量++` 和 `变量--`，与前缀版的主要区别在于，后缀版递增和递减在语句被求值后才发生。
- 适用范围：这四个操作符可用于任何值（字符串、布尔值、浮点值、对象等），遵循如下规则：
  - 字符串：若为有效的数值形式，转换为数值再应用改变，变量类型由字符串变为数值；若不是有效的数值形式，变量值设为 `NaN`，类型由字符串变为数值。
  - 布尔值：若为 `false`，转换为 0 再应用改变；若为 `true`，转换为 1 再应用改变，变量类型均由布尔值变为数值。
  - 浮点值：直接加 1 或减 1。
  - 对象：调用其 `valueOf()` 方法取得可操作的值，对该值应用上述规则；若结果为 `NaN`，则调用 `toString()` 并再次应用其他规则，变量类型由对象变为数值。

### 一元加和减

- 一元加：由一个加号 `+` 表示（语法：`+变量`），对数值无影响；若应用到非数值，会执行与 `Number()` 转型函数相同的类型转换。
- 一元减：由一个减号 `-` 表示（语法：`-变量`），主要用于把数值变为负值；若应用到非数值，会先执行与 `Number()` 转型函数相同的类型转换，再取负值。

## 位操作符

- 有符号整数存储规则：使用 32 位，前 31 位表示整数值，第 32 位为符号位（0 表示正，1 表示负）；正值以二进制格式存储（31 位中每一位代表 2 的幂，空位以 0 填充）；负值以二补数（补码）存储，计算步骤为：

  1. 确定绝对值的二进制表示；

  2. 求一补数（反码，0 变 1、1 变 0）；

  3. 给结果加 1。

- 处理有符号整数：无法直接访问第 31 位，ES 会记录相关信息；将负值输出为二进制字符串时，会得到前面加了减号的绝对值（转换过程先求二补数，再以逻辑形式表示）。
- 后台转换逻辑：对 ES 中的数值应用位操作符时，64 位数值先转换为 32 位数值，执行位操作后，再将结果从 32 位转换为 64 位存储（过程如同处理 32 位数值）。
- 特殊值处理：`NaN` 和 `Infinity` 在位操作中均被当作 0 处理。
- 非数值处理：若将位操作符应用到非数值，先使用 `Number()` 函数将其转换为数值，再应用位操作，最终结果为数值。

### 按位非

- 符号：波浪符 `~`，作用是返回数值的一补数。
- 效果：对数值取反并减 1，位操作速度比常规取反减 1 更快（基于数值底层表示完成）。

### 按位与

- 符号：和号 `&`，需两个操作数。
- 规则：将两个数的每一位对齐，基于真值表执行操作，仅当两个位都是 1 时返回 1，任一为 0 则返回 0。

### 按位或

- 符号：管道符 `|`，需两个操作数。
- 规则：至少一位为 1 时返回 1，两位都是 0 时返回 0。

### 按位异或

- 符号：脱字符 `^`，需两个操作数。
- 规则：仅当一位为 1（另一位为 0）时返回 1，两位都是 1 或都是 0 则返回 0。

### 左移

- 符号：两个小于号 `<<`，按指定位数将数值的所有位向左移动。
- 规则：以 0 填充空位（保证结果为完整 32 位数值），保留操作数值的符号。

### 有符号右移

- 符号：两个大于号 `>>`，将数值的所有 32 位向右移，保留符号。
- 规则：是左移的逆运算；右移后空位出现在左侧（符号位之后），ES 用符号位的值填充空位以得到完整数值。

### 无符号右移

- 符号：三个大于号 `>>>`，将数值的所有 32 位向右移。
- 规则：正数的无符号右移与有符号右移结果相同；负数可能差异极大；无论符号位是什么，均用 0 填充空位。

## 布尔操作符

### 逻辑非

- 符号：一个叹号 `!`，可应用于 ES 中任何值，始终返回布尔值。
- 操作逻辑：先将操作数转换为布尔值，再对其取反，遵循如下规则：
  - 操作数是对象 → 返回 `false`。
  - 操作数是空字符串 → 返回 `true`；非空字符串 → 返回 `false`。
  - 操作数是数值 0 → 返回 `true`；非 0 数值 → 返回 `false`。
  - 操作数是 `null`、`NaN`、`undefined` → 均返回 `true`。
- 转换布尔值：同时使用两个叹号 `!!`，相当于调用转型函数 `Boolean()`。

### 逻辑与

- 符号：两个和号 `&&`，应用于两个值，操作数不限于布尔值（不一定返回布尔值）。
- 规则：
  - 第一个操作数是对象 → 返回第二个操作数。
  - 第二个操作数是对象 → 仅当第一个操作数求值为 `true` 时，才返回该对象。
  - 两个操作数都是对象 → 返回第二个操作数。
  - 有一个操作数是 `null`/`NaN`/`undefined` → 返回 `null`/`NaN`/`undefined`。
- 短路特性：若第一个操作数决定结果（为 `false`），则不对第二个操作数求值（结果不可能为 `true`）。

### 逻辑或

- 符号：两个管道符 `||`，操作数不限于布尔值（不一定返回布尔值）。
- 规则：
  - 第一个操作数是对象 → 返回第一个操作数。
  - 第一个操作数求值为 `false` → 返回第二个操作数。
  - 两个操作数都是对象 → 返回第一个操作数。
  - 两个操作数都是 `null` → 返回 `null`；都是 `NaN` → 返回 `NaN`；都是 `undefined` → 返回 `undefined`。
- 短路特性：若第一个操作数求值为 `true`，则不对第二个操作数求值。
- 应用场景：避免给变量赋值 `null` 或 `undefined`，示例：
  ```js
  let myObject = preferredObject || backupObject;
  ```

## 乘性操作符

### 乘法操作符

- 符号：一个星号 `*`，用于计算两个数值的乘积。
- 特殊值处理：
  - 操作数都是数值 → 执行常规乘法运算。
  - 任一操作数是 `NaN` → 返回 `NaN`。
  - `Infinity * 0 = NaN`；`Infinity` 乘非零有限值 → 按第二个操作数符号返回 `Infinity` 或 `-Infinity`；`Infinity * Infinity = Infinity`。
  - 非数值操作数 → 后台先用 `Number()` 转换为数值，再应用上述规则。

### 除法操作符

- 符号：一个斜杠 `/`，用于计算第一个操作数除以第二个操作数的商。
- 特殊值处理：
  - 操作数都是数值 → 执行常规除法运算。
  - 任一操作数是 `NaN` → 返回 `NaN`。
  - `0 / 0 = NaN`；`Infinity / Infinity = NaN`；非 0 有限值除以 0 → 按第一个操作数符号返回 `Infinity` 或 `-Infinity`；`Infinity` 除以任何数值 → 按第二个操作数符号返回 `Infinity` 或 `-Infinity`。
  - 非数值操作数 → 后台先用 `Number()` 转换为数值，再应用上述规则。

### 取模操作符

- 符号：一个百分比符号 `%`。
- 特殊值处理：
  - 操作数都是数值 → 执行常规除法运算，返回余数。
  - 无限值 % 有限值 = `NaN`；有限值 % 0 = `NaN`；`Infinity % Infinity = NaN`。
  - 有限值 % 无限值 = 有限值（被除数）；被除数是 0 且除数不是 0 → 返回 0。
  - 非数值操作数 → 后台先用 `Number()` 转换为数值，再应用上述规则。

## 指数操作符（ES7 新增）

- 功能：`Math.pow()` 函数的操作符形式，符号为 `**`，示例：`Math.pow(3, 2) === 3 ** 2`（结果均为 9）。
- 赋值操作符：配套的指数赋值操作符 `**=`。

## 加性操作符

### 加法操作符

- 符号：`+`，用于求两个数的和，操作数类型不同时规则不同：
  - 两个操作数都是数值：执行加法运算，遵循规则：1. 任一为 `NaN` → 返回 `NaN`；2. `Infinity + Infinity = Infinity`；3. `-Infinity + -Infinity = -Infinity`；4. `Infinity + -Infinity = NaN`；5. `+0 + +0 = +0`；6. `-0 + +0 = +0`；7. `-0 + -0 = -0`。
  - 有一个操作数是字符串：1. 两个都是字符串 → 第二个字符串拼接到第一个后面；2. 仅一个是字符串 → 另一个操作数转换为字符串后拼接。
  - 有操作数是对象、数值或布尔值：调用其 `toString()` 方法获取字符串，再按字符串规则处理；`undefined` 和 `null` 调用 `String()` 函数，分别获取 `"undefined"` 和 `"null"`。

### 减法操作符

- 符号：`-`，规则如下：
  - 两个操作数都是数值 → 执行数学减法运算并返回结果。
  - 任一操作数是 `NaN` → 返回 `NaN`。
  - `Infinity - Infinity = NaN`；`-Infinity - -Infinity = NaN`；`Infinity - -Infinity = Infinity`；`-Infinity - Infinity = -Infinity`。
  - `+0 - +0 = +0`；`+0 - -0 = -0`；`-0 - -0 = +0`。
  - 操作数是字符串、布尔值、`null` 或 `undefined` → 后台用 `Number()` 转为数值，再按数值规则运算。
  - 操作数是对象 → 调用其 `valueOf()` 方法取 value；若 value 是 `NaN`，则减法结果为 `NaN`；无 `valueOf()` 方法则调用 `toString()`，将得到的字符串转换为数值后运算。

## 关系操作符

- 包含：小于 `<`、大于 `>`、小于等于 `<=`、大于等于 `>=`，均返回布尔值。
- 不同数据类型处理规则：
  - 操作数都是数值 → 执行数值比较。
  - 操作数都是字符串 → 逐个比较对应字符的 ASCII 编码（大写字母编码小于小写字母编码）。
  - 任一操作数是数值 → 另一个操作数转换为数值后执行数值比较。
  - 任一操作数是布尔值 → 转换为数值后比较。
  - 任一操作数是对象 → 调用其 `valueOf()` 方法取结果，按前面规则比较；无 `valueOf()` 方法则调用 `toString()`，取结果后按规则比较。
- 特殊情况：任何关系操作符涉及 `NaN` 比较时，均返回 `false`。

## 相等操作符

### 等于（==）和不等于（!=）

- 功能：`==` 若操作数相等则返回 `true`；`!=` 若操作数不相等则返回 `true`；两者均先进行类型转换，再判断是否相等。
- 类型转换规则：
  - 任一操作数是布尔值 → 转换为数值（`false` 转 0，`true` 转 1）后比较。
  - 一个操作数是字符串、另一个是数值 → 尝试将字符串转换为数值后比较。
  - 一个操作数是对象、另一个不是 → 调用对象的 `valueOf()` 方法取原始值，按前面规则比较。
- 比较规则：
  - `null` 和 `undefined` 相等，且不能转换为其他类型后比较。
  - 任一操作数是 `NaN` → `==` 返回 `false`，`!=` 返回 `true`。
  - 两个操作数都是对象 → 比较是否为同一个对象（指向同一对象则 `==` 返回 `true`，否则不相等）。

### 全等（===）和不全等（!==）

- 功能：与 `==`/`!=` 类似，但比较时不转换操作数类型。
- 规则：`===` 仅当两个操作数不转换类型就相等时返回 `true`；`!==` 仅当两个操作数不转换类型就不相等时返回 `true`。
- 示例：`null !== undefined`（两者数据类型不同）。

## 条件操作符

- 语法：`variable = boolean_expression ? true_value : false_value`。
- 逻辑：根据 `boolean_expression` 的值给 `variable` 赋值；若 `boolean_expression` 为 `true`，则赋值 `true_value`；若为 `false`，则赋值 `false_value`。

## 赋值操作符

- 简单赋值：符号 `=`，将右侧值赋给左侧变量。
- 复合赋值：乘性、加性或位操作符后跟 `=`，示例：`num = num + 10` 等价于 `num += 10`。

## 逗号操作符

- 功能：在一条语句中执行多个操作；赋值时分隔值，最终返回表达式中最后一个值。
- 示例：
  ```js
  let num1 = 1,
    num2 = 2,
    num3 = 3;
  let num = (1, 2, 3); // num 的值是 3
  ```
