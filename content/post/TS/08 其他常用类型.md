---
# 文章标题
title: 8. 其他常用类型
# 文章内容摘要
# description:
# 文章内容关键字
keywords: TypeScript 索引访问类型, TypeScript 条件类型, TypeScript 映射类型, TypeScript 模板字面量类型, TypeScript 类型系统, TypeScript infer 用法, TypeScript keyof, TypeScript 泛型条件类型, TypeScript 映射修饰符, TypeScript 类型重映射, TypeScript 类型编程, TypeScript 高级类型
# 发表日期
date: 2025-06-26
summary: 本文主要介绍了 TypeScript 中的一些常用类型，包括索引访问类型、条件类型、映射类型、模板字面量类型等，并详细解释了这些类型的使用方法和注意事项。
# 分类
categories:
  - Typescript文档阅读
# 标签
tags:
  - TypeScript
  - 前端开发
---

## 索引访问类型

可以使用 **索引访问类型** 来查找另一种类型的特定属性。

索引类型本身也是一种类型，因此可以使用 **联合类型**、`keyof` 或其他类型。

```ts
type Person = { age: number; name: string; alive: boolean };
type Age = Person["age"]; // type Age = number

type I1 = Person["age" | "name"]; // type I1 = string | number
type I2 = Person[keyof Person]; // type I2 = string | number | boolean
```

如果尝试索引不存在的属性，会看到错误。

使用 `number` 可以获取数组元素的类型。可与 `typeof` 结合使用，方便捕获数组字面量的元素类型。

```ts
const MyArray = [
  { name: "Alice", age: 15 },
  { name: "Bob", age: 23 },
  { name: "Eve", age: 38 },
];

type Person = (typeof MyArray)[number];
// type Person = { name: string; age: number; }

type Age = (typeof MyArray)[number]["age"]; // type Age = number
type Age2 = Person["age"]; // type Age2 = number
```

索引时只能使用类型，不能使用 `const` 创建变量引用。

可以使用 **类型别名** 实现类似的重构风格。

```ts
const key = "age";
type Age = Person[key]; // error

type key = "age";
type Age = Person[key];
```

## 条件类型

**条件类型** 用于描述输入和输出类型之间的关系。

语法形式：

```ts
SomeType extends OtherType ? TrueType : FalseType;

type Example1 = Dog extends Animal ? number : string;
```

当 `extends` 左侧类型可赋值给右侧类型时，返回第一个分支（true 分支）；否则返回第二个分支（false 分支）。

条件类型在与泛型结合使用时更强大。

```ts
type NameOrId<T extends number | string> = T extends number
  ? IdLabel
  : NameLabel;
```

### 条件类型约束

条件类型的真分支可进一步**约束泛型类型**。

```ts
type MessageOf<T> = T extends { message: unknown } ? T["message"] : never;
```

### 在条件类型内推断

使用 `infer` 关键字可从 true 分支中比较的类型进行推断。

```ts
type Flatten<T> = T extends any[] ? T[number] : T;
type Flatten<Type> = Type extends Array<infer Item> ? Item : Type;
```

可用 `infer` 编写辅助类型别名：

```ts
type GetReturnType<Type> = Type extends (...args: never[]) => infer Return
  ? Return
  : never;
```

若类型具有多个调用签名（如重载函数），推断将基于 **最后一个签名**。

### 分配条件类型

当条件类型作用于泛型类型时，若泛型为联合类型，则条件类型会**分配到每个成员**。

```ts
type ToArray<Type> = Type extends any ? Type[] : never;
type StrArrOrNumArr = ToArray<string | number>; // string[] | number[]
```

若要避免分配性，可用方括号包裹 `extends` 两侧：

```ts
type ToArrayNonDist<Type> = [Type] extends [any] ? Type[] : never;
type ArrOfStrOrNum = ToArrayNonDist<string | number>; // (string | number)[]
```

## 映射类型

映射类型建立在索引签名语法之上，用于声明尚未提前声明的属性类型。

映射类型是通用类型，使用 `PropertyKey` 的联合（通常通过 `keyof` 创建）迭代键以创建类型。

```ts
type OptionsFlags<Type> = {
  [Property in keyof Type]: boolean;
};

type Features = {
  darkMode: () => void;
  newUserProfile: () => void;
};

type FeatureOptions = OptionsFlags<Features>;
// { darkMode: boolean; newUserProfile: boolean; }
```

### 映射修饰符

可在映射时使用两个修饰符：

- `readonly`：控制可变性。
- `?`：控制可选性。

可通过前缀 `-` 或 `+` 删除或添加修饰符（默认 `+`）。

```ts
type CreateMutable<Type> = {
  -readonly [Property in keyof Type]: Type[Property];
};

type Concrete<Type> = {
  [Property in keyof Type]-?: Type[Property];
};
```

### 通过 as 进行键重新映射

可在映射类型中使用 `as` 子句重新映射键。

可使用 **模板字面量类型** 从原有属性名生成新属性名。

通过条件类型生成 `never` 可过滤掉键。

```ts
type MappedTypeWithNewProperties<Type> = {
  [Properties in keyof Type as NewKeyType]: Type[Properties];
};

type Getters<Type> = {
  [Property in keyof Type as `get${Capitalize<
    string & Property
  >}`]: () => Type[Property];
};

type RemoveKindField<Type> = {
  [Property in keyof Type as Exclude<Property, "kind">]: Type[Property];
};
```

可映射任意联合类型，不仅限于 `string | number | symbol`。

## 模板字面量类型

模板字面量类型建立在 **字符串字面量类型** 之上，可通过联合扩展多个字符串。

语法与 JavaScript 的模板字符串相同，但用于 **类型位置**。

与具体字面量类型组合时，会通过连接生成新的字符串字面量类型。

当插值位置使用联合时，结果为所有可能字符串字面量的联合。

每个插值位置的联合都会进行**交叉相乘**。

```ts
type AllLocaleIDs = `${EmailLocaleIDs | FooterLocaleIDs}_id`;
type Lang = "en" | "ja" | "pt";

type LocaleMessageIDs = `${Lang}_${AllLocaleIDs}`;
// type LocaleMessageIDs = "en_welcome_email_id" | "en_email_heading_id" | "en_footer_title_id" | "en_footer_sendoff_id" | "ja_welcome_email_id" | "ja_email_heading_id" | "ja_footer_title_id" | "ja_footer_sendoff_id" | "pt_welcome_email_id" | "pt_email_heading_id" | "pt_footer_title_id" | "pt_footer_sendoff_id"
```

### 内建字符串操作类型

TypeScript 内建以下字符串操作类型（性能优化版，非 `.d.ts` 定义）：

- **Uppercase\<StringType>**：将字符串中每个字符转换为大写。
- **Lowercase\<StringType>**：将字符串中每个字符转换为小写。
- **Capitalize\<StringType>**：将字符串首字母转换为大写。
- **Uncapitalize\<StringType>**：将字符串首字母转换为小写。

这些类型直接使用 JavaScript 字符串运行时函数，不具备区域设置感知功能。
