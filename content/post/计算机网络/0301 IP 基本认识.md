---
# 文章标题
title: 3.1 IP 基本认识
# 文章内容摘要
# description:
# 文章内容关键字
keywords: IP 地址, IPv4, IPv6, 网络层, TCP/IP 模型, MAC 地址, IP 数据包, CIDR, 无分类地址, 子网掩码, 公有 IP, 私有 IP, ICANN, IANA, CNNIC, 路由控制, 路由表, 环回地址, MTU, IP 分片, IP 重组, IPv6 地址类型, IPv6 自动配置, IPv6 安全性, IPv6 包头, 网络通信, A类地址, B类地址, C类地址, 多播地址, 广播地址, 任播地址
# 发表日期
date: 2025-09-26
summary: 本节详细介绍了 IP 地址的基本概念、分类、无分类地址 CIDR、公有 IP 地址与私有 IP 地址、IP 地址与路由控制、IP 分片与重组等内容。
# 分类
categories:
  - 计算机网络
# 标签
tags:
  - 计算机基础
  - 计算机网络
  - IP
---

## IP

**IP**：位于 **TCP/IP 参考模型** 的 **网络层（第三层）**。

网络层的作用：实现 **主机与主机** 之间的通信，称为 **点对点（end to end）通信**。

**MAC 地址**用于实现**直接连接**的设备之间通信；而 **IP 地址** 则用于**没有直连的两个网络**之间的通信。

**源 IP 地址** 和 **目标 IP 地址** 不会在传输过程中改变（前提：未使用 NAT）。**源 MAC 地址** 和 **目标 MAC 地址** 会发生变化。

## IP 地址

**IPv4 地址**：由 **32 位** 正整数表示，计算机以 **二进制** 形式处理。

为便于记忆，采用 **点分十进制** 表示方式，分为四组，每组 8 位转换为十进制（例如：192.168.1.1）。

IP 地址是与网卡绑定的，而不是与主机台数关联。

服务器和路由器通常有 **多个网卡**，因此它们可能有多个 **IP 地址**。

### IP 地址的分类

**A、B、C 类** 分为网络号和主机号，具体用法见下表：

- **A 类**（网络号为 0）：支持大量主机，适用于大型网络。
- **B 类**（网络号为 1）：适用于中型网络。
- **C 类**（网络号为 2）：适用于小型网络。

**D 类**：无主机号，常用于多播。

**E 类**：预留地址，尚未使用。

**主机号全为 1**：用于广播（**广播地址**）。

**主机号全为 0**：用于指定某个网络。

广播地址：用于在同一网络内广播数据包，分为 本地广播 和 直接广播。

**本地广播**：在同一网络内广播。

**直接广播**：跨网络广播。

**D 类地址**范围：`224.0.0.0 ~ 239.255.255.255`。

三类多播地址：

- **224.0.0.0 ~ 224.0.0.255**：仅局域网内有效，不可通过路由器转发。
- **224.0.1.0 ~ 238.255.255.255**：可用于 Internet。
- **239.0.0.0 ~ 239.255.255.255**：本地管理组播地址，仅在局部网络内有效。

**A、B、C 类的缺陷**：

- **C 类**：最多只能容纳 254 台主机，通常不能满足大规模网络需求。
- **B 类**：最多容纳 6 万多台主机，过于庞大，对于多数企业而言是一种资源浪费。

### 无分类地址 CIDR

**CIDR**（无类别域间路由选择）取消了传统的 A/B/C 类地址概念，而是将 IP 地址划分为 **网络号** 和 **主机号** 两部分。

**表示方式**：a.b.c.d/x，其中 **/x** 表示网络号的位数，范围是 **0 ~ 32**，剩余是主机号。

**子网掩码**：用来屏蔽主机号，留下网络号部分。使用 **AND 运算**，将子网掩码和 IP 地址结合，得出网络号。

子网掩码还可用于 **划分子网**，将主机地址分为两个部分：**子网网络地址**和**子网主机地址**

### 公有 IP 地址与私有 IP 地址

**公有 IP 地址**：由 **ICANN**分配，全球唯一。

**私有 IP 地址**：由组织内部 IT 人员自行管理、分配，可以重复使用。常用于组织内部通信。

**ICANN**：全球公有 IP 地址分配组织。

**IANA**：负责全球 IP 地址分配。

**CNNIC**：负责中国的 IP 地址分配。

### IP 地址与路由控制

**网络地址** 用于路由控制。

**路由控制表**：记录网络地址与下一跳路由器的 IP 地址。

在主机和路由器上都会有各自的路由器控制表。

发送 IP 数据包时，根据目标 IP 地址找到相应的路由并转发。

路由器通过最长匹配原则，将数据包转发至正确的路由。

环回地址是在同一台计算机上的程序之间进行网络通信时所使用的一个默认地址。

**环回地址（127.0.0.1 或 localhost）**：用于同一台计算机上的程序间通信。

### IP 分片与重组

MTU（最大传输单元）：不同类型的数据链路有不同的 **MTU**，决定了单个数据包的最大大小。

当 IP 数据包大于 MTU 时，数据包会被**分片**。

数据包的**重组**只能由目标主机完成，路由器不负责重组。

分片丢失会导致整个 IP 数据报失效。

TCP 在传输时会避免在 IP 层进行分片，减少数据丢失的风险。UDP 尽量避免发送超过 MTU 的数据包。

### IPv6 基本认识

**IPv4**：32 位地址，约 42 亿个可用地址，早已分配完毕。

**IPv6**：128 位地址，支持极大量的地址，并且具有更好的安全性与扩展性。

IPv6 的特点：

**自动配置**：无需 DHCP 服务器即可自动分配 IP 地址。

**简化包头**：固定 40 字节，去掉了包头校验和，减轻路由器负担。

**安全性增强**：防伪造 IP 和防止线路窃听。

IPv6 地址长度是 128 位，每 16 位为一组，用 **冒号 `:`** 分隔。连续的 0 可使用 **`::`** 代替，但只能出现一次。

IPv6 地址类型：

- **单播地址**：一对一通信。
- **组播地址**：一对多通信。
- **任播地址**：与最近的节点通信，选择最接近的节点，由路由协议决定。
- 没有广播地址

IPv6 地址类别：

- **链路本地单播地址**：仅限同一链路内的通信，IPv4 没有类似地址。
- **唯一本地地址**：内网单播地址，类似于 IPv4 私有 IP。
- **全局单播地址**：互联网通信地址，类似于 IPv4 公有 IP。

### IPv4 首部与 IPv6 首部

IPv6 改进：

**取消包头校验和**：由于数据链路层和传输层已进行校验，IPv6 取消了这一项。

**取消分片与重组**：分片仅在源与目标主机之间进行，不再允许在中间路由器进行。

**删除选项字段**：不再是标准首部的一部分，改为可能出现在“下一个首部”位置。
