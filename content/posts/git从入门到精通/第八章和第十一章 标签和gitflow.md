---
title: "第八章和第十一章 标签和Gitflow"
date: 2025-08-20T19:49:53
draft: false
---

### Git 标签相关知识

#### 一、标签的概念与作用

- 标签是 Git 中指向某个 commit 的指示标，常用于标记软件开发的特定里程碑（如版本发布）。
- 标签本质类似 “贴纸”，标签一旦创建，默认不会随新提交移动，删除标签不会影响对应的 commit 或文件。

#### 二、标签的类型及使用

1. **轻量标签**

   - 特点：仅作为指向某个 commit 的指示标，不含额外信息。

   - 创建方式：直接指定 commit（若不指定则默认当前 commit）

     ```bash
     git tag <标签名> [commit的SHA-1值]
     ```

     示例：

     ```
     git tag big_cats 51d54ff
     ```

   - 存储：指向某个 commit 的 SHA-1 值，存于 `.git/refs/tags` 目录。

2. **有附注的标签**

   - 特点：包含更多信息（如标签创建者、时间、描述等），推荐使用。

   - 创建方式：通过```-a ```参数创建，```-m ```可添加描述（若无```-m```则弹出 vim 编辑器）

     ```bash
git tag <标签名> [commit的SHA-1值] -a -m "描述信息"
     ```

     示例：

     ```
git tag big_cats 51d64ff -a -m "big cats are comming"
     ```

   - 存储：指向某个 Tag 对象的 SHA-1 值，该 Tag 对象再指向对应的 commit，存于 `.git/refs/tags` 目录。

3. **标签的查看与删除**

   - 查看标签信息：`git show <标签名>`（如 `git show big_cats`）
   - 删除标签：`git tag -d <标签名>`（如 `git tag -d big_cats`）

#### 三、标签与分支的区别

| 对比项   | 标签                           | 分支                     |
| -------- | ------------------------------ | ------------------------ |
| 存储位置 | `.git/refs/tags` 目录          | `.git/refs/heads` 目录   |
| 内容格式 | 40 字节的 SHA-1 值             | 40 字节的 SHA-1 值       |
| 动态性   | 固定不变，不会随新 commit 移动 | 会随新 commit 推进而移动 |
| 本质类比 | 固定的 “贴纸”                  | 可移动的 “标签”          |
| 删除影响 | 不影响被指向的对象             | 不影响被指向的对象       |

### Git Flow 分支模型

Git Flow 是一种**规范化的分支管理流程**，适用于中大型项目的协同开发，核心是通过不同类型分支的分工保证代码质量。

Git Flow 建议的分支类型及功能如下，其中 `master` 和 `develop` 为长期分支，其他为临时分支：

1. **master 分支**
   - 功能：存放稳定、可随时上线的项目版本。
   - 特性：
     - 禁止直接提交代码，仅通过合并`hotfix`或`release`分支更新。
     - 每次合并后需打标签（如`v1.0.0`），便于版本追溯。
2. **develop 分支**
   - 功能：开发的基础分支
   - 特性：
     - 从`master`分支创建，所有`feature`分支从`develop`分出。
     - 功能完成后合并回`develop`
3. **hotfix 分支**
   - 功能：修复在线产品的紧急问题。
   - 来源：从 `master` 分支划分。
   - 合并目标：修复后合并回 `master`（确保线上版本修复）和 `develop`（避免后续版本重现问题）。
4. **release 分支**
   - 功能：上线前的测试与准备，基于成熟的 `develop` 分支创建。
   - 合并目标：测试完成后合并到 `master`（作为上线版本）和 `develop`（同步测试中修复的问题）。
5. **feature 分支**
   - 功能：开发新功能。
   - 来源：从 `develop` 分支划分。
   - 合并目标：功能完成后合并回 `develop` 分支。

#### Git Flow 的优缺点（面试可能问及）

- **优点**：流程规范，适合多人协作的大型项目，版本管理清晰，线上风险低。
- **缺点**：流程较繁琐（对小型项目或快速迭代场景不够灵活），需团队严格遵守规范。

#### 简化版替代方案（补充）

- 对于小型项目或敏捷开发，可采用**GitHub Flow**（仅`main`分支 + 功能分支，通过 PR 合并，部署后打标签），更轻量高效。
