<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>My New Hugo Site</title>
<meta name="keywords" content="">
<meta name="description" content="新增、初始 Repository


命令：git init


作用：在目录中创建一个.git目录，该目录是 Git 进行版本控制的核心。若移除.git目录，Git 将失去对该目录的控制权，可用于提供不含版控记录的内容给客户。


把文件交给 Git 管控


查看目录状态：git status

显示文件状态：Untracked（未跟踪，新文件）、Modified（已修改未暂存）、Staged（已暂存待提交）。



添加文件到暂存区：




单个文件：git add &lt;文件名&gt;，将指定文件安置到暂存区。


特定类型文件：git add *.html，把所有后缀为.html的文件加到暂存区。


全部文件：


git add &ndash;all（或git add -A），添加项目中所有异动文件到暂存区；


git add .，添加当前目录及子目录中的异动文件到暂存区，对目录外文件无效。






注意事项：git add后若再次改动文件，改动内容不会自动加入暂存区，暂存区仍为之前的版本，此时git status会显示文件同时处于Modified（工作区）和Staged（暂存区）状态。


提交到存储库：git commit -m &lsquo;init commit&rsquo;，-m后为提交说明，将暂存区内容永久保存到存储库。每次commit仅处理暂存区内容，未加入暂存区的文件不会被提交。


空提交：git commit &ndash;allow-empty -m &ldquo;&quot;，加上&ndash;allow-empty参数，无文件变动时强制提交（常用于触发 CI/CD 流程或标记重要节点）。


工作区、暂存区与存储库


关系：git add将文件从工作目录移至暂存区，git commit将暂存区内容移至存储库，完成commit才算整个流程结束。


简化提交：git commit -a -m &ldquo;update content&rdquo;，-a参数可缩短流程，跳过git add，直接将已跟踪文件的修改提交（新文件Untracked不生效，仍需手动add）。


查看记录

基本查看：git log，越新的信息越靠上，显示作者、提交时间、提交说明等。
精简查看：

git log --oneline：每行显示一条记录（哈希前缀 &#43; 说明）。
git log --graph --oneline：图形化展示分支合并历史（直观看到分支流向）。


按作者筛选：git log  &ndash;author=&ldquo;Sherly\|Eddie&rdquo;，\|表示 “或者”，可查找多个人的提交记录。
按提交信息筛选：git log &ndash;grep=&ldquo;LOL&rdquo;，从提交信息中搜索含关键字的内容。
按内容筛选：git log -S &lsquo;Ruby&rsquo;，在所有提交文件中搜索符合特定条件的内容。
按时间筛选：git log &ndash;since=&ldquo;9am&rdquo; &ndash;until=&ldquo;12am&rdquo; &ndash;after=&ldquo;2017-01&rdquo;，找出 2017 年 1 月之后每天早上 9 点到 12 点之间的提交。

删除文件或变更文件名

删除文件：



系统命令删除：使用rm或资源管理器删除后，git add将改动加到暂存区再提交。">
<meta name="author" content="">
<link rel="canonical" href="https://example.org/posts/git%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E7%B2%BE%E9%80%9A/%E7%AC%AC%E4%BA%94%E7%AB%A0-%E5%BC%80%E5%A7%8B%E4%BD%BF%E7%94%A8git/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.36819bea596090d8b48cf10d9831382996197aa7e4fc86f792f7c08c9ca4d23b.css" integrity="sha256-NoGb6llgkNi0jPENmDE4KZYZeqfk/Ib3kvfAjJyk0js=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://example.org/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://example.org/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://example.org/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://example.org/apple-touch-icon.png">
<link rel="mask-icon" href="https://example.org/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://example.org/posts/git%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E7%B2%BE%E9%80%9A/%E7%AC%AC%E4%BA%94%E7%AB%A0-%E5%BC%80%E5%A7%8B%E4%BD%BF%E7%94%A8git/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:url" content="https://example.org/posts/git%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E7%B2%BE%E9%80%9A/%E7%AC%AC%E4%BA%94%E7%AB%A0-%E5%BC%80%E5%A7%8B%E4%BD%BF%E7%94%A8git/">
  <meta property="og:site_name" content="My New Hugo Site">
  <meta property="og:title" content="My New Hugo Site">
  <meta property="og:description" content="新增、初始 Repository 命令：git init
作用：在目录中创建一个.git目录，该目录是 Git 进行版本控制的核心。若移除.git目录，Git 将失去对该目录的控制权，可用于提供不含版控记录的内容给客户。
把文件交给 Git 管控 查看目录状态：git status
显示文件状态：Untracked（未跟踪，新文件）、Modified（已修改未暂存）、Staged（已暂存待提交）。 添加文件到暂存区：
单个文件：git add &lt;文件名&gt;，将指定文件安置到暂存区。
特定类型文件：git add *.html，把所有后缀为.html的文件加到暂存区。
全部文件：
git add –all（或git add -A），添加项目中所有异动文件到暂存区；
git add .，添加当前目录及子目录中的异动文件到暂存区，对目录外文件无效。
注意事项：git add后若再次改动文件，改动内容不会自动加入暂存区，暂存区仍为之前的版本，此时git status会显示文件同时处于Modified（工作区）和Staged（暂存区）状态。
提交到存储库：git commit -m ‘init commit’，-m后为提交说明，将暂存区内容永久保存到存储库。每次commit仅处理暂存区内容，未加入暂存区的文件不会被提交。
空提交：git commit –allow-empty -m “&#34;，加上–allow-empty参数，无文件变动时强制提交（常用于触发 CI/CD 流程或标记重要节点）。
工作区、暂存区与存储库 关系：git add将文件从工作目录移至暂存区，git commit将暂存区内容移至存储库，完成commit才算整个流程结束。
简化提交：git commit -a -m “update content”，-a参数可缩短流程，跳过git add，直接将已跟踪文件的修改提交（新文件Untracked不生效，仍需手动add）。
查看记录 基本查看：git log，越新的信息越靠上，显示作者、提交时间、提交说明等。 精简查看： git log --oneline：每行显示一条记录（哈希前缀 &#43; 说明）。 git log --graph --oneline：图形化展示分支合并历史（直观看到分支流向）。 按作者筛选：git log –author=“Sherly\|Eddie”，\|表示 “或者”，可查找多个人的提交记录。 按提交信息筛选：git log –grep=“LOL”，从提交信息中搜索含关键字的内容。 按内容筛选：git log -S ‘Ruby’，在所有提交文件中搜索符合特定条件的内容。 按时间筛选：git log –since=“9am” –until=“12am” –after=“2017-01”，找出 2017 年 1 月之后每天早上 9 点到 12 点之间的提交。 删除文件或变更文件名 删除文件： 系统命令删除：使用rm或资源管理器删除后，git add将改动加到暂存区再提交。">
  <meta property="og:locale" content="en-us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="">
<meta name="twitter:description" content="新增、初始 Repository


命令：git init


作用：在目录中创建一个.git目录，该目录是 Git 进行版本控制的核心。若移除.git目录，Git 将失去对该目录的控制权，可用于提供不含版控记录的内容给客户。


把文件交给 Git 管控


查看目录状态：git status

显示文件状态：Untracked（未跟踪，新文件）、Modified（已修改未暂存）、Staged（已暂存待提交）。



添加文件到暂存区：




单个文件：git add &lt;文件名&gt;，将指定文件安置到暂存区。


特定类型文件：git add *.html，把所有后缀为.html的文件加到暂存区。


全部文件：


git add &ndash;all（或git add -A），添加项目中所有异动文件到暂存区；


git add .，添加当前目录及子目录中的异动文件到暂存区，对目录外文件无效。






注意事项：git add后若再次改动文件，改动内容不会自动加入暂存区，暂存区仍为之前的版本，此时git status会显示文件同时处于Modified（工作区）和Staged（暂存区）状态。


提交到存储库：git commit -m &lsquo;init commit&rsquo;，-m后为提交说明，将暂存区内容永久保存到存储库。每次commit仅处理暂存区内容，未加入暂存区的文件不会被提交。


空提交：git commit &ndash;allow-empty -m &ldquo;&quot;，加上&ndash;allow-empty参数，无文件变动时强制提交（常用于触发 CI/CD 流程或标记重要节点）。


工作区、暂存区与存储库


关系：git add将文件从工作目录移至暂存区，git commit将暂存区内容移至存储库，完成commit才算整个流程结束。


简化提交：git commit -a -m &ldquo;update content&rdquo;，-a参数可缩短流程，跳过git add，直接将已跟踪文件的修改提交（新文件Untracked不生效，仍需手动add）。


查看记录

基本查看：git log，越新的信息越靠上，显示作者、提交时间、提交说明等。
精简查看：

git log --oneline：每行显示一条记录（哈希前缀 &#43; 说明）。
git log --graph --oneline：图形化展示分支合并历史（直观看到分支流向）。


按作者筛选：git log  &ndash;author=&ldquo;Sherly\|Eddie&rdquo;，\|表示 “或者”，可查找多个人的提交记录。
按提交信息筛选：git log &ndash;grep=&ldquo;LOL&rdquo;，从提交信息中搜索含关键字的内容。
按内容筛选：git log -S &lsquo;Ruby&rsquo;，在所有提交文件中搜索符合特定条件的内容。
按时间筛选：git log &ndash;since=&ldquo;9am&rdquo; &ndash;until=&ldquo;12am&rdquo; &ndash;after=&ldquo;2017-01&rdquo;，找出 2017 年 1 月之后每天早上 9 点到 12 点之间的提交。

删除文件或变更文件名

删除文件：



系统命令删除：使用rm或资源管理器删除后，git add将改动加到暂存区再提交。">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://example.org/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "",
      "item": "https://example.org/posts/git%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E7%B2%BE%E9%80%9A/%E7%AC%AC%E4%BA%94%E7%AB%A0-%E5%BC%80%E5%A7%8B%E4%BD%BF%E7%94%A8git/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "",
  "name": "",
  "description": "新增、初始 Repository 命令：git init\n作用：在目录中创建一个.git目录，该目录是 Git 进行版本控制的核心。若移除.git目录，Git 将失去对该目录的控制权，可用于提供不含版控记录的内容给客户。\n把文件交给 Git 管控 查看目录状态：git status\n显示文件状态：Untracked（未跟踪，新文件）、Modified（已修改未暂存）、Staged（已暂存待提交）。 添加文件到暂存区：\n单个文件：git add \u0026lt;文件名\u0026gt;，将指定文件安置到暂存区。\n特定类型文件：git add *.html，把所有后缀为.html的文件加到暂存区。\n全部文件：\ngit add \u0026ndash;all（或git add -A），添加项目中所有异动文件到暂存区；\ngit add .，添加当前目录及子目录中的异动文件到暂存区，对目录外文件无效。\n注意事项：git add后若再次改动文件，改动内容不会自动加入暂存区，暂存区仍为之前的版本，此时git status会显示文件同时处于Modified（工作区）和Staged（暂存区）状态。\n提交到存储库：git commit -m \u0026lsquo;init commit\u0026rsquo;，-m后为提交说明，将暂存区内容永久保存到存储库。每次commit仅处理暂存区内容，未加入暂存区的文件不会被提交。\n空提交：git commit \u0026ndash;allow-empty -m \u0026ldquo;\u0026quot;，加上\u0026ndash;allow-empty参数，无文件变动时强制提交（常用于触发 CI/CD 流程或标记重要节点）。\n工作区、暂存区与存储库 关系：git add将文件从工作目录移至暂存区，git commit将暂存区内容移至存储库，完成commit才算整个流程结束。\n简化提交：git commit -a -m \u0026ldquo;update content\u0026rdquo;，-a参数可缩短流程，跳过git add，直接将已跟踪文件的修改提交（新文件Untracked不生效，仍需手动add）。\n查看记录 基本查看：git log，越新的信息越靠上，显示作者、提交时间、提交说明等。 精简查看： git log --oneline：每行显示一条记录（哈希前缀 + 说明）。 git log --graph --oneline：图形化展示分支合并历史（直观看到分支流向）。 按作者筛选：git log \u0026ndash;author=\u0026ldquo;Sherly\\|Eddie\u0026rdquo;，\\|表示 “或者”，可查找多个人的提交记录。 按提交信息筛选：git log \u0026ndash;grep=\u0026ldquo;LOL\u0026rdquo;，从提交信息中搜索含关键字的内容。 按内容筛选：git log -S \u0026lsquo;Ruby\u0026rsquo;，在所有提交文件中搜索符合特定条件的内容。 按时间筛选：git log \u0026ndash;since=\u0026ldquo;9am\u0026rdquo; \u0026ndash;until=\u0026ldquo;12am\u0026rdquo; \u0026ndash;after=\u0026ldquo;2017-01\u0026rdquo;，找出 2017 年 1 月之后每天早上 9 点到 12 点之间的提交。 删除文件或变更文件名 删除文件： 系统命令删除：使用rm或资源管理器删除后，git add将改动加到暂存区再提交。\n",
  "keywords": [
    
  ],
  "articleBody": "新增、初始 Repository 命令：git init\n作用：在目录中创建一个.git目录，该目录是 Git 进行版本控制的核心。若移除.git目录，Git 将失去对该目录的控制权，可用于提供不含版控记录的内容给客户。\n把文件交给 Git 管控 查看目录状态：git status\n显示文件状态：Untracked（未跟踪，新文件）、Modified（已修改未暂存）、Staged（已暂存待提交）。 添加文件到暂存区：\n单个文件：git add \u003c文件名\u003e，将指定文件安置到暂存区。\n特定类型文件：git add *.html，把所有后缀为.html的文件加到暂存区。\n全部文件：\ngit add –all（或git add -A），添加项目中所有异动文件到暂存区；\ngit add .，添加当前目录及子目录中的异动文件到暂存区，对目录外文件无效。\n注意事项：git add后若再次改动文件，改动内容不会自动加入暂存区，暂存区仍为之前的版本，此时git status会显示文件同时处于Modified（工作区）和Staged（暂存区）状态。\n提交到存储库：git commit -m ‘init commit’，-m后为提交说明，将暂存区内容永久保存到存储库。每次commit仅处理暂存区内容，未加入暂存区的文件不会被提交。\n空提交：git commit –allow-empty -m “\"，加上–allow-empty参数，无文件变动时强制提交（常用于触发 CI/CD 流程或标记重要节点）。\n工作区、暂存区与存储库 关系：git add将文件从工作目录移至暂存区，git commit将暂存区内容移至存储库，完成commit才算整个流程结束。\n简化提交：git commit -a -m “update content”，-a参数可缩短流程，跳过git add，直接将已跟踪文件的修改提交（新文件Untracked不生效，仍需手动add）。\n查看记录 基本查看：git log，越新的信息越靠上，显示作者、提交时间、提交说明等。 精简查看： git log --oneline：每行显示一条记录（哈希前缀 + 说明）。 git log --graph --oneline：图形化展示分支合并历史（直观看到分支流向）。 按作者筛选：git log –author=“Sherly\\|Eddie”，\\|表示 “或者”，可查找多个人的提交记录。 按提交信息筛选：git log –grep=“LOL”，从提交信息中搜索含关键字的内容。 按内容筛选：git log -S ‘Ruby’，在所有提交文件中搜索符合特定条件的内容。 按时间筛选：git log –since=“9am” –until=“12am” –after=“2017-01”，找出 2017 年 1 月之后每天早上 9 点到 12 点之间的提交。 删除文件或变更文件名 删除文件： 系统命令删除：使用rm或资源管理器删除后，git add将改动加到暂存区再提交。\ngit rm命令：直接删除文件并加入暂存区，无需再add。\n仅移除管控：git rm –cached 文件名，–cached参数使文件不被真的删除，仅从 Git 管控中移除。\n变更文件名： 系统命令修改：mv 旧名 新名，Git 会视为删除旧文件和新增新文件，需git add将改动加到暂存区。\ngit mv命令：直接完成文件名变更并加入暂存区，减少操作步骤。\nGit 处理逻辑：Git 通过文件内容（而非文件名）计算 SHA-1 哈希值，改名仅生成新的 Tree 对象（记录目录结构），Blob 对象（文件内容）不变，因此效率极高。 修改 commit 记录 不建议方式：删除.git目录。\n推荐方式：\n使用git rebase命令改动历史记录。\n用git reset命令删除提交，整理后重新提交。\n改动最后一次提交：git commit –amend -m “xxx”，–amend参数会重新计算并生成新的 commit 对象，仅适用于未推送到远程的提交（已推送的提交修改会导致协作冲突）。\n追加文件到最近一次提交： 用git reset删除最后一次提交，加入新文件后重新提交。\ngit commit –amend –no-edit，–no-edit表示不编辑提交信息，将文件并入最近一次提交。\n新增目录 Git 根据文件内容计算生成对象，空目录无法提交，需在空目录中放一个文件（通常命名为.gitkeep，约定俗成的占位文件），使 Git 感应到目录存在。 忽略文件 设置方法：在项目目录中放置.gitignore文件，设置忽略规则，文件不存在可手动新增。\n生效范围：.gitignore文件即使未提交或推送，也会生效，对规则设置后存入的文件有效，对已存在文件无效。\n常用规则写法（面试高频）：\n# 注释：单行注释。 *.log：忽略所有.log 文件。 node_modules/：忽略整个 node_modules 目录。 /temp：仅忽略根目录下的 temp 文件 / 目录（不忽略子目录中的 temp）。 !README.md：排除规则（不忽略 README.md，即使被前面的*匹配）。 强制添加：git add -f 文件名称，-f参数可无视忽略规则添加文件。\n套用规则到已存在文件：使用git rm –cached。\n清除忽略文件：git clean -fX，-f为强制删除，-X清除已被忽略的文件。\n查看特定文件的 commit 记录 git log 文件名，查看单一文件的提交记录；git log -p 文件名，查看该文件每次提交的改动内容。 查找代码作者 git blame index.html，查看指定文件每一行代码的最后修改作者、时间及对应的 commit 识别代码。\ngit blame -L 5,10 index.html，-L参数指定显示第 5-10 行的信息。\n恢复删除或修改的文件 恢复单个删除文件：git checkout index.html。\n恢复所有删除文件：git checkout .，也可将改动文件恢复到上一次 commit 的状态。\n原理：git checkout后接文件名或路径时，会把暂存区或存储库中的文件复制到工作目录，覆盖当前内容（若文件在暂存区有修改，则用暂存区内容；否则用版本库最新内容）。\n恢复到指定版本：git checkout HEAD~2 .，用距离现在两个版本以上的文件覆盖当前工作目录并更新暂存区。\nreset 相关操作 拆掉最后一次 commit： 相对做法：git reset e12d8ef^，^代表前一次，^^代表前两次，e12d8ef~5代表前五次；因 HEAD 与 master 通常指向同一 commit，也可写成git reset HEAD^或git reset master^。\n绝对做法：git reset 85e7e30，直接指明退回的 commit。\n参数区别： –mixed（默认）：删除暂存区文件，不影响工作目录，拆出的文件留在工作目录但不在暂存区。\n–soft：工作目录与暂存区文件均不删除，拆出的文件直接放在暂存区，仅 HEAD 移动。\n–hard：工作目录和暂存区文件均被删除。\n本质：git reset并非删除或重新设置 commit，只是前往指定 commit。\n恢复 hard 模式 reset 的 commit：可通过该 commit 的 SHA-1 值reset回去，–hard参数可强迫放弃 reset 后的改动；若未记录 SHA-1 值，可用git reflog或git log -g查找记录。\n提交文件的部分内容 git add -p，-p参数会询问是否将文件区域加到暂存区，选y加入整个文件，选e进入编辑器，删除不想加入的行，存档后即可将部分内容加到暂存区。 HEAD 是指向某一分支的指标，通常指向当前所在分支，.git/HEAD文件记录其内容。detached HEAD状态指 HEAD 未指向任何分支。 detached HEAD 状态：HEAD 直接指向某个 commit（而非分支），通常由git checkout 触发。 注意：在此状态下提交的内容会成为 “游离 commit”，切换分支后可能丢失，需通过git checkout -b 新分支保留。 SHA-1 值 是一种杂凑算法的结果，以 40 个十六进制数字呈现，输入相同则输出相同，输入不同则输出不同，Git 中所有对象编号均由此算法产生，SHA-1 重复概率极低。\nBlob 对象 SHA-1 组成：“blob” 字样 + 空白字节 + 输入内容长度 + null 结束符号 + 输入内容；tree 物件第一项为 “tree”，commit 为 “commit”，以此类推。\n.git 目录内容 核心对象\nBlob 对象：存放文件内容，git add时根据文件内容计算 SHA-1 值，以 SHA-1 值前两个字节为目录名，后 38 个字节为文件名，存于.git/objects目录，内容经压缩。此设计可避免.git/object目录因文件过多降低效率。\nTree 对象：存放目录及文件名，指向 Blob 对象或其他 Tree 对象，形成有向无环图（DAG）。\ncommit 对象：包含指向的 Tree 对象、提交时间、作者、提交信息，除第一个 commit 外，均指向前一次 commit。\ntag 对象：指向特定 Commit（轻量 Tag 直接存 Commit 哈希，附注 Tag 为独立对象，含注释）。\n小结：\n文件内容转为 Blob 对象存储。\n目录及文件名存于 Tree 对象，指向 Blob 或其他 Tree 对象。\nCommit 对象指向 Tree 对象，除首个外均指向前一次 Commit。\nTag 对象指向 Commit 对象。\n分支指向 Commit 对象，随提交移动。\n推送后，.git/refs下会多出remote目录，存放远端分支，指向 Commit 对象。\nHEAD 指向当前分支。\n存储特点：\ngit add时，即使文件仅改一字，因 SHA-1 值不同，也会生成全新 Blob 对象，而非记录差异，使checkout时无需拼凑历史记录，效率高。\n资源回收机制：\n作用：以高效方式压缩对象及制作下标，将.git/objects目录下对象打包到.git/objects/pack目录，打包时用类似差异备份方式缩小体积。\n触发时机：.git/objects目录对象或 packfile 对象过多时；执行git push命令推至远端服务器时；也可手动执行git gc触发。\n",
  "wordCount" : "385",
  "inLanguage": "en",
  "datePublished": "0001-01-01T00:00:00Z",
  "dateModified": "0001-01-01T00:00:00Z",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://example.org/posts/git%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E7%B2%BE%E9%80%9A/%E7%AC%AC%E4%BA%94%E7%AB%A0-%E5%BC%80%E5%A7%8B%E4%BD%BF%E7%94%A8git/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "My New Hugo Site",
    "logo": {
      "@type": "ImageObject",
      "url": "https://example.org/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://example.org/" accesskey="h" title="My New Hugo Site (Alt + H)">My New Hugo Site</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      
    </h1>
    <div class="post-meta">

</div>
  </header> 
  <div class="post-content"><h2 id="新增初始-repository">新增、初始 Repository<a hidden class="anchor" aria-hidden="true" href="#新增初始-repository">#</a></h2>
<ul>
<li>
<p><strong>命令</strong>：git init</p>
</li>
<li>
<p><strong>作用</strong>：在目录中创建一个.git目录，该目录是 Git 进行版本控制的核心。若移除.git目录，Git 将失去对该目录的控制权，可用于提供不含版控记录的内容给客户。</p>
</li>
</ul>
<h2 id="把文件交给-git-管控">把文件交给 Git 管控<a hidden class="anchor" aria-hidden="true" href="#把文件交给-git-管控">#</a></h2>
<ol>
<li>
<p><strong>查看目录状态</strong>：git status</p>
<ul>
<li>显示文件状态：<code>Untracked</code>（未跟踪，新文件）、<code>Modified</code>（已修改未暂存）、<code>Staged</code>（已暂存待提交）。</li>
</ul>
</li>
<li>
<p><strong>添加文件到暂存区</strong>：</p>
</li>
</ol>
<ul>
<li>
<p>单个文件：git add &lt;文件名&gt;，将指定文件安置到暂存区。</p>
</li>
<li>
<p>特定类型文件：git add *.html，把所有后缀为.html的文件加到暂存区。</p>
</li>
<li>
<p>全部文件：</p>
<ul>
<li>
<p>git add &ndash;all（或<code>git add -A</code>），添加项目中所有异动文件到暂存区；</p>
</li>
<li>
<p>git add .，添加当前目录及子目录中的异动文件到暂存区，对目录外文件无效。</p>
</li>
</ul>
</li>
</ul>
<ol>
<li>
<p><strong>注意事项</strong>：git add后若再次改动文件，改动内容不会自动加入暂存区，暂存区仍为之前的版本，此时<code>git status</code>会显示文件同时处于<code>Modified</code>（工作区）和<code>Staged</code>（暂存区）状态。</p>
</li>
<li>
<p><strong>提交到存储库</strong>：git commit -m &lsquo;init commit&rsquo;，-m后为提交说明，将暂存区内容永久保存到存储库。每次commit仅处理暂存区内容，未加入暂存区的文件不会被提交。</p>
</li>
<li>
<p><strong>空提交</strong>：git commit &ndash;allow-empty -m &ldquo;&quot;，加上&ndash;allow-empty参数，无文件变动时强制提交（常用于触发 CI/CD 流程或标记重要节点）。</p>
</li>
</ol>
<h2 id="工作区暂存区与存储库">工作区、暂存区与存储库<a hidden class="anchor" aria-hidden="true" href="#工作区暂存区与存储库">#</a></h2>
<ul>
<li>
<p><strong>关系</strong>：git add将文件从工作目录移至暂存区，git commit将暂存区内容移至存储库，完成commit才算整个流程结束。</p>
</li>
<li>
<p><strong>简化提交</strong>：git commit -a -m &ldquo;update content&rdquo;，-a参数可缩短流程，跳过<code>git add</code>，直接将<strong>已跟踪文件</strong>的修改提交（新文件<code>Untracked</code>不生效，仍需手动<code>add</code>）。</p>
</li>
</ul>
<h2 id="查看记录">查看记录<a hidden class="anchor" aria-hidden="true" href="#查看记录">#</a></h2>
<ol>
<li><strong>基本查看</strong>：git log，越新的信息越靠上，显示作者、提交时间、提交说明等。</li>
<li><strong>精简查看</strong>：
<ul>
<li><code>git log --oneline</code>：每行显示一条记录（哈希前缀 + 说明）。</li>
<li><code>git log --graph --oneline</code>：图形化展示分支合并历史（直观看到分支流向）。</li>
</ul>
</li>
<li><strong>按作者筛选</strong>：git log  &ndash;author=&ldquo;Sherly\|Eddie&rdquo;，\|表示 “或者”，可查找多个人的提交记录。</li>
<li><strong>按提交信息筛选</strong>：git log &ndash;grep=&ldquo;LOL&rdquo;，从提交信息中搜索含关键字的内容。</li>
<li><strong>按内容筛选</strong>：git log -S &lsquo;Ruby&rsquo;，在所有提交文件中搜索符合特定条件的内容。</li>
<li><strong>按时间筛选</strong>：git log &ndash;since=&ldquo;9am&rdquo; &ndash;until=&ldquo;12am&rdquo; &ndash;after=&ldquo;2017-01&rdquo;，找出 2017 年 1 月之后每天早上 9 点到 12 点之间的提交。</li>
</ol>
<h2 id="删除文件或变更文件名">删除文件或变更文件名<a hidden class="anchor" aria-hidden="true" href="#删除文件或变更文件名">#</a></h2>
<ol>
<li><strong>删除文件</strong>：</li>
</ol>
<ul>
<li>
<p>系统命令删除：使用rm或资源管理器删除后，git add将改动加到暂存区再提交。</p>
</li>
<li>
<p>git rm命令：直接删除文件并加入暂存区，无需再add。</p>
</li>
<li>
<p>仅移除管控：git rm &ndash;cached 文件名，&ndash;cached参数使文件不被真的删除，仅从 Git 管控中移除。</p>
</li>
</ul>
<ol start="2">
<li><strong>变更文件名</strong>：</li>
</ol>
<ul>
<li>
<p>系统命令修改：mv 旧名 新名，Git 会视为删除旧文件和新增新文件，需git add将改动加到暂存区。</p>
</li>
<li>
<p>git mv命令：直接完成文件名变更并加入暂存区，减少操作步骤。</p>
</li>
</ul>
<ol start="3">
<li><strong>Git 处理逻辑</strong>：Git 通过<strong>文件内容</strong>（而非文件名）计算 SHA-1 哈希值，改名仅生成新的 Tree 对象（记录目录结构），Blob 对象（文件内容）不变，因此效率极高。</li>
</ol>
<h2 id="修改-commit-记录">修改 commit 记录<a hidden class="anchor" aria-hidden="true" href="#修改-commit-记录">#</a></h2>
<ol>
<li>
<p><strong>不建议方式</strong>：删除.git目录。</p>
</li>
<li>
<p><strong>推荐方式</strong>：</p>
</li>
</ol>
<ul>
<li>
<p>使用git rebase命令改动历史记录。</p>
</li>
<li>
<p>用git reset命令删除提交，整理后重新提交。</p>
</li>
<li>
<p>改动最后一次提交：git commit &ndash;amend -m &ldquo;xxx&rdquo;，&ndash;amend参数会重新计算并生成新的 commit 对象，仅适用于<strong>未推送到远程</strong>的提交（已推送的提交修改会导致协作冲突）。</p>
</li>
</ul>
<ol start="3">
<li><strong>追加文件到最近一次提交</strong>：</li>
</ol>
<ul>
<li>
<p>用git reset删除最后一次提交，加入新文件后重新提交。</p>
</li>
<li>
<p>git commit &ndash;amend &ndash;no-edit，&ndash;no-edit表示不编辑提交信息，将文件并入最近一次提交。</p>
</li>
</ul>
<h2 id="新增目录">新增目录<a hidden class="anchor" aria-hidden="true" href="#新增目录">#</a></h2>
<ul>
<li>Git 根据文件内容计算生成对象，空目录无法提交，需在空目录中放一个文件（通常命名为<code>.gitkeep</code>，约定俗成的占位文件），使 Git 感应到目录存在。</li>
</ul>
<h2 id="忽略文件">忽略文件<a hidden class="anchor" aria-hidden="true" href="#忽略文件">#</a></h2>
<ol>
<li>
<p><strong>设置方法</strong>：在项目目录中放置.gitignore文件，设置忽略规则，文件不存在可手动新增。</p>
</li>
<li>
<p><strong>生效范围</strong>：.gitignore文件即使未提交或推送，也会生效，对规则设置后存入的文件有效，对已存在文件无效。</p>
</li>
<li>
<p><strong>常用规则写法</strong>（面试高频）：</p>
<ul>
<li><code># 注释</code>：单行注释。</li>
<li><code>*.log</code>：忽略所有.log 文件。</li>
<li><code>node_modules/</code>：忽略整个 node_modules 目录。</li>
<li><code>/temp</code>：仅忽略根目录下的 temp 文件 / 目录（不忽略子目录中的 temp）。</li>
<li><code>!README.md</code>：排除规则（不忽略 README.md，即使被前面的<code>*</code>匹配）。</li>
</ul>
</li>
<li>
<p><strong>强制添加</strong>：git add -f 文件名称，-f参数可无视忽略规则添加文件。</p>
</li>
<li>
<p><strong>套用规则到已存在文件</strong>：使用git rm &ndash;cached。</p>
</li>
<li>
<p><strong>清除忽略文件</strong>：git clean -fX，-f为强制删除，-X清除已被忽略的文件。</p>
</li>
</ol>
<h2 id="查看特定文件的-commit-记录">查看特定文件的 commit 记录<a hidden class="anchor" aria-hidden="true" href="#查看特定文件的-commit-记录">#</a></h2>
<ul>
<li>git log 文件名，查看单一文件的提交记录；git log -p 文件名，查看该文件每次提交的改动内容。</li>
</ul>
<h2 id="查找代码作者">查找代码作者<a hidden class="anchor" aria-hidden="true" href="#查找代码作者">#</a></h2>
<ul>
<li>
<p>git blame index.html，查看指定文件每一行代码的最后修改作者、时间及对应的 commit 识别代码。</p>
</li>
<li>
<p>git blame -L 5,10 index.html，-L参数指定显示第 5-10 行的信息。</p>
</li>
</ul>
<h2 id="恢复删除或修改的文件">恢复删除或修改的文件<a hidden class="anchor" aria-hidden="true" href="#恢复删除或修改的文件">#</a></h2>
<ul>
<li>
<p>恢复单个删除文件：git checkout index.html。</p>
</li>
<li>
<p>恢复所有删除文件：git checkout .，也可将改动文件恢复到上一次 commit 的状态。</p>
</li>
<li>
<p>原理：git checkout后接文件名或路径时，会把暂存区或存储库中的文件复制到工作目录，覆盖当前内容（若文件在暂存区有修改，则用暂存区内容；否则用版本库最新内容）。</p>
</li>
<li>
<p>恢复到指定版本：git checkout HEAD~2 .，用距离现在两个版本以上的文件覆盖当前工作目录并更新暂存区。</p>
</li>
</ul>
<h2 id="reset-相关操作">reset 相关操作<a hidden class="anchor" aria-hidden="true" href="#reset-相关操作">#</a></h2>
<ol>
<li><strong>拆掉最后一次 commit</strong>：</li>
</ol>
<ul>
<li>
<p>相对做法：git reset e12d8ef^，^代表前一次，^^代表前两次，e12d8ef~5代表前五次；因 HEAD 与 master 通常指向同一 commit，也可写成git reset HEAD^或git reset master^。</p>
</li>
<li>
<p>绝对做法：git reset 85e7e30，直接指明退回的 commit。</p>
</li>
</ul>
<ol start="2">
<li><strong>参数区别</strong>：</li>
</ol>
<ul>
<li>
<p>&ndash;mixed（默认）：删除暂存区文件，不影响工作目录，拆出的文件留在工作目录但不在暂存区。</p>
</li>
<li>
<p>&ndash;soft：工作目录与暂存区文件均不删除，拆出的文件直接放在暂存区，仅 HEAD 移动。</p>
</li>
<li>
<p>&ndash;hard：工作目录和暂存区文件均被删除。</p>
</li>
</ul>
<ol start="3">
<li>
<p><strong>本质</strong>：git reset并非删除或重新设置 commit，只是前往指定 commit。</p>
</li>
<li>
<p><strong>恢复 hard 模式 reset 的 commit</strong>：可通过该 commit 的 SHA-1 值reset回去，&ndash;hard参数可强迫放弃 reset 后的改动；若未记录 SHA-1 值，可用git reflog或git log -g查找记录。</p>
</li>
</ol>
<h2 id="提交文件的部分内容">提交文件的部分内容<a hidden class="anchor" aria-hidden="true" href="#提交文件的部分内容">#</a></h2>
<ul>
<li>git add -p，-p参数会询问是否将文件区域加到暂存区，选y加入整个文件，选e进入编辑器，删除不想加入的行，存档后即可将部分内容加到暂存区。</li>
</ul>
<h2 id="head">HEAD<a hidden class="anchor" aria-hidden="true" href="#head">#</a></h2>
<ul>
<li>是指向某一分支的指标，通常指向当前所在分支，.git/HEAD文件记录其内容。detached HEAD状态指 HEAD 未指向任何分支。</li>
<li>detached HEAD 状态：HEAD 直接指向某个 commit（而非分支），通常由<code>git checkout &lt;commit哈希&gt;</code>触发。
<ul>
<li>注意：在此状态下提交的内容会成为 “游离 commit”，切换分支后可能丢失，需通过<code>git checkout -b 新分支</code>保留。</li>
</ul>
</li>
</ul>
<h2 id="sha-1-值">SHA-1 值<a hidden class="anchor" aria-hidden="true" href="#sha-1-值">#</a></h2>
<ul>
<li>
<p>是一种杂凑算法的结果，以 40 个十六进制数字呈现，输入相同则输出相同，输入不同则输出不同，Git 中所有对象编号均由此算法产生，SHA-1 重复概率极低。</p>
</li>
<li>
<p>Blob 对象 SHA-1 组成：“blob” 字样 + 空白字节 + 输入内容长度 + null 结束符号 + 输入内容；tree 物件第一项为 “tree”，commit 为 “commit”，以此类推。</p>
</li>
</ul>
<h2 id="git-目录内容">.git 目录内容<a hidden class="anchor" aria-hidden="true" href="#git-目录内容">#</a></h2>
<p><strong>核心对象</strong></p>
<ol>
<li>
<p><strong>Blob 对象</strong>：存放文件内容，git add时根据文件内容计算 SHA-1 值，以 SHA-1 值前两个字节为目录名，后 38 个字节为文件名，存于.git/objects目录，内容经压缩。此设计可避免.git/object目录因文件过多降低效率。</p>
</li>
<li>
<p><strong>Tree 对象</strong>：存放目录及文件名，指向 Blob 对象或其他 Tree 对象，形成有向无环图（DAG）。</p>
</li>
<li>
<p><strong>commit 对象</strong>：包含指向的 Tree 对象、提交时间、作者、提交信息，除第一个 commit 外，均指向前一次 commit。</p>
</li>
<li>
<p><strong>tag 对象</strong>：指向特定 Commit（轻量 Tag 直接存 Commit 哈希，附注 Tag 为独立对象，含注释）。</p>
</li>
<li>
<p><strong>小结</strong>：</p>
</li>
</ol>
<ul>
<li>
<p>文件内容转为 Blob 对象存储。</p>
</li>
<li>
<p>目录及文件名存于 Tree 对象，指向 Blob 或其他 Tree 对象。</p>
</li>
<li>
<p>Commit 对象指向 Tree 对象，除首个外均指向前一次 Commit。</p>
</li>
<li>
<p>Tag 对象指向 Commit 对象。</p>
</li>
<li>
<p>分支指向 Commit 对象，随提交移动。</p>
</li>
<li>
<p>推送后，.git/refs下会多出remote目录，存放远端分支，指向 Commit 对象。</p>
</li>
<li>
<p>HEAD 指向当前分支。</p>
</li>
</ul>
<p><strong>存储特点</strong>：</p>
<ol>
<li>
<p>git add时，即使文件仅改一字，因 SHA-1 值不同，也会生成全新 Blob 对象，而非记录差异，使checkout时无需拼凑历史记录，效率高。</p>
</li>
<li>
<p><strong>资源回收机制</strong>：</p>
</li>
</ol>
<ul>
<li>
<p>作用：以高效方式压缩对象及制作下标，将.git/objects目录下对象打包到.git/objects/pack目录，打包时用类似差异备份方式缩小体积。</p>
</li>
<li>
<p>触发时机：.git/objects目录对象或 packfile 对象过多时；执行git push命令推至远端服务器时；也可手动执行git gc触发。</p>
</li>
</ul>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="https://example.org/">My New Hugo Site</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
