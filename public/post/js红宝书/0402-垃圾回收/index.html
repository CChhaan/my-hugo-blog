<!doctype html><html lang=zh-CN data-theme=light><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=theme-color content="#222" media="(prefers-color-scheme: light)"><meta name=generator content="Hugo 0.148.2"><link rel="shortcut icon" type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=/imgs/icons/favicon_16x16.ico><link rel=icon type=image/png sizes=32x32 href=/imgs/icons/favicon_32_32.ico><link rel=apple-touch-icon sizes=180x180 href=/imgs/icons/apple_touch_icon_next.png><meta itemprop=name content="4.3 垃圾回收"><meta itemprop=description content="博客，记录生活，分享技术"><meta name=description content="博客，记录生活，分享技术"><meta itemprop=datePublished zgotmplz><meta itemprop=dateModified zgotmplz><meta itemprop=image content="/imgs/avatar.jpg"><meta itemprop=keywords content="JavaScript,ECMAScript,前端开发,性能优化"><meta property="og:type" content="article"><meta property="og:title" content="4.3 垃圾回收"><meta property="og:description" content="博客，记录生活，分享技术"><meta property="og:image" content="/imgs/avatar.jpg"><meta property="og:image:width" content="312"><meta property="og:image:height" content="312"><meta property="og:image:type" content="image/jpeg/png/svg/jpg"><meta property="og:url" content="/post/js%E7%BA%A2%E5%AE%9D%E4%B9%A6/0402-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/"><meta property="og:site_name" content="拾光博客 - 永浩"><meta property="og:locale" content="zh-CN"><meta property="article:author" content="张永浩"><meta property="article:published_time" content="2025-01-11 00:00:00 +0000 UTC"><meta property="article:modified_time" content="2025-01-11 00:00:00 +0000 UTC"><link type=text/css rel=stylesheet href=/js/3rd/font-awesome/6.7.2/css/all.min.css><link type=text/css rel=stylesheet href=/js/3rd/animate.css/3.1.1/animate.min.css><link type=text/css rel=stylesheet href=/js/3rd/viewerjs/1.11.6/viewer.min.css><link rel=stylesheet href="/css/main.min.css?=1764508344"><style type=text/css>.post-footer hr:after{content:""}.flinks-list-footer hr:after{content:""}</style><link rel=stylesheet type=text/css href="/css/syntax.css?=1764508344"><script type=text/javascript>(function(){localDB={set:function(e,t,n){if(n===0)return;const s=new Date,o=n*864e5,i={value:t,expiry:s.getTime()+o};localStorage.setItem(e,JSON.stringify(i))},get:function(e){const t=localStorage.getItem(e);if(!t)return 0[0];const n=JSON.parse(t),s=new Date;return s.getTime()>n.expiry?(localStorage.removeItem(e),0[0]):n.value}},theme={active:function(){const e=localDB.get("theme");if(e==null)return;theme.toggle(e),window.matchMedia("(prefers-color-scheme: dark)").addListener(function(e){theme.toggle(e.matches?"dark":"light")})},toggle:function(e){document.documentElement.setAttribute("data-theme",e),localDB.set("theme",e,2);const t=document.querySelector("iframe.giscus-frame");if(t){const n={setConfig:{theme:e}};t.contentWindow.postMessage({giscus:n},"https://giscus.app")}}},theme.active()})(window)</script><script type=text/javascript>document.addEventListener("DOMContentLoaded",()=>{var e=document.createElement("script");e.charset="UTF-8",e.src="https://hm.baidu.com/hm.js?b24e80791ffe27729131ff00ed7471b2",e.async="true",document.head.appendChild(e)})</script><script type=text/javascript>document.addEventListener("DOMContentLoaded",()=>{var e=document.createElement("script");e.charset="UTF-8",e.src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js",e.async=!1,e.defer=!0,document.head.appendChild(e),e.onload=function(){NexT.utils.fmtBusuanzi()}})</script><title>4.3 垃圾回收 - 拾光博客 - 永浩</title><noscript><link rel=stylesheet href=/css/noscript.css></noscript></head><body itemscope itemtype=http://schema.org/WebPage class=use-motion><div class=headband></div><main class=main><header class=header itemscope itemtype=http://schema.org/WPHeader><div class=header-inner><div class=site-brand-container><div class=site-nav-toggle><div class=toggle aria-label role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div></div><div class=site-meta><a href=/ class=brand rel=start><i class=logo-line></i><h1 class=site-title>拾光博客 - 永浩</h1><i class=logo-line></i></a><p class=site-subtitle itemprop=description>日积跬步，以致千里</p></div><div class=site-nav-right><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class=site-nav><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href=/ class=hvr-icon-pulse rel=section><i class="fa fa-home hvr-icon"></i>首页</a></li><li class="menu-item menu-item-categories"><a href=/categories/ class=hvr-icon-pulse rel=section><i class="fa fa-archive hvr-icon"></i>分类</a></li><li class="menu-item menu-item-tags"><a href=/tags/ class=hvr-icon-pulse rel=section><i class="fa fa-tags hvr-icon"></i>标签</a></li><li class="menu-item menu-item-archives"><a href=/archives/ class=hvr-icon-pulse rel=section><i class="fa fa-calendar hvr-icon"></i>归档
<span class=badge>164</span></a></li><li class="menu-item menu-item-commonweal"><a href=/404.html class=hvr-icon-pulse rel=section><i class="fa fa-heartbeat hvr-icon"></i>公益 404</a></li><li class="menu-item menu-item-search"><a role=button class="popup-trigger hvr-icon-pulse"><i class="fa fa-search fa-fw hvr-icon"></i>搜索</a></li></ul></nav><div class=search-pop-overlay><div class="popup search-popup"><div class=search-header><span class=search-icon><i class="fa fa-search"></i></span><div class=search-input-container><input autocomplete=off autocapitalize=off maxlength=80 placeholder=搜索... spellcheck=false type=search class=search-input></div><span class=popup-btn-close role=button><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class=search-result-icon><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></div><div class="toggle sidebar-toggle" role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div><aside class=sidebar><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class=sidebar-nav><li class=sidebar-nav-toc>文章目录</li><li class=sidebar-nav-overview>站点概览</li></ul><div class=sidebar-panel-container><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><nav id=TableOfContents><ul><li><a href=#垃圾回收基础>垃圾回收基础</a></li><li><a href=#常见垃圾回收算法>常见垃圾回收算法</a><ul><li><a href=#标记清理>标记清理</a></li><li><a href=#引用计数>引用计数</a></li></ul></li><li><a href=#主动内存管理>主动内存管理</a></li><li><a href=#隐藏类与性能优化以-v8-引擎为例>隐藏类与性能优化（以 V8 引擎为例）</a><ul><li><a href=#隐藏类的共享条件>隐藏类的共享条件</a></li><li><a href=#破坏隐藏类共享的行为及解决方案>破坏隐藏类共享的行为及解决方案</a></li></ul></li><li><a href=#内存泄漏>内存泄漏</a></li><li><a href=#静态分配与对象池>静态分配与对象池</a><ul><li><a href=#问题背景>问题背景</a></li><li><a href=#解决方案对象池>解决方案：对象池</a></li></ul></li></ul></nav></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop=author itemscope itemtype=http://schema.org/Person><img class=site-author-image itemprop=image alt=张永浩 src=/imgs/img-lazy-loading.gif data-src=/imgs/avatar.jpg><p class=site-author-name itemprop=name>张永浩</p><div class=site-description itemprop=description>博客，记录生活，分享技术</div></div><div class="site-state-wrap site-overview-item animated"><nav class=site-state><div class="site-state-item site-state-posts"><a href=/archives/><span class=site-state-item-count>164</span>
<span class=site-state-item-name>日志</span></a></div><div class="site-state-item site-state-categories"><a href=/categories/><span class=site-state-item-count>12</span>
<span class=site-state-item-name>分类</span></a></div><div class="site-state-item site-state-tags"><a href=/tags/><span class=site-state-item-count>36</span>
<span class=site-state-item-name>标签</span></a></div></nav></div><div class="links-of-social site-overview-item animated"></div><div class="cc-license animated" itemprop=license><a href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh-hans class=cc-opacity rel=noopener target=_blank title=共享知识><img src=/imgs/img-lazy-loading.gif data-src=/imgs/cc/big/by_nc_sa.svg alt=共享知识></a></div><div style=cursor:pointer class="button goto-home" title=返回首页 onclick='window.location.href="https://growyears.netlify.app/"'><i class="fas fa-home"></i>
<span style="margin:0 .5em">返回首页</span></div></div></div></div><div id=siteinfo-card-widget class=sidebar-card-widget><div class=item-headline><i class="fas fa-chart-line"></i>
<span>网站资讯</span></div><div class=siteinfo><div class=siteinfo-item><div class=item-name><i class="fa-solid fa-calendar-check"></i>已运行：</div><div class=item-count id=runTimes data-publishdate="2025-01-08 00:00:00 +0000 UTC"></div></div><div class=siteinfo-item><div class=item-name><i class="fas fa fa-user"></i>总访客数：</div><div class=item-count id=busuanzi_value_site_uv><i class="fa fa-sync fa-spin"></i></div></div><div class=siteinfo-item><div class=item-name><i class="fas fa fa-eye"></i>页面浏览：</div><div class=item-count id=busuanzi_value_site_pv><i class="fa fa-sync fa-spin"></i></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-font"></i>总字数：</div><div class=item-count id=wordsCount data-count=206183></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-mug-hot"></i>阅读约：</div><div class=item-count id=readTimes data-times=494></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-clock-rotate-left"></i>最后更新于：</div><div class=item-count id=last-push-date data-lastpushdate="2025-11-20 00:00:00 +0000 UTC"></div></div></div></div></aside><div class=sidebar-dimmer></div></header><div class=tool-buttons><div id=goto-i18n-translate class=button title=多语言翻译><i class="fas fa-globe"></i></div><div id=toggle-theme class=button title=深浅模式切换><i class="fas fa-adjust"></i></div><div class=back-to-top role=button title=返回顶部><i class="fa fa-arrow-up"></i>
<span>0%</span></div></div><div class=reading-progress-bar></div><a role=button class="book-mark-link book-mark-link-fixed"></a><a href=https://github.com/CChhaan/my-hugo-blog rel="noopener external nofollow noreferrer" target=_blank title="Follow me on GitHub" class="exturl github-corner"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4l13.9-13.8C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentColor" class="octo-body"/></svg></a><noscript><div class=noscript-warning>Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner post posts-expand"><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=/post/js%E7%BA%A2%E5%AE%9D%E4%B9%A6/0402-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/avatar.jpg"><meta itemprop=name content="张永浩"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="张永浩"><meta itemprop=description content="博客，记录生活，分享技术"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="4.3 垃圾回收"><meta itemprop=description content="本章详细介绍了 JavaScript 的垃圾回收机制，包括垃圾回收算法、内存管理、性能优化和内存泄漏等内容。通过学习本章，读者可以更好地理解 JavaScript 的内存管理机制，并掌握如何避免内存泄漏和提高程序性能。"></span><header class=post-header><h1 class=post-title itemprop="name headline">4.3 垃圾回收</h1><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-calendar"></i>
</span><span class=post-meta-item-text title=发表于>发表于：
</span><time title="创建时间：2025-01-11 00:00:00 +00:00" itemprop="dateCreated datePublished" datetime="2025-01-11 00:00:00 +0000 UTC">2025-01-11
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-folder-open"></i>
</span><span class=post-meta-item-text title=分类于>分类于：
</span><span itemprop=about itemscope itemtype=http://schema.org/Thing><a href=/categories/js%E7%BA%A2%E5%AE%9D%E4%B9%A6/ itemprop=url rel=index><span itemprop=name>JS红宝书</span></a></span></span></div><div class=post-meta-items><span class=post-meta-item title=字数><span class=post-meta-item-icon><i class="fas fa-solid fa-file-word"></i>
</span><span class=post-meta-item-text>字数：</span>
<span>1659</span>
</span><span class=post-meta-item title=浏览><span class=post-meta-item-icon><i class="fas fa-solid fa-eye"></i>
</span><span class=post-meta-item-text>浏览：
</span><span id=busuanzi_value_page_pv data-path=/post/js%E7%BA%A2%E5%AE%9D%E4%B9%A6/0402-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/><i class="fa fa-sync fa-spin"></i></span></span></div></div></header><div class="post-body autonumber" itemprop=articleBody>本章详细介绍了 JavaScript 的垃圾回收机制，包括垃圾回收算法、内存管理、性能优化和内存泄漏等内容。通过学习本章，读者可以更好地理解 JavaScript 的内存管理机制，并掌握如何避免内存泄漏和提高程序性能。
<a id=more></a><h2 id=垃圾回收基础>垃圾回收基础
<a class=header-anchor href=#%e5%9e%83%e5%9c%be%e5%9b%9e%e6%94%b6%e5%9f%ba%e7%a1%80></a></h2><p>JS 是<strong>自动垃圾回收语言</strong>，执行环境负责代码运行时的内存管理（自动分配内存、回收闲置资源）。核心逻辑是：周期性判断“不再使用的变量”，释放其占用的内存（垃圾回收程序每隔一定时间自动运行）。</p><h2 id=常见垃圾回收算法>常见垃圾回收算法
<a class=header-anchor href=#%e5%b8%b8%e8%a7%81%e5%9e%83%e5%9c%be%e5%9b%9e%e6%94%b6%e7%ae%97%e6%b3%95></a></h2><h3 id=标记清理>标记清理
<a class=header-anchor href=#%e6%a0%87%e8%ae%b0%e6%b8%85%e7%90%86></a></h3><p>当前 JS 引擎最主流的垃圾回收算法，核心步骤如下：</p><ol><li><strong>标记阶段</strong>：<ul><li>变量进入上下文（如函数内声明变量）时，标记为“存在于上下文”；</li><li>变量离开上下文（如函数执行完毕）时，标记为“离开上下文”；</li><li>垃圾回收程序运行时，先标记内存中所有变量。</li></ul></li><li><strong>清理阶段</strong>：<ul><li>移除“存在于上下文的变量”及“被其引用的变量”的标记；</li><li>剩余带标记的变量=“无法被上下文访问的变量”，视为待回收；</li><li>销毁待回收变量，释放其内存。</li></ul></li></ol><h3 id=引用计数>引用计数
<a class=header-anchor href=#%e5%bc%95%e7%94%a8%e8%ae%a1%e6%95%b0></a></h3><p>早期算法，因缺陷已较少使用，核心逻辑是“通过引用次数判断变量是否可回收”：</p><ol><li><strong>计数规则</strong>：<ul><li>声明变量并赋值引用值时，该值的引用数=1；</li><li>同一值被赋给其他变量，引用数+1；</li><li>保存该值引用的变量被覆盖（如赋值其他值），引用数-1。</li></ul></li><li><strong>回收时机</strong>：当值的引用数=0 时，下次垃圾回收程序运行时释放其内存。</li><li><strong>核心缺陷：循环引用</strong><br>若对象 A 引用对象 B，对象 B 同时引用对象 A，二者引用数永远不会变为 0，导致内存无法回收（如早期 COM 对象场景）。<ul><li>解决方案：不再使用时，主动切断引用（如用 <code>null</code> 覆盖变量，示例：<code>objA = null; objB = null</code>）。</li></ul></li></ol><h2 id=主动内存管理>主动内存管理
<a class=header-anchor href=#%e4%b8%bb%e5%8a%a8%e5%86%85%e5%ad%98%e7%ae%a1%e7%90%86></a></h2><p>优化内存占用的核心是“只保留必要数据”，关键手段如下：</p><ol><li><strong>解除引用</strong><br>数据不再必要时，将其赋值为 <code>null</code>，释放引用（让垃圾回收程序可识别为待回收）。<ul><li>适用场景：<strong>全局变量/全局对象属性</strong>（局部变量超出作用域后会自动解除引用）。</li><li>注意：解除引用不代表立即回收内存，仅确保值“脱离上下文”，等待下次垃圾回收。</li></ul></li><li><strong>通过 <code>const</code> 和 <code>let</code> 提升性能</strong><ul><li><code>const</code>/<code>let</code> 是<strong>块级作用域</strong>，变量在块执行完毕后更快脱离上下文，垃圾回收程序可更早回收内存；</li><li>对比 <code>var</code>（函数/全局作用域），减少内存占用时长。</li></ul></li></ol><h2 id=隐藏类与性能优化以-v8-引擎为例>隐藏类与性能优化（以 V8 引擎为例）
<a class=header-anchor href=#%e9%9a%90%e8%97%8f%e7%b1%bb%e4%b8%8e%e6%80%a7%e8%83%bd%e4%bc%98%e5%8c%96%e4%bb%a5-v8-%e5%bc%95%e6%93%8e%e4%b8%ba%e4%be%8b></a></h2><p>V8 引擎通过“隐藏类”跟踪对象属性特征，<strong>共享相同隐藏类的对象性能更优</strong>（减少属性查找开销）。</p><h3 id=隐藏类的共享条件>隐藏类的共享条件
<a class=header-anchor href=#%e9%9a%90%e8%97%8f%e7%b1%bb%e7%9a%84%e5%85%b1%e4%ba%ab%e6%9d%a1%e4%bb%b6></a></h3><p>对象需满足“相同构造函数+相同原型”，示例：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>function</span> <span class=nx>Article</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>this</span><span class=p>.</span><span class=nx>title</span> <span class=o>=</span> <span class=s2>&#34;Ingauration Ceremony Features Kazoo Band&#34;</span><span class=p>;</span> <span class=c1>// 构造函数内声明属性
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=kd>let</span> <span class=nx>a1</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Article</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=kd>let</span> <span class=nx>a2</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Article</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=c1>// a1 和 a2 共享相同隐藏类（同构造函数、同原型）
</span></span></span></code></pre></div><h3 id=破坏隐藏类共享的行为及解决方案>破坏隐藏类共享的行为及解决方案
<a class=header-anchor href=#%e7%a0%b4%e5%9d%8f%e9%9a%90%e8%97%8f%e7%b1%bb%e5%85%b1%e4%ba%ab%e7%9a%84%e8%a1%8c%e4%b8%ba%e5%8f%8a%e8%a7%a3%e5%86%b3%e6%96%b9%e6%a1%88></a></h3><ul><li><strong>问题行为</strong>：动态添加/删除属性（导致对象属性特征变化，隐藏类不共享），示例：<div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>a1</span><span class=p>.</span><span class=nx>author</span> <span class=o>=</span> <span class=s2>&#34;Alice&#34;</span><span class=p>;</span> <span class=c1>// 动态添加属性，a1 隐藏类改变，与 a2 不再共享
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>delete</span> <span class=nx>a2</span><span class=p>.</span><span class=nx>title</span><span class=p>;</span> <span class=c1>// 动态删除属性，a2 隐藏类改变，与 a1 不再共享
</span></span></span></code></pre></div></li><li><strong>解决方案</strong>：<ol><li>构造函数中<strong>一次性声明所有属性</strong>（避免动态添加）；</li><li>不使用 <code>delete</code> 删除属性，改用 <code>null</code> 赋值（保留属性特征，维持隐藏类共享），示例：<code>a2.title = null</code>。</li></ol></li></ul><h2 id=内存泄漏>内存泄漏
<a class=header-anchor href=#%e5%86%85%e5%ad%98%e6%b3%84%e6%bc%8f></a></h2><p>内存泄漏指“不再使用的内存未被回收”，常见场景及避免方案：</p><table><thead><tr><th>泄漏场景</th><th>原因分析</th><th>避免方案</th></tr></thead><tbody><tr><td>意外声明全局变量</td><td>未用 <code>var</code>/<code>let</code>/<code>const</code> 声明的变量，自动挂载到全局（如 <code>num = 10</code>），全局变量不会自动回收</td><td>1. 所有变量用 <code>var</code>/<code>let</code>/<code>const</code> 声明；<br>2. 避免全局变量存储临时数据，使用后赋值 <code>null</code></td></tr><tr><td>定时器未清理</td><td><code>setTimeout</code>/<code>setInterval</code> 未用 <code>clearTimeout</code>/<code>clearInterval</code> 取消，回调函数及内部引用的变量持续占用内存</td><td>不再需要定时器时，主动调用清理方法（如 <code>let timer = setTimeout(...); clearTimeout(timer)</code>）</td></tr><tr><td>闭包过度使用</td><td>闭包持续引用外部函数的变量，导致外部函数上下文无法回收（即使外部函数已执行完毕）</td><td>1. 避免不必要的闭包；<br>2. 闭包内不再使用的变量，主动赋值 <code>null</code> 解除引用</td></tr></tbody></table><h2 id=静态分配与对象池>静态分配与对象池
<a class=header-anchor href=#%e9%9d%99%e6%80%81%e5%88%86%e9%85%8d%e4%b8%8e%e5%af%b9%e8%b1%a1%e6%b1%a0></a></h2><h3 id=问题背景>问题背景
<a class=header-anchor href=#%e9%97%ae%e9%a2%98%e8%83%8c%e6%99%af></a></h3><p>若短时间内大量创建对象（如循环中动态创建），对象“快速创建-快速脱离作用域”会导致浏览器<strong>频繁触发垃圾回收</strong>，影响性能。</p><h3 id=解决方案对象池>解决方案：对象池
<a class=header-anchor href=#%e8%a7%a3%e5%86%b3%e6%96%b9%e6%a1%88%e5%af%b9%e8%b1%a1%e6%b1%a0></a></h3><ul><li><strong>核心思想</strong>：提前创建一组可复用的对象，避免动态创建新对象，减少垃圾回收频率。</li><li><strong>实现步骤</strong>：<ol><li><strong>初始化对象池</strong>：创建数组等结构，存储一定数量的“空白对象”（如初始化时创建 10 个空对象）；</li><li><strong>请求对象</strong>：应用程序需要对象时，从池中取一个空白对象，设置其属性并使用；</li><li><strong>归还对象</strong>：使用完毕后，重置对象属性（如赋值 <code>null</code>），将其放回池中，供下次复用。</li></ol></li><li><strong>注意事项</strong>：<ul><li>对象池大小需提前预估（避免频繁扩容/缩容）；</li><li>属于“极端优化”，仅当垃圾回收严重影响性能时使用，多数场景无需考虑（避免过早优化）。</li></ul></li></ul></div><footer class=post-footer><div class=post-tags><a href=/tags/javascript/>JavaScript
</a><a href=/tags/ecmascript/>ECMAScript
</a><a href=/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/>前端开发
</a><a href=/tags/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/>性能优化</a></div><div class=post-share-tools><div class=post-share-loading><i class="fa-solid fa-ellipsis fa-spin"></i></div><div class="a2a_kit a2a_kit_size_32 a2a_default_style"><a class=a2a_dd href=https://www.addtoany.com/share></a><a class=a2a_button_wechat></a><a class=a2a_button_qzone></a><a class=a2a_button_sina_weibo></a><a class=a2a_button_douban></a><a class=a2a_button_facebook></a><a class=a2a_button_x></a><a class=a2a_button_email></a><a class=a2a_button_printfriendly></a></div></div><hr><div class=reward-container><div><i class="fa-solid fa-mug-hot"></i>请我喝杯咖啡吧 ヾ(^▽^*)))</div><button>
赞赏</button><div class=post-reward><div class=post-reward-item><img src=/imgs/img-lazy-loading.gif data-src=/imgs/ali-pay.png alt="张永浩 - 支付宝">
<span>支付宝</span></div><div class=post-reward-item><img src=/imgs/img-lazy-loading.gif data-src=/imgs/wechat-pay.png alt="张永浩 - 微信">
<span>微信</span></div></div></div><div class=post-copyright><img src=/imgs/cc/cc.svg class=cc-icon width=75 height=75 align=right alt=共享知识 title=共享知识><ul><li class=post-copyright-title><strong>文章标题：</strong>
4.3 垃圾回收</li><li class=post-copyright-author><strong>本文作者： </strong>张永浩</li><li class=post-copyright-link><strong>本文链接：</strong>
<a id=post-cr-link href=/post/js%E7%BA%A2%E5%AE%9D%E4%B9%A6/0402-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/ title="4.3 垃圾回收">/post/js%E7%BA%A2%E5%AE%9D%E4%B9%A6/0402-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/</a></li><li class=post-copyright-license><strong>版权声明： </strong>本作品采用 <i class="fab fa-fw fa-creative-commons"></i><a target=_blank href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh-hans>BY-NC-SA</a> 许可协议。转载请注明出处！</li><li><div class=license-icons><a href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh-hans target=_blank><img src=/imgs/cc/big/by_nc_sa.svg alt=BY-NC-SA title=BY-NC-SA>
</a><a href=https://notbyai.fyi target=_blank><img src=/imgs/notbyai/zh-hans/white.svg title="Not By AI"></a></div></li></ul></div><div class=post-nav><div class="post-nav-next post-nav-item"><a href=/post/js%E7%BA%A2%E5%AE%9D%E4%B9%A6/0401-%E5%8E%9F%E5%A7%8B%E5%80%BC%E4%B8%8E%E5%BC%95%E7%94%A8%E5%80%BC/ rel=next title="4.1 原始值与引用值"><i class="fa fa-chevron-left"></i> 4.1 原始值与引用值</a></div><div class="post-nav-prev post-nav-item"><a href=/post/js%E7%BA%A2%E5%AE%9D%E4%B9%A6/0304-%E6%93%8D%E4%BD%9C%E7%AC%A6/ rel=prev title="3.4 操作符">3.4 操作符
<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div></div></main><footer class=footer><div class=footer-inner><div id=i18n-translate class=i18n-translate><i class="fa fa-language"></i><div id=lang-select class=lang-select><div id=lang-selected class=selected-option><span class="flag-icon flag-icon-zh-cn"></span>
<span class=selected-language>简体中文</span>
<i class="fa fa-chevron-down"></i></div><div id=lang-options class=lang-options><div class=lang-option lang-code=zh-cn lang-name=简体中文 lang-url=/post/js%E7%BA%A2%E5%AE%9D%E4%B9%A6/0402-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/><span class="flag-icon flag-icon-zh-cn"></span>
<span class=lang-name>简体中文</span></div></div></div></div><div class=copyright>&copy;
<span itemprop=copyrightYear>2025
</span><span class=with-love><i class="fa fa-heart"></i>
</span><span class=author itemprop=copyrightHolder>张永浩</span></div><div class=powered-by>由 <a href=https://gohugo.io title=0.148.2 target=_blank>Hugo</a> & <a href=https://github.com/hugo-next/hugo-theme-next title=4.8.3 target=_blank>Hugo NexT.Gemini</a> 强力驱动</div><div class=beian><a href=https://beian.miit.gov.cn target=_blank></a></div><div class=vendors-list><a target=_blank href=https://app.netlify.com/ title=Netlify><img src=/imgs/img-lazy-loading.gif data-src=/imgs/vendors/Netlify.svg alt=Netlify>
</a><a target=_blank href=https://github.com title=Github><img src=/imgs/img-lazy-loading.gif data-src=/imgs/vendors/github.svg alt=Github>
</a><span>提供CDN/云资源支持</span></div></div></footer><script class=next-config data-name=page type=application/json>{"clipboard":{"js":{"alias":"clipboard","file":"dist/clipboard.min.js","name":"clipboard.js","version":"2.0.11"}},"comments":false,"expired":false,"isHome":false,"isPage":true,"path":"0402-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6","permalink":"/post/js%E7%BA%A2%E5%AE%9D%E4%B9%A6/0402-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/","title":"4.3 垃圾回收","toc":true}</script><script type=text/javascript src=/js/3rd/animejs/3.2.2/anime.min.js crossorigin=anonymous defer></script><script type=text/javascript src=/js/3rd/viewerjs/1.11.6/viewer.min.js crossorigin=anonymous defer></script><script class=next-config data-name=main type=application/json>{"bookmark":{"color":"#222","enable":true,"save":"manual"},"copybtn":true,"darkmode":false,"hostname":"/","i18n":{"ds_day":" 天前","ds_days":" 天 ","ds_hour":" 小时前","ds_hours":" 小时 ","ds_just":"刚刚","ds_min":" 分钟前","ds_mins":" 分钟","ds_month":" 个月前","ds_years":" 年 ","empty":"没有找到任何搜索结果：${query}","hits":"找到 ${hits} 个搜索结果","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","placeholder":"搜索..."},"isMultiLang":true,"lang":"zh-CN","lazyload":false,"localSearch":{"enable":true,"limit":1e3,"path":"/searchindexes.xml","preload":false,"topnperarticle":-1,"trigger":"auto","unescape":false},"motion":{"async":true,"enable":true,"transition":{"collheader":"slideInRight","postblock":"fadeIn","postbody":"fadeInDown","postheader":"fadeInDown","sidebar":"fadeInUp"}},"postmeta":{"comments":{"enable":false,"plugin":"waline"},"views":{"enable":true,"plugin":"busuanzi"}},"root":"/","scheme":"Gemini","share":{"addtoany":{"js":"https://static.addtoany.com/menu/page.js","locale":"zh-CN","num":8},"enable":true},"sidebar":{"display":"post","offset":12,"padding":18,"position":"left","width":256},"vendor":{"plugins":"local","router":{"name":"local","type":"modern","url":"/js/3rd"}},"version":"4.8.3","waline":{"cfg":{"emoji":false,"imguploader":false,"placeholder":"请文明发言哟 ヾ(≧▽≦*)o","reaction":true,"reactiontext":["点赞","踩一下","得意","不屑","尴尬","睡觉"],"reactiontitle":"你认为这篇文章怎么样？","requiredmeta":["nick","mail"],"serverurl":null,"sofa":"快来发表你的意见吧 (≧∀≦)ゞ","wordlimit":200},"css":{"alias":"@waline/client","file":"dist/waline.css","name":"waline","version":"2.15.8"},"js":{"alias":"@waline/client","file":"dist/waline.js","name":"waline","version":"2.15.8"}}}</script><script type=text/javascript src="/js/main.min.js?=1764508344" defer></script><script type=text/javascript src="/js/clipboard.min.js?=1764508344" defer></script></body></html>